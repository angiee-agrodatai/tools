(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{2011:(at,De,O)=>{"use strict";O.d(De,{hO:()=>He,xv:()=>_e,Dh:()=>ue,GT:()=>me,cc:()=>xe,on:()=>G,pX:()=>se});var p=O(5e3),B=O(127),P=O(5813);at=O.hmd(at);const ae=["ngOnDestroy"],se=(ce,Re,Me,he={})=>new Proxy(ce,{get:(be,Ee)=>Me.runOutsideAngular(()=>{var ze;if(ce[Ee])return(null===(ze=null==he?void 0:he.spy)||void 0===ze?void 0:ze.get)&&he.spy.get(Ee,ce[Ee]),ce[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const re=Re.toPromise().then(Qe=>{const X=Qe&&Qe[Ee];return"function"==typeof X?X.bind(Qe):X&&X.then?X.then(pe=>Me.run(()=>pe)):Me.run(()=>X)});return new Proxy(()=>{},{get:(Qe,X)=>re[X],apply:(Qe,X,pe)=>re.then(fe=>{var ye;const Le=fe&&fe(...pe);return(null===(ye=null==he?void 0:he.spy)||void 0===ye?void 0:ye.apply)&&he.spy.apply(Ee,pe,Le),Le})})})}),me=(ce,Re)=>{Re.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(he=>{Object.defineProperty(ce.prototype,he,Object.getOwnPropertyDescriptor(Me.prototype||Me,he))})})};class le{constructor(Re){return Re}}const ue=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function G(ce,Re,Me){const be="object"==typeof Me&&Me||{};be.name=be.name||"string"==typeof Me&&Me||"[DEFAULT]";const ze=B.Z.apps.filter(re=>re&&re.name===be.name)[0]||Re.runOutsideAngular(()=>B.Z.initializeApp(ce,be));try{JSON.stringify(ce)!==JSON.stringify(ze.options)&&H("error",`${ze.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new le(ze)}const H=(ce,...Re)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)},ne={provide:le,useFactory:G,deps:[ue,p.R0b,[new p.FiY,_e]]};let He=(()=>{class ce{constructor(Me){B.Z.registerVersion("angularfire",P.q4.full,"core"),B.Z.registerVersion("angularfire",P.q4.full,"app-compat"),B.Z.registerVersion("angular",p.q4F.full,Me.toString())}static initializeApp(Me,he){return{ngModule:ce,providers:[{provide:ue,useValue:Me},{provide:_e,useValue:he}]}}}return ce.\u0275fac=function(Me){return new(Me||ce)(p.LFG(p.Lbi))},ce.\u0275mod=p.oAB({type:ce}),ce.\u0275inj=p.cJS({providers:[ne]}),ce})();function xe(ce,Re,Me,he,be){const[,Ee,ze]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===ce)||[];if(Ee)return function Fe(ce,Re){try{return ce.toString()===Re.toString()}catch(Me){return ce===Re}}(be,ze)||(Q("error",`${Re} was already initialized on the ${Me} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),Q("warn",{is:be,was:ze})),Ee;{const re=he();return globalThis.\u0275AngularfireInstanceCache.push([ce,re,be]),re}}const je=!!at.hot,Q=(ce,...Re)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,O)=>{"use strict";O.d(De,{q4:()=>zu,iC:()=>Ms,fc:()=>ra,HU:()=>yd,vb:()=>Qu,JM:()=>lg});var p=O(5e3),B=O(5867),P=O(5861),ae=O(9681),se=O(2090),me=O(4859),le=O(1877),ue=O(2940);const _e="@firebase/installations",G="0.5.5",ne=`w:${G}`,He="FIS_v2",Re=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(b){return b instanceof se.ZR&&b.code.includes("request-failed")}function he({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function be(b){return{token:b.token,requestStatus:2,expiresIn:fe(b.expiresIn),creationTime:Date.now()}}function Ee(b,D){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(b,D){const V=(yield D.json()).error;return Re.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function re({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Qe(b,{refreshToken:D}){const M=re(b);return M.append("Authorization",function ye(b){return`${He} ${b}`}(D)),M}function X(b){return pe.apply(this,arguments)}function pe(){return(pe=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function fe(b){return Number(b.replace("s","000"))}function Le(b,D){return de.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*(b,{fid:D}){const M=he(b),J={method:"POST",headers:re(b),body:JSON.stringify({fid:D,authVersion:He,appId:b.appId,sdkVersion:ne})},Oe=yield X(()=>fetch(M,J));if(Oe.ok){const $e=yield Oe.json();return{fid:$e.fid||D,registrationStatus:2,refreshToken:$e.refreshToken,authToken:be($e.authToken)}}throw yield Ee("Create Installation",Oe)})).apply(this,arguments)}function wt(b){return new Promise(D=>{setTimeout(D,b)})}const Rn=/^[cdef][\w-]{21}$/;function it(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function ur(b){return function Zt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Rn.test(M)?M:""}catch(b){return""}}function sn(b){return`${b.appName}!${b.appId}`}const yr=new Map;function Yt(b,D){const M=sn(b);Cn(M,D),function Ui(b,D){const M=function Dr(){return!Zn&&"BroadcastChannel"in self&&(Zn=new BroadcastChannel("[Firebase] FID Change"),Zn.onmessage=b=>{Cn(b.data.key,b.data.fid)}),Zn}();M&&M.postMessage({key:b,fid:D}),function Qi(){0===yr.size&&Zn&&(Zn.close(),Zn=null)}()}(M,D)}function Cn(b,D){const M=yr.get(b);if(M)for(const V of M)V(D)}let Zn=null;const Un="firebase-installations-store";let Ji=null;function pt(){return Ji||(Ji=(0,ue.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Un)})),Ji}function Or(b,D){return An.apply(this,arguments)}function An(){return(An=(0,P.Z)(function*(b,D){const M=sn(b),Y=(yield pt()).transaction(Un,"readwrite"),J=Y.objectStore(Un),Oe=yield J.get(M);return yield J.put(D,M),yield Y.complete,(!Oe||Oe.fid!==D.fid)&&Yt(b,D.fid),D})).apply(this,arguments)}function Wt(b){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,P.Z)(function*(b){const D=sn(b),V=(yield pt()).transaction(Un,"readwrite");yield V.objectStore(Un).delete(D),yield V.complete})).apply(this,arguments)}function ht(b,D){return lt.apply(this,arguments)}function lt(){return(lt=(0,P.Z)(function*(b,D){const M=sn(b),Y=(yield pt()).transaction(Un,"readwrite"),J=Y.objectStore(Un),Oe=yield J.get(M),$e=D(Oe);return void 0===$e?yield J.delete(M):yield J.put($e,M),yield Y.complete,$e&&(!Oe||Oe.fid!==$e.fid)&&Yt(b,$e.fid),$e})).apply(this,arguments)}function bt(b){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(b){let D;const M=yield ht(b,V=>{const Y=lr(V),J=St(b,Y);return D=J.registrationPromise,J.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function lr(b){return Gs(b||{fid:it(),registrationStatus:0})}function St(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Re.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function st(b,D){return Je.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:$s(b)}:{installationEntry:D}}function Je(){return(Je=(0,P.Z)(function*(b,D){try{return Or(b,yield Le(b,D))}catch(M){throw Me(M)&&409===M.customData.serverCode?yield Wt(b):yield Or(b,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function $s(b){return vs.apply(this,arguments)}function vs(){return(vs=(0,P.Z)(function*(b){let D=yield jt(b);for(;1===D.registrationStatus;)yield wt(100),D=yield jt(b);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield bt(b);return V||M}return D})).apply(this,arguments)}function jt(b){return ht(b,D=>{if(!D)throw Re.create("installation-not-found");return Gs(D)})}function Gs(b){return function Yn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function En(b,D){return j.apply(this,arguments)}function j(){return(j=(0,P.Z)(function*({appConfig:b,platformLoggerProvider:D},M){const V=W(b,M),Y=Qe(b,M),J=D.getImmediate({optional:!0});J&&Y.append("x-firebase-client",J.getPlatformInfoString());const $e={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ne}})},Ze=yield X(()=>fetch(V,$e));if(Ze.ok)return be(yield Ze.json());throw yield Ee("Generate Auth Token",Ze)})).apply(this,arguments)}function W(b,{fid:D}){return`${he(b)}/${D}/authTokens:generate`}function K(b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,P.Z)(function*(b,D=!1){let M;const V=yield ht(b.appConfig,J=>{if(!Qn(J))throw Re.create("not-registered");const Oe=J.authToken;if(!D&&cr(Oe))return J;if(1===Oe.requestStatus)return M=ie(b,D),J;{if(!navigator.onLine)throw Re.create("app-offline");const $e=Jn(J);return M=zt(b,$e),$e}});return M?yield M:V.authToken})).apply(this,arguments)}function ie(b,D){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,P.Z)(function*(b,D){let M=yield ft(b.appConfig);for(;1===M.authToken.requestStatus;)yield wt(100),M=yield ft(b.appConfig);const V=M.authToken;return 0===V.requestStatus?K(b,D):V})).apply(this,arguments)}function ft(b){return ht(b,D=>{if(!Qn(D))throw Re.create("not-registered");return function oe(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function zt(b,D){return on.apply(this,arguments)}function on(){return(on=(0,P.Z)(function*(b,D){try{const M=yield En(b,D),V=Object.assign(Object.assign({},D),{authToken:M});return yield Or(b.appConfig,V),M}catch(M){if(!Me(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Or(b.appConfig,V)}else yield Wt(b.appConfig);throw M}})).apply(this,arguments)}function Qn(b){return void 0!==b&&2===b.registrationStatus}function cr(b){return 2===b.requestStatus&&!function Nt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Jn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function z(){return(z=(0,P.Z)(function*(b){const D=b,{installationEntry:M,registrationPromise:V}=yield bt(D.appConfig);return V?V.catch(console.error):K(D).catch(console.error),M.fid})).apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(b,D=!1){const M=b;return yield ot(M.appConfig),(yield K(M,D)).token})).apply(this,arguments)}function ot(b){return At.apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(b){const{registrationPromise:D}=yield bt(b);D&&(yield D)})).apply(this,arguments)}function Ia(b){return Re.create("missing-app-config-values",{valueName:b})}const an="installations",Lt=b=>{const D=b.getProvider("app").getImmediate(),M=function vr(b){if(!b||!b.options)throw Ia("App Configuration");if(!b.name)throw Ia("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!b.options[M])throw Ia(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:M,platformLoggerProvider:(0,ae._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},dn=b=>{const D=b.getProvider("app").getImmediate(),M=(0,ae._getProvider)(D,an).getImmediate();return{getId:()=>function Z(b){return z.apply(this,arguments)}(M),getToken:Y=>function Te(b){return qe.apply(this,arguments)}(M,Y)}};(function si(){(0,ae._registerComponent)(new me.wA(an,Lt,"PUBLIC")),(0,ae._registerComponent)(new me.wA("installations-internal",dn,"PRIVATE"))})(),(0,ae.registerVersion)(_e,G),(0,ae.registerVersion)(_e,G,"esm2017");const es="@firebase/remote-config",Bn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xu{constructor(D,M,V,Y){this.client=D,this.storage=M,this.storageCache=V,this.logger=Y}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,Y=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var M=this;return(0,P.Z)(function*(){const[V,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Y;D.eTag=Y&&Y.eTag;const J=yield M.client.fetch(D),Oe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Oe.push(M.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Oe),J})()}}function Ks(b=navigator){return b.languages&&b.languages[0]||b.language}class ai{constructor(D,M,V,Y,J,Oe){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=V,this.projectId=Y,this.apiKey=J,this.appId=Oe}fetch(D){var M=this;return(0,P.Z)(function*(){const[V,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,$e={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ze={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:M.appId,language_code:Ks()},Jt={method:"POST",headers:$e,body:JSON.stringify(Ze)},Xt=fetch(Oe,Jt),qn=new Promise((Ns,Wr)=>{D.signal.addEventListener(()=>{const ru=new Error("The operation was aborted.");ru.name="AbortError",Wr(ru)})});let qr;try{yield Promise.race([Xt,qn]),qr=yield Xt}catch(Ns){let Wr="fetch-client-network";throw"AbortError"===Ns.name&&(Wr="fetch-timeout"),Bn.create(Wr,{originalErrorMessage:Ns.message})}let Pn=qr.status;const cs=qr.headers.get("ETag")||void 0;let eo,Ur;if(200===qr.status){let Ns;try{Ns=yield qr.json()}catch(Wr){throw Bn.create("fetch-client-parse",{originalErrorMessage:Wr.message})}eo=Ns.entries,Ur=Ns.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Pn=500:"NO_CHANGE"===Ur?Pn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(eo={}),304!==Pn&&200!==Pn)throw Bn.create("fetch-status",{httpStatus:Pn});return{status:Pn,eTag:cs,config:eo}})()}}class ng{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,P.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:V}){var Y=this;return(0,P.Z)(function*(){yield function tg(b,D){return new Promise((M,V)=>{const Y=Math.max(D-Date.now(),0),J=setTimeout(M,Y);b.addEventListener(()=>{clearTimeout(J),V(Bn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const J=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),J}catch(J){if(!function ws(b){if(!(b instanceof se.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(J))throw J;const Oe={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Oe),Y.attemptFetch(D,Oe)}})()}}class ad{constructor(D,M,V,Y,J){this.app=D,this._client=M,this._storageCache=V,this._storage=Y,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ll(b,D){const M=b.target.error||void 0;return Bn.create(D,{originalErrorMessage:M&&M.message})}const Zs="app_namespace_store";class $o{constructor(D,M,V,Y=function ud(){return new Promise((b,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{D(Ll(V,"storage-open"))},M.onsuccess=V=>{b(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Zs,{keyPath:"compositeKey"})}}catch(M){D(Bn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Y,J)=>{const $e=V.transaction([Zs],"readonly").objectStore(Zs),Ze=M.createCompositeKey(D);try{const Jt=$e.get(Ze);Jt.onerror=Xt=>{J(Ll(Xt,"storage-get"))},Jt.onsuccess=Xt=>{const qn=Xt.target.result;Y(qn?qn.value:void 0)}}catch(Jt){J(Bn.create("storage-get",{originalErrorMessage:Jt&&Jt.message}))}})})()}set(D,M){var V=this;return(0,P.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((J,Oe)=>{const Ze=Y.transaction([Zs],"readwrite").objectStore(Zs),Jt=V.createCompositeKey(D);try{const Xt=Ze.put({compositeKey:Jt,value:M});Xt.onerror=qn=>{Oe(Ll(qn,"storage-set"))},Xt.onsuccess=()=>{J()}}catch(Xt){Oe(Bn.create("storage-set",{originalErrorMessage:Xt&&Xt.message}))}})})()}delete(D){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Y,J)=>{const $e=V.transaction([Zs],"readwrite").objectStore(Zs),Ze=M.createCompositeKey(D);try{const Jt=$e.delete(Ze);Jt.onerror=Xt=>{J(Ll(Xt,"storage-delete"))},Jt.onsuccess=()=>{Y()}}catch(Jt){J(Bn.create("storage-delete",{originalErrorMessage:Jt&&Jt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class og{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const M=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),J=yield M;J&&(D.lastFetchStatus=J);const Oe=yield V;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const $e=yield Y;$e&&(D.activeConfig=$e)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ld(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,P.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(b){return!1}})).apply(this,arguments)}!function ag(){(0,ae._registerComponent)(new me.wA("remote-config",function b(D,{instanceIdentifier:M}){const V=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,se.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:J,apiKey:Oe,appId:$e}=V.options;if(!J)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!$e)throw Bn.create("registration-app-id");const Ze=new $o($e,V.name,M=M||"firebase"),Jt=new og(Ze),Xt=new le.Yd(es);Xt.logLevel=le.in.ERROR;const qn=new ai(Y,ae.SDK_VERSION,M,J,Oe,$e),qr=new ng(qn,Ze),Pn=new xu(qr,Ze,Jt,Xt),cs=new ad(V,Pn,Jt,Ze,Xt);return function mn(b){const D=(0,se.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(cs),cs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(es,"0.3.4"),(0,ae.registerVersion)(es,"0.3.4","esm2017")}();const Aa="/firebase-messaging-sw.js",ji="/firebase-cloud-messaging-push-scope",cd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ra="google.c.a.c_id",zh="google.c.a.c_l",Ma="google.c.a.ts",dd="google.c.a.e";var Go=(()=>{return(b=Go||(Go={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Go;var b})();function vi(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ul(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),Y=new Uint8Array(V.length);for(let J=0;J<V.length;++J)Y[J]=V.charCodeAt(J);return Y}const In="fcm_token_details_db",Kh="fcm_token_object_Store";function Mu(b){return ka.apply(this,arguments)}function ka(){return ka=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(In))return null;let D=null;return(yield(0,ue.openDb)(In,5,function(){var V=(0,P.Z)(function*(Y){var J;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Kh))return;const Oe=Y.transaction.objectStore(Kh),$e=yield Oe.index("fcmSenderId").get(b);if(yield Oe.clear(),$e)if(2===Y.oldVersion){const Ze=$e;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;D={token:Ze.fcmToken,createTime:null!==(J=Ze.createTime)&&void 0!==J?J:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:vi(Ze.vapidKey)}}}else if(3===Y.oldVersion){const Ze=$e;D={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:vi(Ze.auth),p256dh:vi(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:vi(Ze.vapidKey)}}}else if(4===Y.oldVersion){const Ze=$e;D={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:vi(Ze.auth),p256dh:vi(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:vi(Ze.vapidKey)}}}});return function(Y){return V.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(In),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),hd(D)?D:null}),ka.apply(this,arguments)}function hd(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Hi="firebase-messaging-store";let Vl=null;function hn(){return Vl||(Vl=(0,ue.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Hi)})),Vl}function qo(b){return vo.apply(this,arguments)}function vo(){return(vo=(0,P.Z)(function*(b){const D=dr(b),V=yield(yield hn()).transaction(Hi).objectStore(Hi).get(D);if(V)return V;{const Y=yield Mu(b.appConfig.senderId);if(Y)return yield fn(b,Y),Y}})).apply(this,arguments)}function fn(b,D){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,P.Z)(function*(b,D){const M=dr(b),Y=(yield hn()).transaction(Hi,"readwrite");return yield Y.objectStore(Hi).put(D,M),yield Y.complete,D})).apply(this,arguments)}function Pu(b){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(b){const D=dr(b),V=(yield hn()).transaction(Hi,"readwrite");yield V.objectStore(Hi).delete(D),yield V.complete})).apply(this,arguments)}function dr({appConfig:b}){return b.appId}const jn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function is(b,D){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,P.Z)(function*(b,D){const M=yield Es(b),V=Wo(D),Y={method:"POST",headers:M,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(ss(b.appConfig),Y)).json()}catch(Oe){throw jn.create("token-subscribe-failed",{errorInfo:Oe})}if(J.error)throw jn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw jn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function wo(b,D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,P.Z)(function*(b,D){const M=yield Es(b),V=Wo(D.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(`${ss(b.appConfig)}/${D.token}`,Y)).json()}catch(Oe){throw jn.create("token-update-failed",{errorInfo:Oe})}if(J.error)throw jn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw jn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Fa(b,D){return $i.apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(b,D){const V={method:"DELETE",headers:yield Es(b)};try{const J=yield(yield fetch(`${ss(b.appConfig)}/${D}`,V)).json();if(J.error)throw jn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Y){throw jn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function ss({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Es(b){return mt.apply(this,arguments)}function mt(){return(mt=(0,P.Z)(function*({appConfig:b,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Wo({p256dh:b,auth:D,endpoint:M,vapidKey:V}){const Y={web:{endpoint:M,auth:D,p256dh:b}};return V!==cd&&(Y.web.applicationPubKey=V),Y}const pd=6048e5;function ku(b){return jl.apply(this,arguments)}function jl(){return(jl=(0,P.Z)(function*(b){const D=yield Tn(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:vi(D.getKey("auth")),p256dh:vi(D.getKey("p256dh"))},V=yield qo(b.firebaseDependencies);if(V){if(Eo(V.subscriptionOptions,M))return Date.now()>=V.createTime+pd?$l(b,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Fa(b.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Ut(b.firebaseDependencies,M)}return Ut(b.firebaseDependencies,M)})).apply(this,arguments)}function La(b){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,P.Z)(function*(b){const D=yield qo(b.firebaseDependencies);D&&(yield Fa(b.firebaseDependencies,D.token),yield Pu(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function $l(b,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*(b,D){try{const M=yield wo(b.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield fn(b.firebaseDependencies,V),M}catch(M){throw yield La(b),M}})).apply(this,arguments)}function Ut(b,D){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,P.Z)(function*(b,D){const V={token:yield is(b,D),createTime:Date.now(),subscriptionOptions:D};return yield fn(b,V),V.token})).apply(this,arguments)}function Tn(b,D){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ul(D)})})).apply(this,arguments)}function Eo(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function wi(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ql(b,D){if(!D.notification)return;b.notification={};const M=D.notification.title;M&&(b.notification.title=M);const V=D.notification.body;V&&(b.notification.body=V);const Y=D.notification.image;Y&&(b.notification.image=Y)}(D,b),function Ua(b,D){!D.data||(b.data=D.data)}(D,b),function ug(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const M=D.fcmOptions.link;M&&(b.fcmOptions.link=M);const V=D.fcmOptions.analytics_label;V&&(b.fcmOptions.analyticsLabel=V)}(D,b),D}function gd(b){return"object"==typeof b&&!!b&&Ra in b}function Co(b,D){const M=[];for(let V=0;V<b.length;V++)M.push(b.charAt(V)),V<D.length&&M.push(D.charAt(V));return M.join("")}function Hn(b){return jn.create("missing-app-config-values",{valueName:b})}Co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Cs{constructor(D,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ou(b){if(!b||!b.options)throw Hn("App Configuration Object");if(!b.name)throw Hn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const V of D)if(!M[V])throw Hn(V);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Va(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Aa,{scope:ji}),b.swRegistration.update().catch(()=>{})}catch(D){throw jn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Gi(b,D){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Va(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function Fu(b,D){return zl.apply(this,arguments)}function zl(){return(zl=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=cd)})).apply(this,arguments)}function Ba(){return(Ba=(0,P.Z)(function*(b,D){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield Fu(b,null==D?void 0:D.vapidKey),yield Gi(b,null==D?void 0:D.serviceWorkerRegistration),ku(b)})).apply(this,arguments)}function ja(b,D,M){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,P.Z)(function*(b,D,M){const V=Zl(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[Ra],message_name:M[zh],message_time:M[Ma],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zl(b){switch(b){case Go.NOTIFICATION_CLICKED:return"notification_open";case Go.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ha(){return(Ha=(0,P.Z)(function*(b,D){const M=D.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Go.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(wi(M)):b.onMessageHandler.next(wi(M)));const V=M.data;gd(V)&&"1"===V[dd]&&(yield ja(b,M.messageType,V))})).apply(this,arguments)}const $a="@firebase/messaging",Yl=b=>{const D=new Cs(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Zh(b,D){return Ha.apply(this,arguments)}(D,M)),D},Yh=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:V=>function Lu(b,D){return Ba.apply(this,arguments)}(D,V)}};function Ko(){return os.apply(this,arguments)}function os(){return(os=(0,P.Z)(function*(){try{yield(0,se.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qh(){(0,ae._registerComponent)(new me.wA("messaging",Yl,"PUBLIC")),(0,ae._registerComponent)(new me.wA("messaging-internal",Yh,"PRIVATE")),(0,ae.registerVersion)($a,"0.9.8"),(0,ae.registerVersion)($a,"0.9.8","esm2017")}();const Ga="analytics",Io="firebase_id",Jl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uu="https://www.googletagmanager.com/gtag/js",Er=new le.Yd("@firebase/analytics");function Xl(b){return Promise.all(b.map(D=>D.catch(M=>M)))}function bs(b,D){const M=document.createElement("script");M.src=`${Uu}?l=${b}&id=${D}`,M.async=!0,document.head.appendChild(M)}function ec(b,D,M,V,Y,J){return tc.apply(this,arguments)}function tc(){return(tc=(0,P.Z)(function*(b,D,M,V,Y,J){const Oe=V[Y];try{if(Oe)yield D[Oe];else{const Ze=(yield Xl(M)).find(Jt=>Jt.measurementId===Y);Ze&&(yield D[Ze.appId])}}catch($e){Er.error($e)}b("config",Y,J)})).apply(this,arguments)}function Bu(b,D,M,V,Y){return ju.apply(this,arguments)}function ju(){return(ju=(0,P.Z)(function*(b,D,M,V,Y){try{let J=[];if(Y&&Y.send_to){let Oe=Y.send_to;Array.isArray(Oe)||(Oe=[Oe]);const $e=yield Xl(M);for(const Ze of Oe){const Jt=$e.find(qn=>qn.measurementId===Ze),Xt=Jt&&D[Jt.appId];if(!Xt){J=[];break}J.push(Xt)}}0===J.length&&(J=Object.values(D)),yield Promise.all(J),b("event",V,Y||{})}catch(J){Er.error(J)}})).apply(this,arguments)}function _n(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(Uu))return D;return null}const et=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nc=new class xn{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function $n(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Zo(b){return za.apply(this,arguments)}function za(){return(za=(0,P.Z)(function*(b){var D;const{appId:M,apiKey:V}=b,Y={method:"GET",headers:$n(V)},J=Jl.replace("{app-id}",M),Oe=yield fetch(J,Y);if(200!==Oe.status&&304!==Oe.status){let $e="";try{const Ze=yield Oe.json();(null===(D=Ze.error)||void 0===D?void 0:D.message)&&($e=Ze.error.message)}catch(Ze){}throw et.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:$e})}return Oe.json()})).apply(this,arguments)}function bo(b){return To.apply(this,arguments)}function To(){return(To=(0,P.Z)(function*(b,D=nc,M){const{appId:V,apiKey:Y,measurementId:J}=b.options;if(!V)throw et.create("no-app-id");if(!Y){if(J)return{measurementId:J,appId:V};throw et.create("no-api-key")}const Oe=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new Ka;return setTimeout((0,P.Z)(function*(){$e.abort()}),void 0!==M?M:6e4),as({appId:V,apiKey:Y,measurementId:J},Oe,$e,D)})).apply(this,arguments)}function as(b,D,M){return _t.apply(this,arguments)}function _t(){return(_t=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:M},V,Y=nc){const{appId:J,measurementId:Oe}=b;try{yield rc(V,D)}catch($e){if(Oe)return Er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:J,measurementId:Oe};throw $e}try{const $e=yield Zo(b);return Y.deleteThrottleMetadata(J),$e}catch($e){if(!md($e)){if(Y.deleteThrottleMetadata(J),Oe)return Er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:J,measurementId:Oe};throw $e}const Ze=503===Number($e.customData.httpStatus)?(0,se.$s)(M,Y.intervalMillis,30):(0,se.$s)(M,Y.intervalMillis),Jt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:M+1};return Y.setThrottleMetadata(J,Jt),Er.debug(`Calling attemptFetch again in ${Ze} millis`),as(b,Jt,V,Y)}})).apply(this,arguments)}function rc(b,D){return new Promise((M,V)=>{const Y=Math.max(D-Date.now(),0),J=setTimeout(M,Y);b.addEventListener(()=>{clearTimeout(J),V(et.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function md(b){if(!(b instanceof se.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ka{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ic(){return un.apply(this,arguments)}function un(){return(un=(0,P.Z)(function*(){if(!(0,se.hl)())return Er.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(b){return Er.warn(et.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Za(){return(Za=(0,P.Z)(function*(b,D,M,V,Y,J,Oe){var $e;const Ze=bo(b);Ze.then(Pn=>{M[Pn.measurementId]=Pn.appId,b.options.measurementId&&Pn.measurementId!==b.options.measurementId&&Er.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pn=>Er.error(Pn)),D.push(Ze);const Jt=ic().then(Pn=>{if(Pn)return V.getId()}),[Xt,qn]=yield Promise.all([Ze,Jt]);_n()||bs(J,Xt.measurementId),Y("js",new Date);const qr=null!==($e=null==Oe?void 0:Oe.config)&&void 0!==$e?$e:{};return qr.origin="firebase",qr.update=!0,null!=qn&&(qr[Io]=qn),Y("config",Xt.measurementId,qr),Xt.measurementId})).apply(this,arguments)}class Qo{constructor(D){this.app=D}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},Hu=[];const Jo={};let Ya,Ds,us="dataLayer",sc=!1;function Rr(b,D,M){!function Xo(){const b=[];if((0,se.ru)()&&b.push("This is a browser extension environment."),(0,se.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),M=et.create("invalid-analytics-context",{errorInfo:D});Er.warn(M.message)}}();const V=b.options.appId;if(!V)throw et.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw et.create("no-api-key");Er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[V])throw et.create("already-exists",{id:V});if(!sc){!function Vu(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(us);const{wrappedGtag:J,gtagCore:Oe}=function $_(b,D,M,V,Y){let J=function(...Oe){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(J=window[Y]),window[Y]=function ef(b,D,M,V){function J(){return(J=(0,P.Z)(function*(Oe,$e,Ze){try{"event"===Oe?yield Bu(b,D,M,$e,Ze):"config"===Oe?yield ec(b,D,M,V,$e,Ze):b("set",$e)}catch(Jt){Er.error(Jt)}})).apply(this,arguments)}return function Y(Oe,$e,Ze){return J.apply(this,arguments)}}(J,b,D,M),{gtagCore:J,wrappedGtag:window[Y]}}($r,Hu,Jo,us,"gtag");Ds=J,Ya=Oe,sc=!0}return $r[V]=function Yo(b,D,M,V,Y,J,Oe){return Za.apply(this,arguments)}(b,Hu,Jo,D,Ya,us,M),new Qo(b)}function ea(){return(ea=(0,P.Z)(function*(b,D,M,V,Y){if(Y&&Y.global)b("event",M,V);else{const J=yield D;b("event",M,Object.assign(Object.assign({},V),{send_to:J}))}})).apply(this,arguments)}function _d(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,P.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(b){return!1}})).apply(this,arguments)}const nf="@firebase/analytics";!function qu(){(0,ae._registerComponent)(new me.wA(Ga,(D,{options:M})=>Rr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new me.wA("analytics-internal",function b(D){try{const M=D.getProvider(Ga).getImmediate();return{logEvent:(V,Y,J)=>function Ci(b,D,M,V){b=(0,se.m9)(b),function oc(b,D,M,V,Y){return ea.apply(this,arguments)}(Ds,$r[b.app.options.appId],D,M,V).catch(Y=>Er.error(Y))}(M,V,Y,J)}}catch(M){throw et.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(nf,"0.7.5"),(0,ae.registerVersion)(nf,"0.7.5","esm2017")}();var xs=O(4408),nr=O(7565);const Xa=new class Ja extends nr.v{}(class uc extends xs.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,M,V):D.flush(this)}});var Wu=O(4986),Gr=O(8505),Ii=O(5363),eu=O(9468);const zu=new p.GfV("7.2.1"),di="__angularfire_symbol__analyticsIsSupportedValue",na="__angularfire_symbol__analyticsIsSupported",lc="__angularfire_symbol__remoteConfigIsSupportedValue",Ku="__angularfire_symbol__remoteConfigIsSupported",Pt="__angularfire_symbol__messagingIsSupportedValue",Zu="__angularfire_symbol__messagingIsSupported";function lg(b,D,M){if(D){if(1===D.length)return D[0];const J=D.filter(Oe=>Oe.app===M);if(1===J.length)return J[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[na]||(globalThis[na]=_d().then(b=>globalThis[di]=b).catch(()=>globalThis[di]=!1)),globalThis[Zu]||(globalThis[Zu]=Ko().then(b=>globalThis[Pt]=b).catch(()=>globalThis[Pt]=!1)),globalThis[Ku]||(globalThis[Ku]=ld().then(b=>globalThis[lc]=b).catch(()=>globalThis[lc]=!1));const Qu=(b,D)=>{const M=D?[D]:(0,B.C6)(),V=[];return M.forEach(Y=>{Y.container.getProvider(b).instances.forEach(Oe=>{V.includes(Oe)||V.push(Oe)})}),V};function Lr(){}class tu{constructor(D,M=Xa){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,V){const Y=this.zone;return this.delegate.schedule(function(Oe){Y.runGuarded(()=>{D.apply(this,[Oe])})},M,V)}}class Ju{constructor(D){this.zone=D,this.task=null}call(D,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lr,{},Lr,Lr)),M.pipe((0,Gr.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yd=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new tu(Zone.current)),this.insideAngular=M.run(()=>new tu(Zone.current,Wu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(p.LFG(p.R0b))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Rs(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ra(b){return b.pipe((0,Ii.Q)(Rs().outsideAngular))}function Ms(b){return Rs(),function Xu(b){return function(M){return(M=M.lift(new Ju(b.ngZone))).pipe((0,eu.R)(b.outsideAngular),(0,Ii.Q)(b.insideAngular))}}(Rs())(b)}},4929:(at,De,O)=>{"use strict";O.d(De,{$:()=>pd,A:()=>H,E:()=>Lt,G:()=>Hr,I:()=>ws,K:()=>cr,L:()=>ld,M:()=>cd,N:()=>xa,P:()=>zu,Q:()=>Ra,R:()=>nf,T:()=>ji,U:()=>Na,V:()=>Go,W:()=>Kh,X:()=>dr,Y:()=>jn,Z:()=>Ar,_:()=>$i,a:()=>et,a0:()=>jl,a1:()=>Hl,a2:()=>Se,a3:()=>Gl,a4:()=>zo,a5:()=>wi,a6:()=>ql,a7:()=>ug,a8:()=>gd,a9:()=>Cs,aA:()=>qn,aB:()=>Xu,aC:()=>an,aG:()=>xn,aJ:()=>Ma,aa:()=>Js,ab:()=>Wl,ae:()=>Ba,af:()=>Kl,ag:()=>Zl,aj:()=>fd,ak:()=>Jh,am:()=>Ql,an:()=>Vu,ao:()=>Vn,ap:()=>X,aq:()=>Ot,ar:()=>ot,as:()=>Me,at:()=>uf,au:()=>wd,av:()=>he,aw:()=>re,ax:()=>fe,ay:()=>Nt,az:()=>Ur,b:()=>_n,c:()=>Yu,d:()=>Lr,e:()=>lg,f:()=>b,g:()=>Oe,h:()=>V,i:()=>Ss,j:()=>Jt,k:()=>to,l:()=>nr,m:()=>K_,n:()=>mg,o:()=>ue,r:()=>Xa,s:()=>xs,u:()=>Ii,z:()=>xe});var p=O(5861),B=O(2090),P=O(9681),ae=O(655),se=O(1877),me=O(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new se.Yd("@firebase/auth");function Re(w,...g){ce.logLevel<=se.in.ERROR&&ce.error(`Auth (${P.SDK_VERSION}): ${w}`,...g)}function Me(w,...g){throw ze(w,...g)}function he(w,...g){return ze(w,...g)}function be(w,g,_){const C=Object.assign(Object.assign({},Fe()),{[g]:_});return new B.LL("auth","Firebase",C).create(g,{appName:w.name})}function Ee(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Me(w,"argument-error"),be(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return je.create(w,...g)}function re(w,g,..._){if(!w)throw ze(g,..._)}function Qe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Re(g),new Error(g)}function X(w,g){w||Qe(g)}const pe=new Map;function fe(w){X(w instanceof Function,"Expected a class definition");let g=pe.get(w);return g?(X(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,pe.set(w,g),g)}function de(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function wt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class it{constructor(g,_){this.shortDelay=g,this.longDelay=_,X(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Rn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ur(w,g){X(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class sn{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new it(3e4,6e4);function $t(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function en(w,g,_,C){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(w,g,_,C,R={}){return Ui(w,R,(0,p.Z)(function*(){let F={},te={};C&&("GET"===g?te=C:F={body:JSON.stringify(C)});const Ne=(0,B.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),rt=yield w._getAdditionalHeaders();return rt["Content-Type"]="application/json",w.languageCode&&(rt["X-Firebase-Locale"]=w.languageCode),sn.fetch()(yi(w,w.config.apiHost,_,Ne),Object.assign({method:g,headers:rt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Ui(w,g,_){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},yr),g);try{const R=new Vi(w),F=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const te=yield F.json();if("needConfirmation"in te)throw Un(w,"account-exists-with-different-credential",te);if(F.ok&&!("errorMessage"in te))return te;{const Ne=F.ok?te.errorMessage:te.error.message,[rt,yt]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw Un(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===rt)throw Un(w,"email-already-in-use",te);const Tt=C[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw be(w,Tt,yt);Me(w,Tt)}}catch(R){if(R instanceof B.ZR)throw R;Me(w,"network-request-failed")}})).apply(this,arguments)}function Dr(w,g,_,C){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(w,g,_,C,R={}){const F=yield en(w,g,_,C,R);return"mfaPendingCredential"in F&&Me(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function yi(w,g,_,C){const R=`${g}${_}?${C}`;return w.config.emulator?ur(w.config,R):`${w.config.apiScheme}://${R}`}class Vi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(he(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const R=he(w,g,C);return R.customData._tokenResponse=_,R}function pt(){return(pt=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Or(w,g){return An.apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wt(w,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ht(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Qt(){return(Qt=(0,p.Z)(function*(w,g=!1){const _=(0,B.m9)(w),C=yield _.getIdToken(g),R=St(C);re(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,te=null==F?void 0:F.sign_in_provider;return{claims:R,token:C,authTime:ht(lr(R.auth_time)),issuedAtTime:ht(lr(R.iat)),expirationTime:ht(lr(R.exp)),signInProvider:te||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function lr(w){return 1e3*Number(w)}function St(w){const[g,_,C]=w.split(".");if(void 0===g||void 0===_||void 0===C)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,B.tV)(_);return R?JSON.parse(R):(Re("Failed to decode base64 JWT payload"),null)}catch(R){return Re("Caught error parsing JWT payload as JSON",R),null}}function Je(w,g){return $s.apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof B.ZR&&vs(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function vs({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,p.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Gs{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yn(w){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),R=yield Je(w,Wt(_,{idToken:C}));re(null==R?void 0:R.users.length,_,"internal-error");const F=R.users[0];w._notifyReloadListener(F);const te=(null===(g=F.providerUserInfo)||void 0===g?void 0:g.length)?Ie(F.providerUserInfo):[],Ne=K(w.providerData,te),Tt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==Ne?void 0:Ne.length)),kn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Ne,metadata:new Gs(F.createdAt,F.lastLoginAt),isAnonymous:Tt};Object.assign(w,kn)})).apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(w){const g=(0,B.m9)(w);yield Yn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function K(w,g){return[...w.filter(C=>!g.some(R=>R.providerId===C.providerId)),...g]}function Ie(w){return w.map(g=>{var{providerId:_}=g,C=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Ke(){return(Ke=(0,p.Z)(function*(w,g){const _=yield Ui(w,{},(0,p.Z)(function*(){const C=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:F}=w.config,te=yi(w,R,"/v1/token",`key=${F}`),Ne=yield w._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(te,{method:"POST",headers:Ne,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(void 0!==g.idToken,"internal-error"),re(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function st(w){const g=St(w);return re(g,"internal-error"),re(void 0!==g.exp,"internal-error"),re(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,p.Z)(function*(){return re(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,p.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:te}=yield function ie(w,g){return Ke.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(R,F,Number(te))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:R,expirationTime:F}=_,te=new ft;return C&&(re("string"==typeof C,"internal-error",{appName:g}),te.refreshToken=C),R&&(re("string"==typeof R,"internal-error",{appName:g}),te.accessToken=R),F&&(re("number"==typeof F,"internal-error",{appName:g}),te.expirationTime=F),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ft,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function zt(w,g){re("string"==typeof w||void 0===w,"internal-error",{appName:g})}class on{constructor(g){var{uid:_,auth:C,stsTokenManager:R}=g,F=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Gs(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,p.Z)(function*(){const C=yield Je(_,_.stsTokenManager.getToken(_.auth,g));return re(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function bt(w){return Qt.apply(this,arguments)}(this,g)}reload(){return function j(w){return W.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new on(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,p.Z)(function*(){let R=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield Yn(C)),yield C.auth._persistUserIfCurrent(C),R&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,p.Z)(function*(){const _=yield g.getIdToken();return yield Je(g,function Ji(w,g){return pt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,R,F,te,Ne,rt,yt,Tt;const kn=null!==(C=_.displayName)&&void 0!==C?C:void 0,fi=null!==(R=_.email)&&void 0!==R?R:void 0,su=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,sl=null!==(te=_.photoURL)&&void 0!==te?te:void 0,Ad=null!==(Ne=_.tenantId)&&void 0!==Ne?Ne:void 0,pc=null!==(rt=_._redirectEventId)&&void 0!==rt?rt:void 0,gc=null!==(yt=_.createdAt)&&void 0!==yt?yt:void 0,mc=null!==(Tt=_.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:xd,emailVerified:ol,isAnonymous:Rd,providerData:ff,stsTokenManager:pf}=_;re(xd&&pf,g,"internal-error");const gf=ft.fromJSON(this.name,pf);re("string"==typeof xd,g,"internal-error"),zt(kn,g.name),zt(fi,g.name),re("boolean"==typeof ol,g,"internal-error"),re("boolean"==typeof Rd,g,"internal-error"),zt(su,g.name),zt(sl,g.name),zt(Ad,g.name),zt(pc,g.name),zt(gc,g.name),zt(mc,g.name);const al=new on({uid:xd,auth:g,email:fi,emailVerified:ol,displayName:kn,isAnonymous:Rd,photoURL:sl,phoneNumber:su,tenantId:Ad,stsTokenManager:gf,createdAt:gc,lastLoginAt:mc});return ff&&Array.isArray(ff)&&(al.providerData=ff.map(Q_=>Object.assign({},Q_))),pc&&(al._redirectEventId=pc),al}static _fromIdTokenResponse(g,_,C=!1){return(0,p.Z)(function*(){const R=new ft;R.updateFromServerResponse(_);const F=new on({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:C});return yield Yn(F),F})()}}const cr=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(_,C){var R=this;return(0,p.Z)(function*(){R.storage[_]=C})()}_get(_){var C=this;return(0,p.Z)(function*(){const R=C.storage[_];return void 0===R?null:R})()}_remove(_){var C=this;return(0,p.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function Nt(w,g,_){return`firebase:${w}:${g}:${_}`}class Jn{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:R,name:F}=this.auth;this.fullUserKey=Nt(this.userKey,R.apiKey,F),this.fullPersistenceKey=Nt("persistence",R.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?on._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,p.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,p.Z)(function*(){if(!_.length)return new Jn(fe(cr),g,C);const R=(yield Promise.all(_.map(function(){var yt=(0,p.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let F=R[0]||fe(cr);const te=Nt(C,g.config.apiKey,g.name);let Ne=null;for(const yt of _)try{const Tt=yield yt._get(te);if(Tt){const kn=on._fromJSON(g,Tt);yt!==F&&(Ne=kn),F=yt;break}}catch(Tt){}const rt=R.filter(yt=>yt._shouldAllowMigration);return F._shouldAllowMigration&&rt.length?(F=rt[0],Ne&&(yield F._set(te,Ne.toJSON())),yield Promise.all(_.map(function(){var yt=(0,p.Z)(function*(Tt){if(Tt!==F)try{yield Tt._remove(te)}catch(kn){}});return function(Tt){return yt.apply(this,arguments)}}())),new Jn(F,g,C)):new Jn(F,g,C)})()}}function oe(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(At(g))return"Blackberry";if(Bt(g))return"Webos";if(z(g))return"Safari";if((g.includes("chrome/")||Te(g))&&!g.includes("edge/"))return"Chrome";if(ot(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Z(w=(0,B.z$)()){return/firefox\//i.test(w)}function z(w=(0,B.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Te(w=(0,B.z$)()){return/crios\//i.test(w)}function qe(w=(0,B.z$)()){return/iemobile/i.test(w)}function ot(w=(0,B.z$)()){return/android/i.test(w)}function At(w=(0,B.z$)()){return/blackberry/i.test(w)}function Bt(w=(0,B.z$)()){return/webos/i.test(w)}function Ot(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)}function Vn(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Fr(w=(0,B.z$)()){return Ot(w)||ot(w)||Bt(w)||At(w)||/windows phone/i.test(w)||qe(w)}function vr(w,g=[]){let _;switch(w){case"Browser":_=oe((0,B.z$)());break;case"Worker":_=`${oe((0,B.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${C}`}class Ia{constructor(g,_){this.app=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=fe(_)),this._initializationPromise=this.queue((0,p.Z)(function*(){var R,F;if(!C._deleted&&(C.persistenceManager=yield Jn.create(C,g),!C._deleted)){if(null===(R=C._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(te){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(F=C.currentUser)||void 0===F?void 0:F.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,p.Z)(function*(){var C;let R=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const F=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,te=null==R?void 0:R._redirectEventId,Ne=yield _.tryRedirectSignIn(g);(!F||F===te)&&(null==Ne?void 0:Ne.user)&&(R=Ne.user)}return R?R._redirectEventId?(re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===R._redirectEventId?_.directlySetCurrentUser(R):_.reloadAndSetCurrentUserOrClear(R)):_.reloadAndSetCurrentUserOrClear(R):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,p.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,p.Z)(function*(){try{yield Yn(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){const C=g?(0,B.m9)(g):null;return C&&re(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return g&&re(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,p.Z)(function*(){yield _.assertedPersistence.setPersistence(fe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,p.Z)(function*(){const R=yield C.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,p.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&fe(g)||_._popupRedirectResolver;re(C,_,"argument-error"),_.redirectPersistenceManager=yield Jn.create(_,[fe(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,p.Z)(function*(){var C,R;return _._isInitialized&&(yield _.queue((0,p.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,p.Z)(function*(){if(g===_.currentUser)return _.queue((0,p.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,R){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return re(te,this,"internal-error"),te.then(()=>F(this.currentUser)),"function"==typeof _?g.addObserver(_,C,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,p.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){const _={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(_["X-Firebase-gmpid"]=g.app.options.appId),_})()}}function an(w){return(0,B.m9)(w)}class Ye{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lt(w,g,_){const C=an(w);re(C._canInitEmulator,C,"emulator-config-failed"),re(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),F=dn(g),{host:te,port:Ne}=function si(w){const g=dn(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(C);if(R){const F=R[1];return{host:F,port:es(C.substr(F.length+1))}}{const[F,te]=C.split(":");return{host:F,port:es(te)}}}(g);C.config.emulator={url:`${F}//${te}${null===Ne?"":`:${Ne}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:te,port:Ne,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Xn(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function dn(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function es(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Hr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(g){return Qe("not implemented")}_linkToIdToken(g,_){return Qe("not implemented")}_getReauthenticationResolver(g){return Qe("not implemented")}}function gn(w,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:resetPassword",$t(w,g))})).apply(this,arguments)}function Bn(w,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ba(w,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:update",$t(w,g))})).apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithPassword",$t(w,g))})).apply(this,arguments)}function er(w,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:sendOobCode",$t(w,g))})).apply(this,arguments)}function Ta(w,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(w,g){return er(w,g)})).apply(this,arguments)}function mn(w,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,p.Z)(function*(w,g){return er(w,g)})).apply(this,arguments)}function Da(w,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(w,g){return er(w,g)})).apply(this,arguments)}function ts(w,g){return Au.apply(this,arguments)}function Au(){return(Au=(0,p.Z)(function*(w,g){return er(w,g)})).apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithEmailLink",$t(w,g))})).apply(this,arguments)}function Fl(){return(Fl=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithEmailLink",$t(w,g))})).apply(this,arguments)}class xu extends Hr{constructor(g,_,C,R=null){super("password",C),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new xu(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new xu(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return function Du(w,g){return zs.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function sd(w,g){return ns.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,p.Z)(function*(){switch(C.signInMethod){case"password":return Bn(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function rs(w,g){return Fl.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ks(w,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithIdp",$t(w,g))})).apply(this,arguments)}class ws extends Hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ws(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R}=_,F=(0,ae._T)(_,["providerId","signInMethod"]);if(!C||!R)return null;const te=new ws(C,R);return te.idToken=F.idToken||void 0,te.accessToken=F.accessToken||void 0,te.secret=F.secret,te.nonce=F.nonce,te.pendingToken=F.pendingToken||null,te}_getIdTokenResponse(g){return Ks(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Ks(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ks(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function ng(w,g){return od.apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:sendVerificationCode",$t(w,g))})).apply(this,arguments)}function ad(){return(ad=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",$t(w,g))})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(w,g){const _=yield Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",$t(w,g));if(_.temporaryProof)throw Un(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ig={USER_NOT_FOUND:"user-not-found"};function ud(){return(ud=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithPhoneNumber",$t(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ig)})).apply(this,arguments)}class $o extends Hr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new $o({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new $o({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function rg(w,g){return ad.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Ll(w,g){return Zs.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function sg(w,g){return ud.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:F}=g;return C||_||R||F?new $o({verificationId:_,verificationCode:C,phoneNumber:R,temporaryProof:F}):null}}class Sa{constructor(g){var _,C,R,F,te,Ne;const rt=(0,B.zd)((0,B.pd)(g)),yt=null!==(_=rt.apiKey)&&void 0!==_?_:null,Tt=null!==(C=rt.oobCode)&&void 0!==C?C:null,kn=function og(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=rt.mode)&&void 0!==R?R:null);re(yt&&Tt&&kn,"argument-error"),this.apiKey=yt,this.operation=kn,this.code=Tt,this.continueUrl=null!==(F=rt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(te=rt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ne=rt.tenantId)&&void 0!==Ne?Ne:null}static parseLink(g){const _=function ag(w){const g=(0,B.zd)((0,B.pd)(w)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,C=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(C?(0,B.zd)((0,B.pd)(C)).link:null)||C||_||g||w}(g);try{return new Sa(_)}catch(C){return null}}}let ld=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return xu._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const R=Sa.parseLink(C);return re(R,"argument-error"),xu._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Bi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Aa extends Bi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ji extends Aa{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return re("providerId"in _&&"signInMethod"in _,"argument-error"),ws._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),ws._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ji.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ji.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:R,pendingToken:F,nonce:te,providerId:Ne}=g;if(!C&&!R&&!_&&!F||!Ne)return null;try{return new ji(Ne)._credential({idToken:_,accessToken:C,nonce:te,pendingToken:F})}catch(rt){return null}}}let cd=(()=>{class w extends Aa{constructor(){super("facebook.com")}static credential(_){return ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),xa=(()=>{class w extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:R}=_;if(!C&&!R)return null;try{return w.credential(C,R)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Ra=(()=>{class w extends Aa{constructor(){super("github.com")}static credential(_){return ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ma extends Hr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Ks(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Ks(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ks(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:R,pendingToken:F}=_;return C&&R&&F&&C===R?new Ma(C,F):null}static _create(g,_){return new Ma(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Na extends Bi{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Na.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Na.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ma.fromJSON(g);return re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Ma._create(C,_)}catch(R){return null}}}let Go=(()=>{class w extends Aa{constructor(){super("twitter.com")}static credential(_,C){return ws._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:R}=_;if(!C||!R)return null;try{return w.credential(C,R)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function vi(w,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signUp",$t(w,g))})).apply(this,arguments)}class In{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,R=!1){return(0,p.Z)(function*(){const F=yield on._fromIdTokenResponse(g,C,R),te=Pa(C);return new In({user:F,providerId:te,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const R=Pa(C);return new In({user:g,providerId:R,_tokenResponse:C,operationType:_})})()}}function Pa(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Kh(w){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(w){var g;const _=an(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new In({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield vi(_,{returnSecureToken:!0}),R=yield In._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class ka extends B.ZR{constructor(g,_,C,R){var F;super(_.code,_.message),this.operationType=C,this.user=R,Object.setPrototypeOf(this,ka.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,R){return new ka(g,_,C,R)}}function hd(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?ka._fromErrorAndOperation(w,F,g,C):F})}function Nu(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function fd(w,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(w,g){const _=(0,B.m9)(w);yield qo(!0,_,g);const{providerUserInfo:C}=yield Or(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Nu(C||[]);return _.providerData=_.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Vl(w,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(w,g,_=!1){const C=yield Je(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return In._forOperation(w,"link",C)})).apply(this,arguments)}function qo(w,g,_){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(w,g,_){yield Yn(g);const R=!1===w?"provider-already-linked":"no-such-provider";re(Nu(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function fn(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(w,g,_=!1){const{auth:C}=w,R="reauthenticate";try{const F=yield Je(w,hd(C,R,g,w),_);re(F.idToken,C,"internal-error");const te=St(F.idToken);re(te,C,"internal-error");const{sub:Ne}=te;return re(w.uid===Ne,C,"user-mismatch"),In._forOperation(w,R,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Me(C,"user-mismatch"),F}})).apply(this,arguments)}function Pu(w,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(w,g,_=!1){const C="signIn",R=yield hd(w,C,g),F=yield In._fromIdTokenResponse(w,C,R);return _||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function dr(w,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,p.Z)(function*(w,g){return Pu(an(w),g)})).apply(this,arguments)}function jn(w,g){return is.apply(this,arguments)}function is(){return(is=(0,p.Z)(function*(w,g){const _=(0,B.m9)(w);return yield qo(!1,_,g.providerId),Vl(_,g)})).apply(this,arguments)}function Ar(w,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(w,g){return fn((0,B.m9)(w),g)})).apply(this,arguments)}function Qs(w,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(w,g){return Dr(w,"POST","/v1/accounts:signInWithCustomToken",$t(w,g))})).apply(this,arguments)}function $i(w,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(w,g){const _=an(w),C=yield Qs(_,{token:g,returnSecureToken:!0}),R=yield In._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Es{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?mt._fromServerResponse(g,_):Me(g,"internal-error")}}class mt extends Es{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new mt(_)}}function Wo(w,g,_){var C;re((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(re(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(re(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function pd(w,g,_){return ku.apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w),R={requestType:"PASSWORD_RESET",email:g};_&&Wo(C,R,_),yield mn(C,R)})).apply(this,arguments)}function jl(w,g,_){return La.apply(this,arguments)}function La(){return(La=(0,p.Z)(function*(w,g,_){yield gn((0,B.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Hl(w,g){return $l.apply(this,arguments)}function $l(){return($l=(0,p.Z)(function*(w,g){yield ba((0,B.m9)(w),{oobCode:g})})).apply(this,arguments)}function Se(w,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(w,g){const _=(0,B.m9)(w),C=yield gn(_,{oobCode:g}),R=C.requestType;switch(re(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(C.mfaInfo,_,"internal-error");default:re(C.email,_,"internal-error")}let F=null;return C.mfaInfo&&(F=Es._fromServerResponse(an(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function Gl(w,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(w,g){const{data:_}=yield Se((0,B.m9)(w),g);return _.email})).apply(this,arguments)}function zo(w,g,_){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(w,g,_){const C=an(w),R=yield vi(C,{returnSecureToken:!0,email:g,password:_}),F=yield In._fromIdTokenResponse(C,"signIn",R);return yield C._updateCurrentUser(F.user),F})).apply(this,arguments)}function wi(w,g,_){return dr((0,B.m9)(w),ld.credential(g,_))}function ql(w,g,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w),R={requestType:"EMAIL_SIGNIN",email:g};re(_.handleCodeInApp,C,"argument-error"),_&&Wo(C,R,_),yield Da(C,R)})).apply(this,arguments)}function ug(w,g){const _=Sa.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function gd(w,g,_){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w),R=ld.credentialWithLink(g,_||de());return re(R._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),dr(C,R)})).apply(this,arguments)}function Ou(w,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:createAuthUri",$t(w,g))})).apply(this,arguments)}function Cs(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(w,g){const C={identifier:g,continueUri:wt()?de():"http://localhost"},{signinMethods:R}=yield Ou((0,B.m9)(w),C);return R||[]})).apply(this,arguments)}function Js(w,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,p.Z)(function*(w,g){const _=(0,B.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Wo(_.auth,R,g);const{email:F}=yield Ta(_.auth,R);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function Wl(w,g,_){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Wo(C.auth,F,_);const{email:te}=yield ts(C.auth,F);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function zl(w,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(w,g){return en(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ba(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,B.m9)(w),F={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield Je(C,zl(C.auth,F));C.displayName=te.displayName||null,C.photoURL=te.photoUrl||null;const Ne=C.providerData.find(({providerId:rt})=>"password"===rt);Ne&&(Ne.displayName=C.displayName,Ne.photoURL=C.photoURL),yield C._updateTokensIfNecessary(te)})).apply(this,arguments)}function Kl(w,g){return Zh((0,B.m9)(w),g,null)}function Zl(w,g){return Zh((0,B.m9)(w),null,g)}function Zh(w,g,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(w,g,_){const{auth:C}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const te=yield Je(w,Bn(C,F));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Xs{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Yl extends Xs{constructor(g,_,C,R){super(g,_,C),this.username=R}}class Yh extends Xs{constructor(g,_){super(g,"facebook.com",_)}}class Qh extends Yl{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ko extends Xs{constructor(g,_){super(g,"google.com",_)}}class os extends Yl{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Jh(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function $a(w){var g,_;if(!w)return null;const{providerId:C}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&(null==w?void 0:w.idToken)){const te=null===(_=null===(g=St(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Xs(F,"anonymous"!==te&&"custom"!==te?te:null)}if(!C)return null;switch(C){case"facebook.com":return new Yh(F,R);case"github.com":return new Qh(F,R);case"google.com":return new Ko(F,R);case"twitter.com":return new os(F,R,w.screenName||null);case"custom":case"anonymous":return new Xs(F,null);default:return new Xs(F,C,R)}}(_)}class Io{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Io("enroll",g)}static _fromMfaPendingCredential(g){return new Io("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Io._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return Io._fromIdtoken(g.multiFactorSession.idToken)}return null}}class qa{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=an(g),R=_.customData._serverResponse,F=(R.mfaInfo||[]).map(Ne=>Es._fromServerResponse(C,Ne));re(R.mfaPendingCredential,C,"internal-error");const te=Io._fromMfaPendingCredential(R.mfaPendingCredential);return new qa(te,F,function(){var Ne=(0,p.Z)(function*(rt){const yt=yield rt._process(C,te);delete R.mfaInfo,delete R.mfaPendingCredential;const Tt=Object.assign(Object.assign({},R),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(_.operationType){case"signIn":const kn=yield In._fromIdTokenResponse(C,_.operationType,Tt);return yield C._updateCurrentUser(kn.user),kn;case"reauthenticate":return re(_.user,C,"internal-error"),In._forOperation(_.user,_.operationType,Tt);default:Me(C,"internal-error")}});return function(rt){return Ne.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,p.Z)(function*(){return _.signInResolver(g)})()}}function Ql(w,g){var _;const C=(0,B.m9)(w),R=g;return re(g.customData.operationType,C,"argument-error"),re(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),qa._fromError(C,R)}function Jl(w,g){return en(w,"POST","/v2/accounts/mfaEnrollment:start",$t(w,g))}class Xl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Es._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Xl(g)}getSession(){var g=this;return(0,p.Z)(function*(){return Io._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,p.Z)(function*(){const R=g,F=yield C.getSession(),te=yield Je(C.user,R._process(C.user.auth,F,_));return yield C.user._updateTokensIfNecessary(te),C.user.reload()})()}unenroll(g){var _=this;return(0,p.Z)(function*(){const C="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),F=yield Je(_.user,function Er(w,g){return en(w,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(w,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==C),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const bs=new WeakMap;function Vu(w){const g=(0,B.m9)(w);return bs.has(g)||bs.set(g,Xl._fromUser(g)),bs.get(g)}const ec="__sak";class tc{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const _n=(()=>{class w extends tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bu(){const w=(0,B.z$)();return z(w)||Ot(w)}()&&function Xi(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Fr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const R=this.storage.getItem(C),F=this.localCache[C];R!==F&&_(C,F,R)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Ne,rt,yt)=>{this.notifyListeners(Ne,yt)});const R=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(R);if(_.newValue!==Ne)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!C)return}const F=()=>{const Ne=this.storage.getItem(R);!C&&this.localCache[R]===Ne||this.notifyListeners(R,Ne)},te=this.storage.getItem(R);!function Ft(){return(0,B.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const F of Array.from(R))F(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var R=()=>super._set,F=this;return(0,p.Z)(function*(){yield R().call(F,_,C),F.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,R=this;return(0,p.Z)(function*(){const F=yield C().call(R,_);return R.localCache[_]=JSON.stringify(F),F})()}_remove(_){var C=()=>super._remove,R=this;return(0,p.Z)(function*(){yield C().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),et=(()=>{class w extends tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let ui=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(F=>F.isListeningto(_));if(C)return C;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,p.Z)(function*(){const R=_,{eventId:F,eventType:te,data:Ne}=R.data,rt=C.handlersMap[te];if(!(null==rt?void 0:rt.size))return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:te});const yt=Array.from(rt).map(function(){var kn=(0,p.Z)(function*(fi){return fi(R.origin,Ne)});return function(fi){return kn.apply(this,arguments)}}()),Tt=yield function Ts(w){return Promise.all(w.map(function(){var g=(0,p.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(yt);R.ports[0].postMessage({status:"done",eventId:F,eventType:te,response:Tt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function xn(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class nc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var R=this;return(0,p.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let te,Ne;return new Promise((rt,yt)=>{const Tt=xn("",20);F.port1.start();const kn=setTimeout(()=>{yt(new Error("unsupported_event"))},C);Ne={messageChannel:F,onMessage(fi){const su=fi;if(su.data.eventId===Tt)switch(su.data.status){case"ack":clearTimeout(kn),te=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),rt(su.data.response);break;default:clearTimeout(kn),clearTimeout(te),yt(new Error("invalid_response"))}}},R.handlers.add(Ne),F.port1.addEventListener("message",Ne.onMessage),R.target.postMessage({eventType:g,eventId:Tt,data:_},[F.port2])}).finally(()=>{Ne&&R.removeMessageHandler(Ne)})})()}}function $n(){return window}function za(){return void 0!==$n().WorkerGlobalScope&&"function"==typeof $n().importScripts}function To(){return(To=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const rc="firebaseLocalStorageDb",Ka="firebaseLocalStorage",ic="fbase_key";class un{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Yo(w,g){return w.transaction([Ka],g?"readwrite":"readonly").objectStore(Ka)}function Qo(){const w=indexedDB.open(rc,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(Ka,{keyPath:ic})}catch(R){_(R)}}),w.addEventListener("success",(0,p.Z)(function*(){const C=w.result;C.objectStoreNames.contains(Ka)?g(C):(C.close(),yield function Za(){const w=indexedDB.deleteDatabase(rc);return new un(w).toPromise()}(),g(yield Qo()))}))})}function $r(w,g,_){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,p.Z)(function*(w,g,_){const C=Yo(w,!0).put({[ic]:g,value:_});return new un(C).toPromise()})).apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(w,g){const _=Yo(w,!1).get(g),C=yield new un(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function $u(w,g){const _=Yo(w,!0).delete(g);return new un(_).toPromise()}const Ss=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,p.Z)(function*(){return _.db||(_.db=yield Qo()),_.db})()}_withRetries(_){var C=this;return(0,p.Z)(function*(){let R=0;for(;;)try{const F=yield C._openDb();return yield _(F)}catch(F){if(R++>3)throw F;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,p.Z)(function*(){return za()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,p.Z)(function*(){_.receiver=ui._getInstance(function _t(){return za()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,p.Z)(function*(R,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(R,F){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,p.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,p.Z)(function*(){var C,R;if(_.activeServiceWorker=yield function bo(){return To.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new nc(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(C=F[0])||void 0===C?void 0:C.fulfilled)&&(null===(R=F[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,p.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function as(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Qo();return yield $r(_,ec,"1"),yield $u(_,ec),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,p.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var R=this;return(0,p.Z)(function*(){return R._withPendingWrite((0,p.Z)(function*(){return yield R._withRetries(F=>$r(F,_,C)),R.localCache[_]=C,R.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,p.Z)(function*(){const R=yield C._withRetries(F=>function Jo(w,g){return us.apply(this,arguments)}(F,_));return C.localCache[_]=R,R})()}_remove(_){var C=this;return(0,p.Z)(function*(){return C._withPendingWrite((0,p.Z)(function*(){return yield C._withRetries(R=>$u(R,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,p.Z)(function*(){const C=yield _._withRetries(te=>{const Ne=Yo(te,!1).getAll();return new un(Ne).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const R=[],F=new Set;for(const{fbase_key:te,value:Ne}of C)F.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(Ne)&&(_.notifyListeners(te,Ne),R.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!F.has(te)&&(_.notifyListeners(te,null),R.push(te));return R})()}notifyListeners(_,C){this.localCache[_]=C;const R=this.listeners[_];if(R)for(const F of Array.from(R))F(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Xo(w,g){return en(w,"POST","/v2/accounts/mfaSignIn:start",$t(w,g))}function ea(){return(ea=(0,p.Z)(function*(w){return(yield en(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Do(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=R=>{const F=he("internal-error");F.customData=R,_(F)},C.type="text/javascript",C.charset="UTF-8",function Dn(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function So(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Gn=1e12;class li{constructor(g){this.auth=g,this.counter=Gn,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new tr(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Gn;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Gn))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,p.Z)(function*(){var C;return null===(C=_._widgets.get(g||Gn))||void 0===C||C.execute(),""})()}}class tr{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;re(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ac(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ci=So("rcb"),_d=new it(3e4,6e4);class Nn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$n().grecaptcha}load(g,_=""){return re(function tf(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($n().grecaptcha):new Promise((C,R)=>{const F=$n().setTimeout(()=>{R(he(g,"network-request-failed"))},_d.get());$n()[ci]=()=>{$n().clearTimeout(F),delete $n()[ci];const Ne=$n().grecaptcha;if(!Ne)return void R(he(g,"internal-error"));const rt=Ne.render;Ne.render=(yt,Tt)=>{const kn=rt(yt,Tt);return this.counter++,kn},this.hostLanguage=_,C(Ne)},Do(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:ci,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),R(he(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!$n().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class G_{load(g){return(0,p.Z)(function*(){return new li(g)})()}clearedOneInstance(){}}const ta="recaptcha",Ci={theme:"light",type:"image"};class nf{constructor(g,_=Object.assign({},Ci),C){this.parameters=_,this.type=ta,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(C),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;re(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new G_:new Nn,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(F=>{const te=Ne=>{!Ne||(g.tokenChangeListeners.delete(te),F(Ne))};g.tokenChangeListeners.add(te),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=$n()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){re(wt()&&!za(),g.auth,"internal-error"),yield function As(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function oc(w){return ea.apply(this,arguments)}(g.auth);re(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qu{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=$o._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function xs(w,g,_){return uc.apply(this,arguments)}function uc(){return(uc=(0,p.Z)(function*(w,g,_){const C=an(w),R=yield Wu(C,g,(0,B.m9)(_));return new qu(R,F=>dr(C,F))})).apply(this,arguments)}function nr(w,g,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w);yield qo(!1,C,"phone");const R=yield Wu(C.auth,g,(0,B.m9)(_));return new qu(R,F=>jn(C,F))})).apply(this,arguments)}function Xa(w,g,_){return rf.apply(this,arguments)}function rf(){return(rf=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w),R=yield Wu(C.auth,g,(0,B.m9)(_));return new qu(R,F=>Ar(C,F))})).apply(this,arguments)}function Wu(w,g,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(w,g,_){var C;const R=yield _.verify();try{let F;if(re("string"==typeof R,w,"argument-error"),re(_.type===ta,w,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const te=F.session;if("phoneNumber"in F)return re("enroll"===te.type,w,"internal-error"),(yield Jl(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{re("signin"===te.type,w,"internal-error");const Ne=(null===(C=F.multiFactorHint)||void 0===C?void 0:C.uid)||F.multiFactorUid;return re(Ne,w,"missing-multi-factor-info"),(yield Xo(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield ng(w,{phoneNumber:F.phoneNumber,recaptchaToken:R});return te}}finally{_._reset()}})).apply(this,arguments)}function Ii(w,g){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(w,g){yield Vl((0,B.m9)(w),g)})).apply(this,arguments)}let zu=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=an(_)}verifyPhoneNumber(_,C){return Wu(this.auth,_,(0,B.m9)(C))}static credential(_,C){return $o._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:R}=_;return C&&R?$o._fromTokenResponse(C,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function di(w,g){return g?fe(g):(re(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class na extends Hr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ks(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Ks(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Ks(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function lc(w){return Pu(w.auth,new na(w),w.bypassAuthState)}function Ku(w){const{auth:g,user:_}=w;return re(_,g,"internal-error"),fn(_,new na(w),w.bypassAuthState)}function Pt(w){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(w){const{auth:g,user:_}=w;return re(_,g,"internal-error"),Vl(_,new na(w),w.bypassAuthState)})).apply(this,arguments)}class ls{constructor(g,_,C,R,F=!1){this.auth=g,this.resolver=C,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,p.Z)(function*(C,R){g.pendingPromise={resolve:C,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(C,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,p.Z)(function*(){const{urlResponse:C,sessionId:R,postBody:F,tenantId:te,error:Ne,type:rt}=g;if(Ne)return void _.reject(Ne);const yt={auth:_.auth,requestUri:C,sessionId:R,tenantId:te||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rt)(yt))}catch(Tt){_.reject(Tt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return lc;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return Ku;default:Me(this.auth,"internal-error")}}resolve(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hi=new it(2e3,1e4);function Yu(w,g,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(w,g,_){const C=an(w);Ee(w,g,Bi);const R=di(C,_);return new Ju(C,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function lg(w,g,_){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w);Ee(C.auth,g,Bi);const R=di(C.auth,_);return new Ju(C.auth,"reauthViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}function Lr(w,g,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w);Ee(C.auth,g,Bi);const R=di(C.auth,_);return new Ju(C.auth,"linkViaPopup",g,R,C).executeNotNull()})).apply(this,arguments)}let Ju=(()=>{class w extends ls{constructor(_,C,R,F,te){super(_,C,F,te),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,p.Z)(function*(){const C=yield _.execute();return re(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,p.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const C=xn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(he(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,R;this.pollId=(null===(R=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,hi.get())};_()}}return w.currentPopupAction=null,w})();const Rs=new Map;class hr extends ls{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,p.Z)(function*(){let C=Rs.get(_.auth._key());if(!C){try{const F=(yield function fr(w,g){return ra.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(F)}catch(R){C=()=>Promise.reject(R)}Rs.set(_.auth._key(),C)}return _.bypassAuthState||Rs.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const R=yield C.auth._redirectUserForId(g.eventId);if(R)return C.user=R,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ra(){return(ra=(0,p.Z)(function*(w,g){const _=vd(g),C=nu(w);if(!(yield C._isAvailable()))return!1;const R="true"===(yield C._get(_));return yield C._remove(_),R})).apply(this,arguments)}function sf(w,g){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(w,g){return nu(w)._set(vd(g),"true")})).apply(this,arguments)}function Xu(){Rs.clear()}function nu(w){return fe(w._redirectPersistence)}function vd(w){return Nt("pendingRedirect",w.config.apiKey,w.name)}function b(w,g,_){return function D(w,g,_){return M.apply(this,arguments)}(w,g,_)}function M(){return(M=(0,p.Z)(function*(w,g,_){const C=an(w);Ee(w,g,Bi);const R=di(C,_);return yield sf(R,C),R._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function V(w,g,_){return function Y(w,g,_){return J.apply(this,arguments)}(w,g,_)}function J(){return(J=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w);Ee(C.auth,g,Bi);const R=di(C.auth,_);yield sf(R,C.auth);const F=yield Pn(C);return R._openRedirect(C.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function Oe(w,g,_){return function $e(w,g,_){return Ze.apply(this,arguments)}(w,g,_)}function Ze(){return(Ze=(0,p.Z)(function*(w,g,_){const C=(0,B.m9)(w);Ee(C.auth,g,Bi);const R=di(C.auth,_);yield qo(!1,C,g.providerId),yield sf(R,C.auth);const F=yield Pn(C);return R._openRedirect(C.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function Jt(w,g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(w,g){return yield an(w)._initializationPromise,qn(w,g,!1)})).apply(this,arguments)}function qn(w,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(w,g,_=!1){const C=an(w),R=di(C,g),te=yield new hr(C,R,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield C._persistUserIfCurrent(te.user),yield C._setRedirectUser(null,g)),te})).apply(this,arguments)}function Pn(w){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(w){const g=xn(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ur{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ru(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!Wr(g)){const R=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(he(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ns(g))}saveEventToCache(g){this.cachedEventUids.add(Ns(g)),this.lastProcessedEventTime=Date.now()}}function Ns(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Wr({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function wd(w){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(w,g={}){return en(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Ed=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cg=/^https?/;function tl(){return(tl=(0,p.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield wd(w);for(const _ of g)try{if(nl(_))return}catch(C){}Me(w,"unauthorized-domain")})).apply(this,arguments)}function nl(w){const g=de(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===C}if(!cg.test(_))return!1;if(Ed.test(w))return C===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(C)}const cc=new it(3e4,6e4);function dg(){const w=$n().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let dc=null;function hg(w){return dc=dc||function kE(w){return new Promise((g,_)=>{var C,R,F;function te(){dg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{dg(),_(he(w,"network-request-failed"))},timeout:cc.get()})}if(null===(R=null===(C=$n().gapi)||void 0===C?void 0:C.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(F=$n().gapi)||void 0===F?void 0:F.load)){const Ne=So("iframefcb");return $n()[Ne]=()=>{gapi.load?te():_(he(w,"network-request-failed"))},Do(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(rt=>_(rt))}te()}}).catch(g=>{throw dc=null,g})}(w),dc}const fg=new it(5e3,15e3),rl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cd(w){const g=w.config;re(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?ur(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:w.name,v:P.SDK_VERSION},R=hc.get(w.config.apiHost);R&&(C.eid=R);const F=w._getFrameworks();return F.length&&(C.fw=F.join(",")),`${_}?${(0,B.xO)(C).slice(1)}`}function ia(){return ia=(0,p.Z)(function*(w){const g=yield hg(w),_=$n().gapi;return re(_,w,"internal-error"),g.open({where:document.body,url:Cd(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rl,dontclear:!0},C=>new Promise(function(){var R=(0,p.Z)(function*(F,te){yield C.restyle({setHideOnLeave:!1});const Ne=he(w,"network-request-failed"),rt=$n().setTimeout(()=>{te(Ne)},fg.get());function yt(){$n().clearTimeout(rt),F(C)}C.ping(yt).then(yt,()=>{te(Ne)})});return function(F,te){return R.apply(this,arguments)}}()))}),ia.apply(this,arguments)}const pg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Td{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function uf(w,g,_,C,R,F){re(w.config.authDomain,w,"auth-domain-config-required"),re(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:P.SDK_VERSION,eventId:R};if(g instanceof Bi){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[rt,yt]of Object.entries(F||{}))te[rt]=yt}if(g instanceof Aa){const rt=g.getScopes().filter(yt=>""!==yt);rt.length>0&&(te.scopes=rt.join(","))}w.tenantId&&(te.tid=w.tenantId);const Ne=te;for(const rt of Object.keys(Ne))void 0===Ne[rt]&&delete Ne[rt];return`${function z_({config:w}){return w.emulator?ur(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,B.xO)(Ne).slice(1)}`}const lf="webStorageSupport",to=class Ps{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=et,this._completeRedirectFn=qn}_openPopup(g,_,C,R){var F=this;return(0,p.Z)(function*(){var te;X(null===(te=F.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ne=uf(g,_,C,de(),R);return function Dd(w,g,_,C=500,R=600){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),te=Math.max((window.screen.availWidth-C)/2,0).toString();let Ne="";const rt=Object.assign(Object.assign({},pg),{width:C.toString(),height:R.toString(),top:F,left:te}),yt=(0,B.z$)().toLowerCase();_&&(Ne=Te(yt)?"_blank":_),Z(yt)&&(g=g||"http://localhost",rt.scrollbars="yes");const Tt=Object.entries(rt).reduce((fi,[su,sl])=>`${fi}${su}=${sl},`,"");if(function ii(w=(0,B.z$)()){var g;return Ot(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(yt)&&"_self"!==Ne)return function Sd(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",Ne),new Td(null);const kn=window.open(g||"",Ne,Tt);re(kn,w,"popup-blocked");try{kn.focus()}catch(fi){}return new Td(kn)}(g,Ne,xn())})()}_openRedirect(g,_,C,R){var F=this;return(0,p.Z)(function*(){return yield F._originValidation(g),function Zo(w){$n().location.href=w}(uf(g,_,C,de(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:F}=this.eventManagers[_];return R?Promise.resolve(R):(X(F,"If manager is not set, promise should be"),F)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,p.Z)(function*(){const C=yield function il(w){return ia.apply(this,arguments)}(g),R=new Ur(g);return C.register("authEvent",F=>(re(null==F?void 0:F.authEvent,g,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=C,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(lf,{type:lf},R=>{var F;const te=null===(F=null==R?void 0:R[0])||void 0===F?void 0:F[lf];void 0!==te&&_(!!te),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function q_(w){return tl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Fr()||z()||Ot()}};class df extends class cf{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new df(g)}_finalizeEnroll(g,_,C){return function Uu(w,g){return en(w,"POST","/v2/accounts/mfaEnrollment:finalize",$t(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Rr(w,g){return en(w,"POST","/v2/accounts/mfaSignIn:finalize",$t(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let K_=(()=>{class w{constructor(){}static assertion(_){return df._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Z_="@firebase/auth";class FE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,p.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var R;g((null===(R=C)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mg(w=(0,P.getApp)()){const g=(0,P._getProvider)(w,"auth");return g.isInitialized()?g.getImmediate():function ye(w,g){const _=(0,P._getProvider)(w,"auth");if(_.isInitialized()){const R=_.getImmediate(),F=_.getOptions();if((0,B.vZ)(F,null!=g?g:{}))return R;Me(R,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:to,persistence:[Ss,_n,et]})}!function Y_(w){(0,P._registerComponent)(new me.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),{apiKey:R,authDomain:F}=C.options;return(te=>{re(R&&!R.includes(":"),"invalid-api-key",{appName:te.name}),re(!(null==F?void 0:F.includes(":")),"argument-error",{appName:te.name});const Ne={apiKey:R,authDomain:F,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(w)},rt=new Ia(te,Ne);return function Le(w,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(fe);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(rt,_),rt})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new me.wA("auth-internal",g=>{const _=an(g.getProvider("auth").getImmediate());return new FE(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Z_,"0.19.9",function gg(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(Z_,"0.19.9","esm2017")}("Browser")},2090:(at,De,O)=>{"use strict";O.d(De,{BH:()=>He,LL:()=>de,ZR:()=>Le,gQ:()=>Un,zI:()=>pe,hu:()=>B,g5:()=>P,US:()=>me,tV:()=>_e,h$:()=>le,$s:()=>jt,r3:()=>$t,Sg:()=>xe,ne:()=>Ji,p$:()=>G,vZ:()=>Zn,ZB:()=>H,gK:()=>ht,pd:()=>Vi,m9:()=>En,z$:()=>Fe,GJ:()=>Yt,jU:()=>ce,ru:()=>Re,d:()=>he,xb:()=>Cn,w1:()=>be,hl:()=>Qe,uI:()=>je,UG:()=>Q,Yr:()=>ze,b$:()=>Me,G6:()=>re,Mn:()=>Ee,w9:()=>yr,cI:()=>Rn,UI:()=>Ui,xO:()=>Qi,zd:()=>yi,DV:()=>en,ug:()=>St,dS:()=>lr,Pz:()=>ut,Dv:()=>Sr,Wj:()=>bt,lb:()=>Qt,eu:()=>X});const B=function(j,W){if(!j)throw P(W)},P=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ae=function(j){const W=[];let K=0;for(let Ie=0;Ie<j.length;Ie++){let ie=j.charCodeAt(Ie);ie<128?W[K++]=ie:ie<2048?(W[K++]=ie>>6|192,W[K++]=63&ie|128):55296==(64512&ie)&&Ie+1<j.length&&56320==(64512&j.charCodeAt(Ie+1))?(ie=65536+((1023&ie)<<10)+(1023&j.charCodeAt(++Ie)),W[K++]=ie>>18|240,W[K++]=ie>>12&63|128,W[K++]=ie>>6&63|128,W[K++]=63&ie|128):(W[K++]=ie>>12|224,W[K++]=ie>>6&63|128,W[K++]=63&ie|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,W){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ie=0;ie<j.length;ie+=3){const Ke=j[ie],ft=ie+1<j.length,zt=ft?j[ie+1]:0,on=ie+2<j.length,Qn=on?j[ie+2]:0;let Jn=(15&zt)<<2|Qn>>6,oe=63&Qn;on||(oe=64,ft||(Jn=64)),Ie.push(K[Ke>>2],K[(3&Ke)<<4|zt>>4],K[Jn],K[oe])}return Ie.join("")},encodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(j):this.encodeByteArray(ae(j),W)},decodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(j):function(j){const W=[];let K=0,Ie=0;for(;K<j.length;){const ie=j[K++];if(ie<128)W[Ie++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ke=j[K++];W[Ie++]=String.fromCharCode((31&ie)<<6|63&Ke)}else if(ie>239&&ie<365){const on=((7&ie)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;W[Ie++]=String.fromCharCode(55296+(on>>10)),W[Ie++]=String.fromCharCode(56320+(1023&on))}else{const Ke=j[K++],ft=j[K++];W[Ie++]=String.fromCharCode((15&ie)<<12|(63&Ke)<<6|63&ft)}}return W.join("")}(this.decodeStringToByteArray(j,W))},decodeStringToByteArray(j,W){this.init_();const K=W?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ie=0;ie<j.length;){const Ke=K[j.charAt(ie++)],zt=ie<j.length?K[j.charAt(ie)]:0;++ie;const Qn=ie<j.length?K[j.charAt(ie)]:64;++ie;const Nt=ie<j.length?K[j.charAt(ie)]:64;if(++ie,null==Ke||null==zt||null==Qn||null==Nt)throw Error();Ie.push(Ke<<2|zt>>4),64!==Qn&&(Ie.push(zt<<4&240|Qn>>2),64!==Nt&&Ie.push(Qn<<6&192|Nt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){const W=ae(j);return me.encodeByteArray(W,!0)},ue=function(j){return le(j).replace(/\./g,"")},_e=function(j){try{return me.decodeString(j,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function G(j){return H(void 0,j)}function H(j,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return W}for(const K in W)!W.hasOwnProperty(K)||!ne(K)||(j[K]=H(j[K],W[K]));return j}function ne(j){return"__proto__"!==j}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,K)=>{this.resolve=W,this.reject=K})}wrapCallback(W){return(K,Ie)=>{K?this.reject(K):this.resolve(Ie),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(K):W(K,Ie))}}}function xe(j,W){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=W||"demo-project",ie=j.iat||0,Ke=j.sub||j.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ie,exp:ie+3600,auth_time:ie,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ft)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function ce(){return"object"==typeof self&&self.self===self}function Re(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Fe().indexOf("Electron/")>=0}function be(){const j=Fe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ee(){return Fe().indexOf("MSAppHost/")>=0}function ze(){return!1}function re(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){return"object"==typeof indexedDB}function X(){return new Promise((j,W)=>{try{let K=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(Ie);ie.onsuccess=()=>{ie.result.close(),K||self.indexedDB.deleteDatabase(Ie),j(!0)},ie.onupgradeneeded=()=>{K=!1},ie.onerror=()=>{var Ke;W((null===(Ke=ie.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(K){W(K)}})}function pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Le extends Error{constructor(W,K,Ie){super(K),this.code=W,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(W,K,Ie){this.service=W,this.serviceName=K,this.errors=Ie}create(W,...K){const Ie=K[0]||{},ie=`${this.service}/${W}`,Ke=this.errors[W],ft=Ke?function wt(j,W){return j.replace(Zt,(K,Ie)=>{const ie=W[Ie];return null!=ie?String(ie):`<${Ie}?>`})}(Ke,Ie):"Error";return new Le(ie,`${this.serviceName}: ${ft} (${ie}).`,Ie)}}const Zt=/\{\$([^}]+)}/g;function Rn(j){return JSON.parse(j)}function ut(j){return JSON.stringify(j)}const it=function(j){let W={},K={},Ie={},ie="";try{const Ke=j.split(".");W=Rn(_e(Ke[0])||""),K=Rn(_e(Ke[1])||""),ie=Ke[2],Ie=K.d||{},delete K.d}catch(Ke){}return{header:W,claims:K,data:Ie,signature:ie}},yr=function(j){const K=it(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Yt=function(j){const W=it(j).claims;return"object"==typeof W&&!0===W.admin};function $t(j,W){return Object.prototype.hasOwnProperty.call(j,W)}function en(j,W){if(Object.prototype.hasOwnProperty.call(j,W))return j[W]}function Cn(j){for(const W in j)if(Object.prototype.hasOwnProperty.call(j,W))return!1;return!0}function Ui(j,W,K){const Ie={};for(const ie in j)Object.prototype.hasOwnProperty.call(j,ie)&&(Ie[ie]=W.call(K,j[ie],ie,j));return Ie}function Zn(j,W){if(j===W)return!0;const K=Object.keys(j),Ie=Object.keys(W);for(const ie of K){if(!Ie.includes(ie))return!1;const Ke=j[ie],ft=W[ie];if(Dr(Ke)&&Dr(ft)){if(!Zn(Ke,ft))return!1}else if(Ke!==ft)return!1}for(const ie of Ie)if(!K.includes(ie))return!1;return!0}function Dr(j){return null!==j&&"object"==typeof j}function Qi(j){const W=[];for(const[K,Ie]of Object.entries(j))Array.isArray(Ie)?Ie.forEach(ie=>{W.push(encodeURIComponent(K)+"="+encodeURIComponent(ie))}):W.push(encodeURIComponent(K)+"="+encodeURIComponent(Ie));return W.length?"&"+W.join("&"):""}function yi(j){const W={};return j.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ie,Ke]=Ie.split("=");W[decodeURIComponent(ie)]=decodeURIComponent(Ke)}}),W}function Vi(j){const W=j.indexOf("?");if(!W)return"";const K=j.indexOf("#",W);return j.substring(W,K>0?K:void 0)}class Un{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,K){K||(K=0);const Ie=this.W_;if("string"==typeof W)for(let Nt=0;Nt<16;Nt++)Ie[Nt]=W.charCodeAt(K)<<24|W.charCodeAt(K+1)<<16|W.charCodeAt(K+2)<<8|W.charCodeAt(K+3),K+=4;else for(let Nt=0;Nt<16;Nt++)Ie[Nt]=W[K]<<24|W[K+1]<<16|W[K+2]<<8|W[K+3],K+=4;for(let Nt=16;Nt<80;Nt++){const Jn=Ie[Nt-3]^Ie[Nt-8]^Ie[Nt-14]^Ie[Nt-16];Ie[Nt]=4294967295&(Jn<<1|Jn>>>31)}let Qn,cr,ie=this.chain_[0],Ke=this.chain_[1],ft=this.chain_[2],zt=this.chain_[3],on=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Qn=zt^Ke&(ft^zt),cr=1518500249):(Qn=Ke^ft^zt,cr=1859775393):Nt<60?(Qn=Ke&ft|zt&(Ke|ft),cr=2400959708):(Qn=Ke^ft^zt,cr=3395469782);const Jn=(ie<<5|ie>>>27)+Qn+on+cr+Ie[Nt]&4294967295;on=zt,zt=ft,ft=4294967295&(Ke<<30|Ke>>>2),Ke=ie,ie=Jn}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+Ke&4294967295,this.chain_[2]=this.chain_[2]+ft&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+on&4294967295}update(W,K){if(null==W)return;void 0===K&&(K=W.length);const Ie=K-this.blockSize;let ie=0;const Ke=this.buf_;let ft=this.inbuf_;for(;ie<K;){if(0===ft)for(;ie<=Ie;)this.compress_(W,ie),ie+=this.blockSize;if("string"==typeof W){for(;ie<K;)if(Ke[ft]=W.charCodeAt(ie),++ft,++ie,ft===this.blockSize){this.compress_(Ke),ft=0;break}}else for(;ie<K;)if(Ke[ft]=W[ie],++ft,++ie,ft===this.blockSize){this.compress_(Ke),ft=0;break}}this.inbuf_=ft,this.total_+=K}digest(){const W=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&K,K/=256;this.compress_(this.buf_);let Ie=0;for(let ie=0;ie<5;ie++)for(let Ke=24;Ke>=0;Ke-=8)W[Ie]=this.chain_[ie]>>Ke&255,++Ie;return W}}function Ji(j,W){const K=new pt(j,W);return K.subscribe.bind(K)}class pt{constructor(W,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{W(this)}).catch(Ie=>{this.error(Ie)})}next(W){this.forEachObserver(K=>{K.next(W)})}error(W){this.forEachObserver(K=>{K.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,K,Ie){let ie;if(void 0===W&&void 0===K&&void 0===Ie)throw new Error("Missing Observer.");ie=function An(j,W){if("object"!=typeof j||null===j)return!1;for(const K of W)if(K in j&&"function"==typeof j[K])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:K,complete:Ie},void 0===ie.next&&(ie.next=Wt),void 0===ie.error&&(ie.error=Wt),void 0===ie.complete&&(ie.complete=Wt);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(ft){}}),this.observers.push(ie),Ke}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,W)}sendOne(W,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{K(this.observers[W])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wt(){}const Sr=function(j,W,K,Ie){let ie;if(Ie<W?ie="at least "+W:Ie>K&&(ie=0===K?"none":"no more than "+K),ie)throw new Error(j+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+ie+".")};function ht(j,W){return`${j} failed: ${W} argument `}function bt(j,W,K,Ie){if((!Ie||K)&&"function"!=typeof K)throw new Error(ht(j,W)+"must be a valid function.")}function Qt(j,W,K,Ie){if((!Ie||K)&&("object"!=typeof K||null===K))throw new Error(ht(j,W)+"must be a valid context object.")}const lr=function(j){const W=[];let K=0;for(let Ie=0;Ie<j.length;Ie++){let ie=j.charCodeAt(Ie);if(ie>=55296&&ie<=56319){const Ke=ie-55296;Ie++,B(Ie<j.length,"Surrogate pair missing trail surrogate."),ie=65536+(Ke<<10)+(j.charCodeAt(Ie)-56320)}ie<128?W[K++]=ie:ie<2048?(W[K++]=ie>>6|192,W[K++]=63&ie|128):ie<65536?(W[K++]=ie>>12|224,W[K++]=ie>>6&63|128,W[K++]=63&ie|128):(W[K++]=ie>>18|240,W[K++]=ie>>12&63|128,W[K++]=ie>>6&63|128,W[K++]=63&ie|128)}return W},St=function(j){let W=0;for(let K=0;K<j.length;K++){const Ie=j.charCodeAt(K);Ie<128?W++:Ie<2048?W+=2:Ie>=55296&&Ie<=56319?(W+=4,K++):W+=3}return W};function jt(j,W=1e3,K=2){const Ie=W*Math.pow(K,j),ie=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ie)}function En(j){return j&&j._delegate?j._delegate:j}},3621:(at,De,O)=>{"use strict";var p=O(5e3);let B=null;function P(){return B}const le=new p.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function _e(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const G=new p.OlP("Location Initialized");let H=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function He(){return new H((0,p.LFG)(le))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let Q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ce(n){const e=(0,p.LFG)(le).location;return new Me((0,p.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new p.OlP("appBaseHref");let Me=(()=>{class n extends Q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n extends Q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(re(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=xe,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(p.LFG(Q),p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new be((0,p.LFG)(Q),(0,p.LFG)(ue))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const Vi=p.kL8;class gn{}let Bn=(()=>{class n extends gn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Vi(r||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let wr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Su("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Su("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function Su(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let dd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:gn,useClass:Bn}]}),n})();function Pa(n){return"server"===n}let hd=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Nu((0,p.LFG)(le),window)}),n})();class Nu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fd(this.window.history)||fd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hn{}class vo extends class qo extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){B||(B=n)}(new vo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Oa(){return fn=fn||document.querySelector("base"),fn?fn.getAttribute("href"):null}();return null==t?null:function Ys(n){Pu=Pu||document.createElement("a"),Pu.setAttribute("href",n);const e=Pu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ba(document.cookie,e)}}let Pu,fn=null;const dr=new p.OlP("TRANSITION_ID"),jn=[{provide:p.ip1,useFactory:function Bl(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[dr,le,p.zs3],multi:!0}];class is{static init(){(0,p.VLi)(new is)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const wo=new p.OlP("EventManagerPlugins");let Qs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Fa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let $i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends $i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Es),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Es))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Es(n){P().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wo=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Wo,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ql(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Ua(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Qs),p.LFG(ss),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=mt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class ql extends zo{constructor(e,t,r,i){super(e),this.component=r;const a=Se(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hl(n){return"_ngcontent-%COMP%".replace(Wo,n)}(i+"-"+r.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(Wo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ua extends zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Se(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ug=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const gd=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(gd.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Js(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Hn.hasOwnProperty(e)&&(e=Hn[e]))}return Ou[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),gd.forEach(a=>{a!=i&&Cs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Lu=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Gi(){vo.makeCurrent(),is.init()},multi:!0},{provide:le,useFactory:function Fu(){return(0,p.RDi)(document),document},deps:[]}]),Ba=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Wl(){return new p.qLn},deps:[]},{provide:wo,useClass:ug,multi:!0,deps:[le,p.R0b,p.Lbi]},{provide:wo,useClass:Va,multi:!0,deps:[le]},{provide:Tn,useClass:Tn,deps:[Qs,ss,p.AFp]},{provide:p.FYo,useExisting:Tn},{provide:$i,useExisting:ss},{provide:ss,useClass:ss,deps:[le]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Qs,useClass:Qs,deps:[wo,p.R0b]},{provide:hn,useClass:Ar,deps:[]}];let ja=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:dr,useExisting:p.AFp},jn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Ba,imports:[dd,p.hGG]}),n})();"undefined"!=typeof window&&window;var _n=O(8996),Wa=O(7669);function et(...n){const e=(0,Wa.yG)(n);return(0,_n.D)(n,e)}var Ts=O(7579);class ui extends Ts.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xn=O(8306);const{isArray:nc}=Array,{getPrototypeOf:$n,prototype:Zo,keys:za}=Object;var as=O(4671),_t=O(4004);const{isArray:rc}=Array;var un=O(5403),Yo=O(9672);function Za(...n){const e=(0,Wa.yG)(n),t=(0,Wa.jO)(n),{args:r,keys:i}=function bo(n){if(1===n.length){const e=n[0];if(nc(e))return{args:e,keys:null};if(function To(n){return n&&"object"==typeof n&&$n(n)===Zo}(e)){const t=za(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,_n.D)([],e);const a=new xn.y(function Qo(n,e,t=as.y){return r=>{$r(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)$r(e,()=>{const v=(0,_n.D)(n[m],e);let T=!1;v.subscribe((0,un.x)(r,S=>{a[m]=S,T||(T=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function ic(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):as.y));return t?a.pipe(function Ka(n){return(0,_t.U)(e=>function md(n,e){return rc(e)?n(...e):n(e)}(n,e))}(t)):a}function $r(n,e,t){n?(0,Yo.f)(t,n,e):e()}const Jo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var us=O(8189);function Ya(...n){return function $u(){return(0,us.J)(1)}()((0,_n.D)(n,(0,Wa.yG)(n)))}var Ds=O(8421);function sc(n){return new xn.y(e=>{(0,Ds.Xf)(n()).subscribe(e)})}var Ss=O(515),Xo=O(727),Rr=O(4482);function oc(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,un.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ea extends xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,un.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xo.w0.EMPTY)}return e}refCount(){return oc()(this)}}function Dn(n,e){return(0,Rr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,un.x)(r,m=>{null==i||i.unsubscribe();let v=0;const T=a++;(0,Ds.Xf)(n(m,T)).subscribe(i=(0,un.x)(r,S=>r.next(e?e(m,S,T,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Do=O(5698);function So(...n){const e=(0,Wa.yG)(n);return(0,Rr.e)((t,r)=>{(e?Ya(n,t,e):Ya(n,t)).subscribe(r)})}function Qa(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,un.x)(l,T=>{const S=v++;m=h?n(m,T,S):(h=!0,T),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function Ei(n,e){return(0,Rr.e)(Qa(n,e,arguments.length>=2,!0))}function Gn(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,un.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function li(n){return(0,Rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,un.x)(t,void 0,void 0,l=>{a=(0,Ds.Xf)(n(l,li(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var tr=O(5577),ac=O(576);function ci(n,e){return(0,ac.m)(e)?(0,tr.z)(n,e,1):(0,tr.z)(n,1)}function _d(n){return n<=0?()=>Ss.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,un.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gu(n=Nn){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,un.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Nn(){return new Jo}function tf(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,un.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ta(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((i,a)=>n(i,a,r)):as.y,(0,Do.q)(1),t?tf(e):Gu(()=>new Jo))}var Ci=O(8505);class As{constructor(e,t){this.id=e,this.url=t}}class qu extends As{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xs extends As{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class uc extends As{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nr extends As{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ja extends As{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xa extends As{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rf extends As{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wu extends As{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends As{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ku{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Zu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ls(n){return new Zu(n)}const hi="ngNavigationCancelingError";function Yu(n){const e=Error("NavigationCancelingError: "+n);return e[hi]=!0,e}function lg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Lr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!tu(n[i],e[i]))return!1;return!0}function tu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ju(n){return Array.prototype.concat.apply([],n)}function yd(n){return n.length>0?n[n.length-1]:null}function hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fr(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,_n.D)(Promise.resolve(n)):et(n)}const sf={exact:function vd(n,e,t){if(!Ze(n.segments,e.segments)||!V(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vd(n.children[r],e.children[r],t))return!1;return!0},subset:D},Ms={exact:function nu(n,e){return Lr(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tu(n[t],e[t]))},ignored:()=>!0};function Xu(n,e,t){return sf[t.paths](n.root,e.root,t.matrixParams)&&Ms[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function D(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ze(i,t)||e.hasChildren()||!V(i,t,r))}if(n.segments.length===t.length){if(!Ze(n.segments,t)||!V(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!D(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ze(n.segments,i)&&V(n.segments,i,r)&&n.children[Pt])&&M(n.children[Pt],e,a,r)}}function V(n,e,t){return e.every((r,i)=>Ms[t](n[i].parameters,r.parameters))}class Y{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ls(this.queryParams)),this._queryParamMap}toString(){return qr.serialize(this)}}class J{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pn(this)}}class Oe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ls(this.parameters)),this._parameterMap}toString(){return el(this)}}function Ze(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Xt{}class qn{parse(e){const t=new dc(e);return new Y(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cs(e.root,!0)}`,r=function cg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ur(t)}=${Ur(i)}`).join("&"):`${Ur(t)}=${Ur(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ns(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qr=new qn;function Pn(n){return n.segments.map(e=>el(e)).join("/")}function cs(n,e){if(!n.hasChildren())return Pn(n);if(e){const t=n.children[Pt]?cs(n.children[Pt],!1):"",r=[];return hr(n.children,(i,a)=>{a!==Pt&&r.push(`${a}:${cs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Jt(n,e){let t=[];return hr(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),hr(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[cs(n.children[Pt],!1)]:[`${i}:${cs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${Pn(n)}/${t[0]}`:`${Pn(n)}/(${t.join("//")})`}}function eo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(n){return eo(n).replace(/%3B/gi,";")}function Wr(n){return eo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ru(n){return decodeURIComponent(n)}function wd(n){return ru(n.replace(/\+/g,"%20"))}function el(n){return`${Wr(n.path)}${function Ed(n){return Object.keys(n).map(e=>`;${Wr(e)}=${Wr(n[e])}`).join("")}(n.parameters)}`}const q_=/^[^\/()?;=#]+/;function tl(n){const e=n.match(q_);return e?e[0]:""}const nl=/^[^=?&#]+/,dg=/^[^&#]+/;class dc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new J(e,t)),r}parseSegment(){const e=tl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Oe(ru(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tl(this.remaining);i&&(r=i,this.capture(r))}e[ru(t)]=ru(r)}parseQueryParam(e){const t=function cc(n){const e=n.match(nl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function kE(n){const e=n.match(dg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=wd(t),a=wd(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Pt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Pt]:new J([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class hg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=af(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return af(e,this._root).map(t=>t.value)}}function fg(n,e){if(n===e.value)return e;for(const t of e.children){const r=fg(n,t);if(r)return r}return null}function af(n,e){if(n===e.value)return[e];for(const t of e.children){const r=af(n,t);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hc extends hg{constructor(e,t){super(e),this.snapshot=t,bd(this,e)}toString(){return this.snapshot.toString()}}function Cd(n,e){const t=function il(n,e){const l=new iu([],{},{},"",{},Pt,e,null,n.root,-1,{});return new Id("",new xo(l,[]))}(n,e),r=new ui([new Oe("",{})]),i=new ui({}),a=new ui({}),l=new ui({}),h=new ui(""),m=new ia(r,i,l,h,a,Pt,e,t.root);return m.snapshot=t.root,new hc(new xo(m,[]),t)}class ia{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>ls(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>ls(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function OE(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class iu{constructor(e,t,r,i,a,l,h,m,v,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ls(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ls(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Id extends hg{constructor(e,t){super(t),this.url=e,bd(this,t)}toString(){return Td(this._root)}}function bd(n,e){e.value._routerState=n,e.children.forEach(t=>bd(n,t))}function Td(n){const e=n.children.length>0?` { ${n.children.map(Td).join(", ")} } `:"";return`${n.value}${e}`}function Dd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Lr(e.params,t.params)||n.params.next(t.params),function Qu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Lr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Sd(n,e){const t=Lr(n.params,e.params)&&function $e(n,e){return Ze(n,e)&&n.every((t,r)=>Lr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sd(n.parent,e.parent))}function fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fc(n,r,i);return fc(n,r)})}(n,e,t);return new xo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>fc(n,h)),l}}const r=function z_(n){return new ia(new ui(n.url),new ui(n.params),new ui(n.queryParams),new ui(n.fragment),new ui(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>fc(n,a));return new xo(r,i)}}function Ps(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function to(n){return"object"==typeof n&&null!=n&&n.outlets}function cf(n,e,t,r,i){let a={};return r&&hr(r,(l,h)=>{a[h]=Array.isArray(l)?l.map(m=>`${m}`):`${l}`}),new Y(t.root===n?e:df(t.root,n,e),a,i)}function df(n,e,t){const r={};return hr(n.children,(i,a)=>{r[a]=i===e?t:df(i,e,t)}),new J(n.segments,r)}class K_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ps(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(to);if(i&&i!==yd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mg(n,e,t){if(n||(n=new J([],{})),0===n.segments.length&&n.hasChildren())return w(n,e,t);const r=function g(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(to(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!F(m,v,l))return a;r+=2}else{if(!F(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new J(n.segments.slice(0,r.pathIndex),{});return a.children[Pt]=new J(n.segments.slice(r.pathIndex),n.children),w(a,0,i)}return r.match&&0===i.length?new J(n.segments,{}):r.match&&!n.hasChildren()?_(n,e,t):r.match?w(n,0,i):_(n,e,t)}function w(n,e,t){if(0===t.length)return new J(n.segments,{});{const r=function Y_(n){return to(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return hr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=mg(n.children[l],e,a))}),hr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new J(n.segments,i)}}function _(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(to(a)){const m=C(a.outlets);return new J(r,m)}if(0===i&&Ps(t[0])){r.push(new Oe(n.segments[e].path,R(t[0]))),i++;continue}const l=to(a)?a.outlets[Pt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Ps(h)?(r.push(new Oe(l,R(h))),i+=2):(r.push(new Oe(l,{})),i++)}return new J(r,{})}function C(n){const e={};return hr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_(new J([],{}),0,t))}),e}function R(n){const e={};return hr(n,(t,r)=>e[r]=`${t}`),e}function F(n,e,t){return n==t.path&&Lr(e,t.parameters)}class Ne{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),hr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new lc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new di(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Dd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Dd(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function rt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class yt{constructor(e,t){this.routes=e,this.module=t}}function Tt(n){return"function"==typeof n}function fi(n){return n instanceof Y}const gc=Symbol("INITIAL_VALUE");function mc(){return Dn(n=>Za(n.map(e=>e.pipe((0,Do.q)(1),So(gc)))).pipe(Ei((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==gc?i:(a===gc&&(r=!0),r||!1!==a&&l!==t.length-1&&!fi(a)?i:a),e)},gc),Gn(e=>e!==gc),(0,_t.U)(e=>fi(e)?e:!0===e),(0,Do.q)(1)))}class xd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ol,this.attachRef=null}}class ol{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new xd,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Rd=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=a||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new ff(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ol),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ff{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ia?this.route:e===ol?this.childContexts:this.parent.get(e,t)}}let pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[Rd],encapsulation:2}),n})();function gf(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];al(r,Q_(e,r))}}function al(n,e){n.children&&gf(n.children,e)}function Q_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function mf(n){const e=n.children&&n.children.map(mf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=pf),t}function no(n){return n.outlet||Pt}function Cr(n,e){const t=n.filter(r=>no(r)===e);return t.push(...n.filter(r=>no(r)!==e)),t}const LE={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _g(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},LE):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||lg)(t,n,e);if(!a)return Object.assign({},LE);const l={};hr(a.posParams,(m,v)=>{l[v]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Md(n,e,t,r,i="corrected"){if(t.length>0&&function bT(n,e,t){return t.some(r=>yg(n,e,r)&&no(r)!==Pt)}(n,t,r)){const l=new J(e,function IT(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&no(a)!==Pt){const l=new J([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[no(a)]=l}return i}(n,e,r,new J(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function TT(n,e,t){return t.some(r=>yg(n,e,r))}(n,t,r)){const l=new J(n.segments,function UE(n,e,t,r,i,a){const l={};for(const h of r)if(yg(n,t,h)&&!i[no(h)]){const m=new J([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[no(h)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new J(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function yg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function VE(n,e,t,r){return!!(no(n)===r||r!==Pt&&yg(e,t,n))&&("**"===n.path||_g(e,n,t).matched)}function DT(n,e,t){return 0===e.length&&!n.children[t]}class vg{constructor(e){this.segmentGroup=e||null}}class Nd{constructor(e){this.urlTree=e}}function zr(n){return new xn.y(e=>e.error(new vg(n)))}function wg(n){return new xn.y(e=>e.error(new Nd(n)))}function BE(n){return new xn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class _f{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Md(this.urlTree.root,[],[],this.config).segmentGroup,t=new J(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,_t.U)(a=>this.createUrlTree(X_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(li(a=>{if(a instanceof Nd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof vg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,_t.U)(i=>this.createUrlTree(X_(i),e.queryParams,e.fragment))).pipe(li(i=>{throw i instanceof vg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new J([],{[Pt]:e}):e;return new Y(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(a=>new J([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,_n.D)(i).pipe(ci(a=>{const l=r.children[a],h=Cr(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,_t.U)(m=>({segment:m,outlet:a})))}),Ei((a,l)=>(a[l.outlet]=l.segment,a),{}),function G_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gn((i,a)=>n(i,a,r)):as.y,_d(1),t?tf(e):Gu(()=>new Jo))}())}expandSegment(e,t,r,i,a,l){return(0,_n.D)(r).pipe(ci(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(li(v=>{if(v instanceof vg)return et(null);throw v}))),ta(h=>!!h),li((h,m)=>{if(h instanceof Jo||"EmptyError"===h.name){if(DT(t,i,a))return et(new J([],{}));throw new vg(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return VE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):zr(t):zr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wg(a):this.lineralizeSegments(r,a).pipe((0,tr.z)(l=>{const h=new J(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,lastChild:v,positionalParamSegments:T}=_g(t,i,a);if(!h)return zr(t);const S=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?wg(S):this.lineralizeSegments(i,S).pipe((0,tr.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(v)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,_t.U)(N=>(r._loadedConfig=N,new J(i,{})))):et(new J(i,{}));const{matched:l,consumedSegments:h,lastChild:m}=_g(t,r,i);if(!l)return zr(t);const v=i.slice(m);return this.getChildConfig(e,r,i).pipe((0,tr.z)(S=>{const N=S.module,U=S.routes,{segmentGroup:q,slicedSegments:we}=Md(t,h,v,U),Pe=new J(q.segments,q.children);if(0===we.length&&Pe.hasChildren())return this.expandChildren(N,U,Pe).pipe((0,_t.U)(dt=>new J(h,dt)));if(0===U.length&&0===we.length)return et(new J(h,{}));const tt=no(r)===a;return this.expandSegment(N,Pe,U,we,tt?Pt:a,!0).pipe((0,_t.U)(Ct=>new J(h.concat(Ct.segments),Ct.children)))}))}getChildConfig(e,t,r){return t.children?et(new yt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,tr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,_t.U)(a=>(t._loadedConfig=a,a))):function jE(n){return new xn.y(e=>e.error(Yu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):et(new yt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?et(i.map(l=>{const h=e.get(l);let m;if(function su(n){return n&&Tt(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!Tt(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return fr(m)})).pipe(mc(),(0,Ci.b)(l=>{if(!fi(l))return;const h=Yu(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,_t.U)(l=>!0===l)):et(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[Pt])return BE(e.redirectTo);i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Y(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return hr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return hr(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new J(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function X_(n){const e={};for(const r of Object.keys(n.children)){const a=X_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function J_(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new J(n.segments.concat(e.segments),e.children)}return n}(new J(n.segments,e))}class ey{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Eg{constructor(e,t){this.component=e,this.route=t}}function HE(n,e,t){const r=n._root;return vf(r,e?e._root:null,t,[r.value])}function yf(n,e,t){const r=function xT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function vf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=rl(e);return n.children.forEach(l=>{(function ty(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function RT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ze(n.url,e.url)||!Lr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sd(n,e)||!Lr(n.queryParams,e.queryParams);default:return!Sd(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new ey(r)):(a.data=l.data,a._resolvedData=l._resolvedData),vf(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Eg(h.outlet.component,l))}else l&&wf(e,h,i),i.canActivateChecks.push(new ey(r)),vf(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),hr(a,(l,h)=>wf(l,t.getContext(h),i)),i}function wf(n,e,t){const r=rl(n),i=n.value;hr(r,(a,l)=>{wf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Eg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class LT{}function ry(n){return new xn.y(e=>e.error(n))}class VT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Md(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new iu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xo(r,t),a=new Id(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=pg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=Cr(e,a),m=this.processSegmentGroup(h,l,a);if(null===m)return null;r.push(...m)}const i=GE(r);return function BT(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return DT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!VE(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const U=r.length>0?yd(r).parameters:{};a=new iu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ro(e),no(e),e.component,e,qE(t),_c(t)+r.length,HT(e))}else{const U=_g(t,e,r);if(!U.matched)return null;l=U.consumedSegments,h=r.slice(U.lastChild),a=new iu(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ro(e),no(e),e.component,e,qE(t),_c(t)+l.length,HT(e))}const m=function jT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:T}=Md(t,l,h,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===T.length&&v.hasChildren()){const U=this.processChildren(m,v);return null===U?null:[new xo(a,U)]}if(0===m.length&&0===T.length)return[new xo(a,[])];const S=no(e)===i,N=this.processSegment(m,v,T,S?Pt:i);return null===N?null:[new xo(a,N)]}}function $E(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function GE(n){const e=[],t=new Set;for(const r of n){if(!$E(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=GE(r.children);e.push(new xo(r.value,i))}return e.filter(r=>!t.has(r))}function qE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _c(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Ro(n){return n.data||{}}function HT(n){return n.resolve||{}}function Cg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sy(n){return Dn(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,_t.U)(()=>e)):et(e)})}class KE extends class Cf{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ig=new p.OlP("ROUTES");class bg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,_t.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new yt(Ju(l.injector.get(Ig,void 0,p.XFs.Self|p.XFs.Optional)).map(mf),l)}),li(a=>{throw t._loader$=void 0,a}));return t._loader$=new ea(i,()=>new Ts.x).pipe(oc()),t._loader$}loadModuleFactory(e){return fr(e()).pipe((0,tr.z)(t=>t instanceof p.YKP?et(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class ZE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zM(n){throw n}function Pd(n,e,t){return e.parse("/")}function Tg(n,e){return et(null)}const YE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$T={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ts.x,this.errorHandler=zM,this.malformedUriErrorHandler=Pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Tg,afterPreactivation:Tg},this.urlHandlingStrategy=new ZE,this.routeReuseStrategy=new KE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const S=l.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function ra(){return new Y(new J([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bg(l,h,N=>this.triggerEvent(new Ii(N)),N=>this.triggerEvent(new eu(N))),this.routerState=Cd(this.currentUrlTree,this.rootComponentType),this.transitions=new ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gn(i=>0!==i.id),(0,_t.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Dn(i=>{let a=!1,l=!1;return et(i).pipe((0,Ci.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Dg(h.source)&&(this.browserUrlTree=h.extractedUrl),et(h).pipe(Dn(S=>{const N=this.transitions.getValue();return r.next(new qu(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Ss.E:Promise.resolve(S)}),function ST(n,e,t,r){return Dn(i=>function bi(n,e,t,r,i){return new _f(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ci.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function qM(n,e,t,r,i){return(0,tr.z)(a=>function UT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new VT(n,e,t,r,i,a).recognize();return null===l?ry(new LT):et(l)}catch(l){return ry(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,_t.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ci.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Ja(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:U,source:q,restoredState:we,extras:Pe}=h,tt=new qu(N,this.serializeUrl(U),q,we);r.next(tt);const vt=Cd(U,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},h),{targetSnapshot:vt,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ss.E}),sy(h=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=h;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,Ci.b)(h=>{const m=new Xa(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,_t.U)(h=>Object.assign(Object.assign({},h),{guards:HE(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function ny(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function MT(n,e,t,r){return(0,_n.D)(n).pipe((0,tr.z)(i=>function FT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?et(a.map(h=>{const m=yf(h,e,i);let v;if(function pc(n){return n&&Tt(n.canDeactivate)}(m))v=fr(m.canDeactivate(n,e,t,r));else{if(!Tt(m))throw new Error("Invalid CanDeactivate guard");v=fr(m(n,e,t,r))}return v.pipe(ta())})).pipe(mc()):et(!0)}(i.component,i.route,t,e,r)),ta(i=>!0!==i,!0))}(l,r,i,n).pipe((0,tr.z)(h=>h&&function kn(n){return"boolean"==typeof n}(h)?function NT(n,e,t,r){return(0,_n.D)(e).pipe(ci(i=>Ya(function PT(n,e){return null!==n&&e&&e(new zu(n)),et(!0)}(i.route.parent,r),function Ef(n,e){return null!==n&&e&&e(new na(n)),et(!0)}(i.route,r),function OT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function AT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>sc(()=>et(l.guards.map(m=>{const v=yf(m,l.node,t);let T;if(function Ad(n){return n&&Tt(n.canActivateChild)}(v))T=fr(v.canActivateChild(r,n));else{if(!Tt(v))throw new Error("Invalid CanActivateChild guard");T=fr(v(r,n))}return T.pipe(ta())})).pipe(mc())));return et(a).pipe(mc())}(n,i.path,t),function kT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(a=>sc(()=>{const l=yf(a,e,t);let h;if(function sl(n){return n&&Tt(n.canActivate)}(l))h=fr(l.canActivate(e,n));else{if(!Tt(l))throw new Error("Invalid CanActivate guard");h=fr(l(e,n))}return h.pipe(ta())}));return et(i).pipe(mc())}(n,i.route,t))),ta(i=>!0!==i,!0))}(r,a,n,e):et(h)),(0,_t.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ci.b)(h=>{if(fi(h.guardsResult)){const v=Yu(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const m=new rf(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Gn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),sy(h=>{if(h.guards.canActivateChecks.length)return et(h).pipe((0,Ci.b)(m=>{const v=new Wu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Dn(m=>{let v=!1;return et(m).pipe(function WE(n,e){return(0,tr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let a=0;return(0,_n.D)(i).pipe(ci(l=>function WM(n,e,t,r){return function sa(n,e,t,r){const i=Cg(n);if(0===i.length)return et({});const a={};return(0,_n.D)(i).pipe((0,tr.z)(l=>function iy(n,e,t,r){const i=yf(n,e,r);return fr(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ci.b)(h=>{a[l]=h}))),_d(1),(0,tr.z)(()=>Cg(a).length===i.length?et(a):Ss.E))}(n._resolve,n,e,r).pipe((0,_t.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),pg(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ci.b)(()=>a++),_d(1),(0,tr.z)(l=>a===i.length?et(t):Ss.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ci.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Ci.b)(m=>{const v=new Gr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),sy(h=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=h;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,_t.U)(h=>{const m=function W_(n,e,t){const r=fc(n,e._root,t?t._root:void 0);return new hc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,Ci.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new Ne(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ci.b)({next(){a=!0},complete(){a=!0}}),function nf(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),li(h=>{if(l=!0,function Ao(n){return n&&n[hi]}(h)){const m=fi(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new uc(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dg(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new nr(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Ss.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gf(t),this.config=t.map(mf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,T=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function lf(n,e,t,r,i){if(0===t.length)return cf(e.root,e.root,e,r,i);const a=function Z_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new K_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return hr(a.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new K_(t,e,r)}(t);if(a.toRoot())return cf(e.root,new J([],{}),e,r,i);const l=function FE(n,e,t){if(n.isAbsolute)return new hf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new hf(a,a===e.root,0)}const r=Ps(n.commands[0])?0:1;return function gg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new hf(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?w(l.segmentGroup,l.index,a.commands):mg(l.segmentGroup,l.index,a.commands);return cf(l.segmentGroup,h,e,r,i)}(v,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function GT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},YE):!1===r?Object.assign({},$T):r,fi(t))return Xu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Xu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,m,v;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,S=Dg(r)&&T&&!Dg(T.source),N=T.rawUrl.toString()===t.toString(),U=T.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(S&&N&&U)return Promise.resolve(!0);let we,Pe,tt;l?(we=l.resolve,Pe=l.reject,tt=l.promise):tt=new Promise((dt,wn)=>{we=dt,Pe=wn});const vt=++this.navigationId;let Ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):Ct=0,this.setTransition({id:vt,targetPageId:Ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:we,reject:Pe,promise:tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tt.catch(dt=>Promise.reject(dt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new uc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Dg(n){return"imperative"!==n}let yc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Ts.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:kd(this.skipLocationChange),replaceUrl:kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pi),p.Y36(ia),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function kd(n){return""===n||!!n}class Sg{}class Ag{preload(e,t){return et(null)}}let XE=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new bg(i,r,m=>t.triggerEvent(new Ii(m)),m=>t.triggerEvent(new eu(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(t=>t instanceof xs),ci(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,_n.D)(i).pipe((0,us.J)(),(0,_t.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,tr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Sg))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),uy=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ku&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ku(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=new p.OlP("ROUTER_CONFIGURATION"),ll=new p.OlP("ROUTER_FORROOT_GUARD"),e0=[be,{provide:Xt,useClass:qn},{provide:pi,useFactory:function s0(n,e,t,r,i,a,l={},h,m){const v=new pi(null,n,e,t,r,i,Ju(a));return h&&(v.urlHandlingStrategy=h),m&&(v.routeReuseStrategy=m),function cy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(T=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[Xt,ol,be,p.zs3,p.Sil,Ig,ul,[class oy{},new p.FiY],[class zE{},new p.FiY]]},ol,{provide:ia,useFactory:function o0(n){return n.routerState.root},deps:[pi]},XE,Ag,class JE{preload(e,t){return t().pipe(li(()=>et(null)))}},{provide:ul,useValue:{enableTracing:!1}}];function t0(){return new p.PXZ("Router",pi)}let n0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[e0,ly(t),{provide:ll,useFactory:r0,deps:[[pi,new p.FiY,new p.tp0]]},{provide:ul,useValue:r||{}},{provide:Q,useFactory:zT,deps:[ue,[new p.tBr(Re),new p.FiY],ul]},{provide:uy,useFactory:xg,deps:[pi,hd,ul]},{provide:Sg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Ag},{provide:p.PXZ,multi:!0,useFactory:t0},[Od,{provide:p.ip1,multi:!0,useFactory:Rg,deps:[Od]},{provide:Mg,useFactory:a0,deps:[Od]},{provide:p.tb,multi:!0,useExisting:Mg}]]}}static forChild(t){return{ngModule:n,providers:[ly(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ll,8),p.LFG(pi,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function xg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new uy(n,e,t)}function zT(n,e,t={}){return t.useHash?new he(n,e):new Me(n,e)}function r0(n){return"guarded"}function ly(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Ig,multi:!0,useValue:n}]}let Od=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ts.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(pi),l=this.injector.get(ul);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ul),i=this.injector.get(XE),a=this.injector.get(uy),l=this.injector.get(pi),h=this.injector.get(p.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Rg(n){return n.appInitializer.bind(n)}function a0(n){return n.bootstrapListener.bind(n)}const Mg=new p.OlP("Router Initializer");let If=(()=>{class n{constructor(){this.title="angularfiebase-authentication"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[Rd],styles:[""]}),n})();var Vr=O(2011),Ng=O(6451),Pg=O(5363),KT=O(6063);class c0 extends Ts.x{constructor(e=1/0,t=1/0,r=KT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var kg=O(3099);function dy(n,e,t){var r,i;let a,l=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,kg.B)({connector:()=>new c0(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function ZT(n,e){return(0,ac.m)(e)?Dn(()=>n,e):Dn(()=>n)}var Og=O(9468),ln=O(5813);O(5867);var ve=O(5861),On=O(9681),ro=O(4859),k=O(2090),ks=O(1877);const aa=new Map,fy={activated:!1,tokenObservers:[]},d0={initialized:!1,enabled:!1};function Mr(n){return aa.get(n)||fy}function ua(n,e){aa.set(n,e)}function bf(){return d0}class XM{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function iD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qi=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function my(n){if(!Mr(n).activated)throw qi.create("use-before-activation",{appName:n.name})}function Hg(n,e){return $g.apply(this,arguments)}function $g(){return($g=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw qi.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw qi.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw qi.create("fetch-parse-error",{originalErrorMessage:S.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),T=Date.now();return{token:h.attestationToken,expireTimeMillis:T+v,issuedAtTimeMillis:T}})).apply(this,arguments)}function tN(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Gg="firebase-app-check-store";let wy=null;function uD(){return wy||(wy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Gg,{keyPath:"compositeKey"})}}catch(t){e(qi.create("storage-open",{originalErrorMessage:t.message}))}}),wy)}function Ey(){return(Ey=(0,ve.Z)(function*(n,e){const r=(yield uD()).transaction(Gg,"readwrite"),a=r.objectStore(Gg).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(qi.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const vc=new ks.Yd("@firebase/app-check");function by(n,e){return(0,k.hl)()?function sN(n,e){return function qg(n,e){return Ey.apply(this,arguments)}(function Iy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function f0(){return bf().enabled}function Ty(){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,ve.Z)(function*(){const n=bf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Sf={error:"UNKNOWN_ERROR"};function Fd(n){return k.US.encodeString(JSON.stringify(n),!1)}function Ld(n){return dl.apply(this,arguments)}function dl(){return(dl=(0,ve.Z)(function*(n,e=!1){const t=n.app;my(t);const r=Mr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Ud(m)&&(i=m)}if(!e&&i&&Ud(i))return{token:i.token};let h,l=!1;if(f0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hg(tN(t,yield Ty()),n.platformLoggerProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const m=yield r.exchangeTokenPromise;return yield by(t,m),ua(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?vc.warn(m.message):vc.error(m),a=m}return i?(h={token:i.token},ua(t,Object.assign(Object.assign({},r),{token:i})),yield by(t,i)):h=Ay(a),l&&Sy(t,h),h})).apply(this,arguments)}function hl(n,e){const t=Mr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ua(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function p0(n){const{app:e}=n,t=Mr(e);let r=t.tokenRefresher;r||(r=function g0(n){const{app:e}=n;return new XM((0,ve.Z)(function*(){let r;if(r=Mr(e).token?yield Ld(n,!0):yield Ld(n),r.error)throw r.error}),()=>!0,()=>{const t=Mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ua(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Sy(n,e){const t=Mr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Ud(n){return n.expireTimeMillis-Date.now()>0}function Ay(n){return{token:Fd(Sf),error:n}}class m0{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Mr(this.app);for(const t of e)hl(this.app,t.next);return Promise.resolve()}}const I0="app-check-internal";!function b0(){(0,On._registerComponent)(new ro.wA("app-check",n=>function Wg(n,e){return new m0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(I0).initialize()})),(0,On._registerComponent)(new ro.wA(I0,n=>function hD(n){return{getToken:e=>Ld(n,e),addTokenListener:e=>function wc(n,e,t,r){const{app:i}=n,a=Mr(i),l={next:t,error:r,type:e};if(ua(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Ud(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),p0(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>p0(n))}(n,"INTERNAL",e),removeTokenListener:e=>hl(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,On.registerVersion)("@firebase/app-check","0.5.3")}();class hs{constructor(){return(0,ln.vb)("app-check")}}"undefined"!=typeof window&&window;var Vd=O(127);const Ly=new p.OlP("angularfire2.auth.use-emulator"),Uy=new p.OlP("angularfire2.auth.settings"),Af=new p.OlP("angularfire2.auth.tenant-id"),R0=new p.OlP("angularfire2.auth.langugage-code"),Vy=new p.OlP("angularfire2.auth.use-device-language"),Zg=new p.OlP("angularfire.auth.persistence"),Yg=(n,e,t,r,i,a,l,h)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,T]of Object.entries(l))m.settings[v]=T;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let Bd=(()=>{class n{constructor(t,r,i,a,l,h,m,v,T,S,N,U){const q=new Ts.x,we=et(void 0).pipe((0,Pg.Q)(l.outsideAngular),Dn(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,_t.U)(()=>(0,Vr.on)(t,a,r)),(0,_t.U)(Pe=>Yg(Pe,a,h,v,T,S,m,N)),dy({bufferSize:1,refCount:!1}));if(Pa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{we.pipe(ta()).subscribe();const tt=we.pipe(Dn(dt=>dt.getRedirectResult().then(wn=>wn,()=>null)),ln.iC,dy({bufferSize:1,refCount:!1})),vt=we.pipe(Dn(dt=>new xn.y(wn=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(Li=>wn.next(Li),Li=>wn.error(Li),()=>wn.complete()))})))),Ct=we.pipe(Dn(dt=>new xn.y(wn=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(Li=>wn.next(Li),Li=>wn.error(Li),()=>wn.complete()))}))));this.authState=tt.pipe(ZT(vt),(0,Og.R)(l.outsideAngular),(0,Pg.Q)(l.insideAngular)),this.user=tt.pipe(ZT(Ct),(0,Og.R)(l.outsideAngular),(0,Pg.Q)(l.insideAngular)),this.idToken=this.user.pipe(Dn(dt=>dt?(0,_n.D)(dt.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Dn(dt=>dt?(0,_n.D)(dt.getIdTokenResult()):et(null))),this.credential=(0,Ng.T)(tt,q,this.authState.pipe(Gn(dt=>!dt))).pipe((0,_t.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,Og.R)(l.outsideAngular),(0,Pg.Q)(l.insideAngular))}return(0,Vr.pX)(this,we,a,{spy:{apply:(Pe,tt,vt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&vt.then(Ct=>q.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ln.HU),p.LFG(Ly,8),p.LFG(Uy,8),p.LFG(Af,8),p.LFG(R0,8),p.LFG(Vy,8),p.LFG(Zg,8),p.LFG(hs,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M0=(()=>{class n{constructor(){Vd.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Bd]}),n})();var Qg=O(4986),jd=O(3942);const N0="firebasestorage.googleapis.com",P0="storageBucket";class rr extends k.ZR{constructor(e,t){super(xf(e),`Firebase Storage: ${t} (${xf(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rr.prototype)}_codeEquals(e){return xf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function xf(n){return"storage/"+n}function Ec(){return new rr("unknown","An unknown error occurred, please check the error payload for server response.")}function Jg(){return new rr("canceled","User canceled the upload/download.")}function Cc(){return new rr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Hd(n){return new rr("invalid-argument",n)}function Ic(){return new rr("app-deleted","The Firebase app was deleted.")}function V0(n){return new rr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rf(n,e){return new rr("invalid-format","String does not match format '"+n+"': "+e)}function Mf(n){throw new rr("internal-error","Internal error: "+n)}class Ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ti.makeFromUrl(e,t)}catch(i){return new Ti(e,"")}if(""===r.path)return r;throw function SD(n){return new rr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(dt){dt.path_=decodeURIComponent(dt.path)}const S=t.replace(/[.]/g,"\\."),Ct=[{regex:h,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===N0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let dt=0;dt<Ct.length;dt++){const wn=Ct[dt],Li=wn.regex.exec(e);if(Li){let ME=Li[wn.indices.path];ME||(ME=""),r=new Ti(Li[wn.indices.bucket],ME),wn.postModify(r);break}}if(null==r)throw function DD(n){return new rr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class io{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Xg(n){return"string"==typeof n||n instanceof String}function G0(n){return $y()&&n instanceof Blob}function $y(){return"undefined"!=typeof Blob}function Gy(n,e,t,r){if(r<e)throw Hd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Hd(`Invalid value for '${n}'. Expected ${t} or less.`)}function ca(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function xD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var au=(()=>{return(n=au||(au={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",au;var n})();class RD{constructor(e,t,r,i,a,l,h,m,v,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function j0(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=Ec();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?Ic():Jg():function TD(){return new rr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new em(!1,null,!0)):this.backoffId_=function Hy(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function T(...Pe){v||(v=!0,e.apply(null,Pe))}function S(Pe){i=setTimeout(()=>{i=null,n(U,m())},Pe)}function N(){a&&clearTimeout(a)}function U(Pe,...tt){if(v)return void N();if(Pe)return N(),void T.call(null,Pe,...tt);if(m()||l)return N(),void T.call(null,Pe,...tt);let Ct;r<64&&(r*=2),1===h?(h=2,Ct=0):Ct=1e3*(r+Math.random()),S(Ct)}let q=!1;function we(Pe){q||(q=!0,N(),!v&&(null!==i?(Pe||(h=2),clearTimeout(i),S(0)):Pe||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,we(!0)},t),we}((r,i)=>{if(i)return void r(!1,new em(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===au.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const T=a.getErrorCode()===au.ABORT;return void r(!1,new em(!1,null,T))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new em(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function B0(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class em{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function wN(...n){const e=function W0(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if($y())return new Blob(n);throw new rr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const so={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tm{constructor(e,t){this.data=e,this.contentType=t||null}}function nm(n,e){switch(n){case so.RAW:return new tm(Wy(e));case so.BASE64:case so.BASE64URL:return new tm(PD(n,e));case so.DATA_URL:return new tm(function Ky(n){const e=new zy(n);return e.base64?PD(so.BASE64,e.rest):function ND(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Rf(so.DATA_URL,"Malformed data URL.")}return Wy(e)}(e.rest)}(e),function kD(n){return new zy(n).contentType}(e))}throw Ec()}function Wy(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PD(n,e){switch(n){case so.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Rf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case so.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Rf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function EN(n){return atob(n)}(e)}catch(i){throw Rf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class zy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Rf(so.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Zy(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class da{constructor(e,t){let r=0,i="";G0(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(G0(this.data_)){const i=function Mo(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new da(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new da(r,!0)}}static getBlob(...e){if($y()){const t=e.map(r=>r instanceof da?r.data_:r);return new da(wN.apply(null,t))}{const t=e.map(l=>Xg(l)?nm(so.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new da(i,!0)}}uploadData(){return this.data_}}function Yy(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function $0(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function z0(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function LD(n,e){return e}class Kr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||LD}}let uu=null;function lu(){if(uu)return uu;const n=[];n.push(new Kr("bucket")),n.push(new Kr("generation")),n.push(new Kr("metageneration")),n.push(new Kr("name","fullPath",!0));const t=new Kr("name");t.xform=function e(a,l){return function UD(n){return!Xg(n)||n.length<2?n:z0(n)}(l)},n.push(t);const i=new Kr("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Kr("timeCreated")),n.push(new Kr("updated")),n.push(new Kr("md5Hash",null,!0)),n.push(new Kr("cacheControl",null,!0)),n.push(new Kr("contentDisposition",null,!0)),n.push(new Kr("contentEncoding",null,!0)),n.push(new Kr("contentLanguage",null,!0)),n.push(new Kr("contentType",null,!0)),n.push(new Kr("metadata","customMetadata",!0)),uu=n,uu}function rm(n,e,t){const r=Yy(e);return null===r?null:function BD(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function VD(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ti(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function bc(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const gi="prefixes";class ao{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wi(n){if(!n)throw Ec()}function cu(n,e){return function t(r,i){const a=rm(n,i,e);return Wi(null!==a),a}}function No(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function O0(){return new rr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function k0(){return new rr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function jy(n){return new rr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function F0(n){return new rr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function fa(n){const e=No(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function bD(n){return new rr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Tc(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ao(i,"GET",cu(n,t),l);return h.errorHandler=fa(e),h}function qd(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ca(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new ao(h,"GET",function $d(n,e){return function t(r,i){const a=function oo(n,e,t){const r=Yy(t);return null===r?null:function im(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[gi])for(const i of t[gi]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Ti(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ti(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Wi(null!==a),a}}(n,e.bucket),v);return T.urlParams=a,T.errorHandler=No(e),T}function Qy(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Q0(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Nf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Wi(!1)}return Wi(!!t&&-1!==(e||["active"]).indexOf(t)),t}const X0={STATE_CHANGED:"state_changed"},Di={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ev(n){switch(n){case"running":case"pausing":case"canceling":return Di.RUNNING;case"paused":return Di.PAUSED;case"success":return Di.SUCCESS;case"canceled":return Di.CANCELED;default:return Di.ERROR}}class $D{constructor(e,t,r){if(function H0(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Sc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class GD extends class tC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=au.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=au.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=au.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Mf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Mf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Po(){return new GD}class nC{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function J0(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Qy(e,r,i),h={name:l.fullPath},m=ca(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=bc(l,t),q=new ao(m,"POST",function U(we){let Pe;sm(we);try{Pe=we.getResponseHeader("X-Goog-Upload-URL")}catch(tt){Wi(!1)}return Wi(Xg(Pe)),Pe},n.maxUploadRetryTime);return q.urlParams=h,q.headers=T,q.body=S,q.errorHandler=No(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Po,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function jD(n,e,t,r){const m=new ao(t,"POST",function a(v){const T=sm(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){Wi(!1)}S||Wi(!1);const N=Number(S);return Wi(!isNaN(N)),new Nf(N,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=No(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Po,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Nf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function HD(n,e,t,r,i,a,l,h){const m=new Nf(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function U0(){return new rr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let T=v;i>0&&(T=Math.min(T,i));const S=m.current,q={"X-Goog-Upload-Command":T===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},we=r.slice(S,S+T);if(null===we)throw Cc();const Ct=new ao(t,"POST",function Pe(dt,wn){const Li=sm(dt,["active","final"]),Wh=m.current+T,ME=r.size();let $M;return $M="final"===Li?cu(e,a)(dt,wn):null,new Nf(Wh,ME,"final"===Li,$M)},e.maxUploadRetryTime);return Ct.headers=q,Ct.body=we.uploadData(),Ct.progressCallback=h||null,Ct.errorHandler=No(n),Ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Po,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Tc(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Po,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Jy(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let Ct="";for(let dt=0;dt<2;dt++)Ct+=Math.random().toString().slice(2);return Ct}();l["Content-Type"]="multipart/related; boundary="+m;const v=Qy(e,r,i),T=bc(v,t),U=da.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===U)throw Cc();const q={name:v.fullPath},we=ca(a,n.host,n._protocol),tt=n.maxUploadRetryTime,vt=new ao(we,"POST",cu(n,t),tt);return vt.urlParams=q,vt.headers=l,vt.body=U.uploadData(),vt.errorHandler=No(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Po,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Jg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ev(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new $D(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ev(this._state)){case Di.SUCCESS:Sc(this._resolve.bind(null,this.snapshot))();break;case Di.CANCELED:case Di.ERROR:Sc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ev(this._state)){case Di.RUNNING:case Di.PAUSED:e.next&&Sc(e.next.bind(e,this.snapshot))();break;case Di.SUCCESS:e.complete&&Sc(e.complete.bind(e))();break;default:e.error&&Sc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wd{constructor(e,t){this._service=e,this._location=t instanceof Ti?t:Ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wd(e,t)}get root(){const e=new Ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z0(this._location.path)}get storage(){return this._service}get parent(){const e=function OD(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ti(this._location.bucket,e);return new Wd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw V0(e)}}function Ac(n,e,t){return rv.apply(this,arguments)}function rv(){return(rv=(0,ve.Z)(function*(n,e,t){const i=yield iv(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Ac(n,e,i.nextPageToken))})).apply(this,arguments)}function iv(n,e){null!=e&&"number"==typeof e.maxResults&&Gy("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qd(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Po)}function om(n){n._throwIfRoot("getDownloadURL");const e=function K0(n,e,t){const i=ca(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ao(i,"GET",function Gd(n,e){return function t(r,i){const a=rm(n,i,e);return Wi(null!==a),function ha(n,e,t,r){const i=Yy(e);if(null===i||!Xg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ca("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+xD({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=fa(e),h}(n.storage,n._location,lu());return n.storage.makeRequestWithTokens(e,Po).then(t=>{if(null===t)throw function AD(){return new rr("no-download-url","The given file does not have any download URLs.")}();return t})}function sv(n,e){const t=function FD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ti(n._location.bucket,t);return new Wd(n.storage,r)}function oC(n,e){if(n instanceof ov){const t=n;if(null==t._bucket)throw function L0(){return new rr("no-default-bucket","No default bucket found. Did you set the '"+P0+"' property when initializing the app?")}();const r=new Wd(t,t._bucket);return null!=e?oC(r,e):r}return void 0!==e?sv(n,e):n}function QD(n,e){if(e&&function ZD(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ov)return function YD(n,e){return new Wd(n,e)}(n,e);throw Hd("To use ref(service, url), the first argument must be a Storage instance.")}return oC(n,e)}function aC(n,e){const t=null==e?void 0:e[P0];return null==t?null:Ti.makeFromBucketSpec(t,n)}class ov{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=N0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ti.makeFromBucketSpec(i,this._host):aC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ti.makeFromBucketSpec(this._url,e):aC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wd(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new io(Ic());{const a=function q0(n,e,t,r,i,a){const l=xD(n.urlParams),h=n.url+l,m=Object.assign({},n.headers);return function qy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function yN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function vN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function MD(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new RD(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const av="@firebase/storage";function kf(n,e){return QD(n=(0,k.m9)(n),e)}function fC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ov(t,r,i,e,On.SDK_VERSION)}!function pC(){(0,On._registerComponent)(new ro.wA("storage",fC,"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(av,"0.9.2",""),(0,On.registerVersion)(av,"0.9.2","esm2017")}();class zd{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hv{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zd(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new zd(l,this,this._ref)):{next:t.next?l=>t.next(new zd(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class fv{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ko(e,this._service))}get items(){return this._delegate.items.map(e=>new ko(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ko{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dv(n,e){return sv(n,e)}(this._delegate,e);return new ko(t,this.storage)}get root(){return new ko(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ko(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new hv(function SN(n,e,t){return function iC(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new nC(n,new da(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=so.RAW,r){this._throwIfRoot("putString");const i=nm(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new hv(new nC(this._delegate,new da(i.data,!0),a),this)}listAll(){return function cv(n){return function WD(n){const e={prefixes:[],items:[]};return Ac(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new fv(e,this.storage))}list(e){return function lv(n,e){return iv(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new fv(t,this.storage))}getMetadata(){return function Pf(n){return function zD(n){n._throwIfRoot("getMetadata");const e=Tc(n.storage,n._location,lu());return n.storage.makeRequestWithTokens(e,Po)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function cC(n,e){return function sC(n,e){n._throwIfRoot("updateMetadata");const t=function Z0(n,e,t,r){const a=ca(e.fullServerUrl(),n.host,n._protocol),h=bc(t,r),v=n.maxOperationRetryTime,T=new ao(a,"PATCH",cu(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=h,T.errorHandler=fa(e),T}(n.storage,n._location,e,lu());return n.storage.makeRequestWithTokens(t,Po)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function JD(n){return om(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function um(n){return function KD(n){n._throwIfRoot("deleteObject");const e=function Y0(n,e){const r=ca(e.fullServerUrl(),n.host,n._protocol),h=new ao(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=fa(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Po)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw V0(e)}}class pv{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gC(e))throw Hd("ref() expected a child path but got a URL, use refFromURL instead.");return new ko(kf(this._delegate,e),this)}refFromURL(e){if(!gC(e))throw Hd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ti.makeFromUrl(e,this._delegate.host)}catch(t){throw Hd("refFromUrl() expected a valid full URL but got an invalid one.")}return new ko(kf(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function XD(n,e,t,r={}){!function uC(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function gC(n){return/^[A-Za-z]+:\/\//.test(n)}function eS(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new pv(t,r)}function yC(n){const e=function nS(n){return new xn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function ou(n,e=Qg.z){return(0,Rr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);h()}t.subscribe((0,un.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,_t.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Kd(n){return{getDownloadURL:()=>et(void 0).pipe(ln.fc,Dn(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>et(void 0).pipe(ln.fc,Dn(()=>n.getMetadata()),ln.iC),delete:()=>(0,_n.D)(n.delete()),child:e=>Kd(n.child(e)),updateMetadata:e=>(0,_n.D)(n.updateMetadata(e)),put:(e,t)=>yC(n.put(e,t)),putString:(e,t,r)=>yC(n.putString(e,t,r)),list:e=>(0,_n.D)(n.list(e)),listAll:()=>(0,_n.D)(n.listAll())}}!function tS(n){const e={TaskState:Di,TaskEvent:X0,StringFormat:so,Storage:pv,Reference:ko};n.INTERNAL.registerComponent(new ro.wA("storage-compat",eS,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(jd.Z);const mv=new p.OlP("angularfire2.storageBucket"),vC=new p.OlP("angularfire2.storage.maxUploadRetryTime"),wC=new p.OlP("angularfire2.storage.maxOperationRetryTime"),EC=new p.OlP("angularfire2.storage.use-emulator");let CC=(()=>{class n{constructor(t,r,i,a,l,h,m,v,T,S){const N=(0,Vr.on)(t,l,r);this.storage=(0,Vr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const U=l.runOutsideAngular(()=>N.storage(i||void 0)),q=T;return q&&U.useEmulator(...q),m&&U.setMaxUploadRetryTime(m),v&&U.setMaxOperationRetryTime(v),U},[m,v])}ref(t){return Kd(this.storage.ref(t))}refFromURL(t){return Kd(this.storage.refFromURL(t))}upload(t,r,i){return Kd(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(mv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ln.HU),p.LFG(vC,8),p.LFG(wC,8),p.LFG(EC,8),p.LFG(hs,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),bC=(()=>{class n{constructor(){Vd.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[CC],imports:[IC]}),n})();function lm(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,un.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function iS(n,e=as.y){return n=null!=n?n:sS,(0,Rr.e)((t,r)=>{let i,a=!0;t.subscribe((0,un.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function sS(n,e){return n===e}O(5881);var Ge,TC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},du={},cm=cm||{},Rt=TC||self;function dm(){}function hm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Of(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fm="closure_uid_"+(1e9*Math.random()>>>0),Zd=0;function oS(n,e,t){return n.call.apply(n.bind,arguments)}function aS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oS:aS).apply(null,arguments)}function pm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function xc(){this.s=this.s,this.o=this.o}var _v={};xc.prototype.s=!1,xc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function DC(n){return Object.prototype.hasOwnProperty.call(n,fm)&&n[fm]||(n[fm]=++Zd)}(this);delete _v[n]}},xc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Oo=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},AC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Fo(n){return Array.prototype.concat.apply([],arguments)}function Os(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fs(n){return/^[\s\xa0]*$/.test(n)}var zi,yv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Si(n,e){return-1!=n.indexOf(e)}function vv(n,e){return n<e?-1:n>e?1:0}e:{var xC=Rt.navigator;if(xC){var RC=xC.userAgent;if(RC){zi=RC;break e}}zi=""}function Ff(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yd(n){const e={};for(const t in n)e[t]=n[t];return e}var MC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<MC.length;a++)t=MC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ev(n){return Ev[" "](n),n}Ev[" "]=dm;var Uf,n,PC=Si(zi,"Opera"),hu=Si(zi,"Trident")||Si(zi,"MSIE"),kC=Si(zi,"Edge"),gm=kC||hu,Cv=Si(zi,"Gecko")&&!(Si(zi.toLowerCase(),"webkit")&&!Si(zi,"Edge"))&&!(Si(zi,"Trident")||Si(zi,"MSIE"))&&!Si(zi,"Edge"),Iv=Si(zi.toLowerCase(),"webkit")&&!Si(zi,"Edge");function Lf(){var n=Rt.document;return n?n.documentMode:void 0}e:{var mm="",_m=(n=zi,Cv?/rv:([^\);]+)(\)|;)/.exec(n):kC?/Edge\/([\d\.]+)/.exec(n):hu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Iv?/WebKit\/(\S+)/.exec(n):PC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_m&&(mm=_m?_m[1]:""),hu){var ym=Lf();if(null!=ym&&ym>parseFloat(mm)){Uf=String(ym);break e}}Uf=mm}var OC={};var lS=Rt.document&&hu&&(Lf()||parseInt(Uf,10))||void 0,cS=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",dm,e),Rt.removeEventListener("test",dm,e)}catch(t){}return n}();function Ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Vf(n,e){if(Ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cv){e:{try{Ev(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vf.Z.h.call(this)}}Ai.prototype.h=function(){this.defaultPrevented=!0},Yr(Vf,Ai);var dS={2:"touch",3:"pen",4:"mouse"};Vf.prototype.h=function(){Vf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bf="closure_listenable_"+(1e6*Math.random()|0),hS=0;function fS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++hS,this.ca=this.fa=!1}function wm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Em(n){this.src=n,this.g={},this.h=0}function Tv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Oo(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(wm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Em.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Dv(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new fS(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Sv="closure_lm_"+(1e6*Math.random()|0),Av={};function LC(n,e,t,r,i){if(r&&r.once)return VC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)LC(n,e[a],t,r,i);return null}return t=Tm(t),n&&n[Bf]?n.N(e,t,Of(r)?!!r.capture:!!r,i):UC(n,e,t,!1,r,i)}function UC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Of(i)?!!i.capture:!!i,h=Im(n);if(h||(n[Sv]=h=new Em(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function pS(){var e=BC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Rv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function VC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)VC(n,e[a],t,r,i);return null}return t=Tm(t),n&&n[Bf]?n.O(e,t,Of(r)?!!r.capture:!!r,i):UC(n,e,t,!0,r,i)}function xv(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)xv(n,e[a],t,r,i);else r=Of(r)?!!r.capture:!!r,t=Tm(t),n&&n[Bf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dv(a=n.g[e],t,r,i))&&(wm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Im(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dv(e,t,r,i)),(t=-1<n?e[n]:null)&&Cm(t))}function Cm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Bf])Tv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Rv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Im(e))?(Tv(t,n),0==t.h&&(t.src=null,e[Sv]=null)):wm(n)}}}function Rv(n){return n in Av?Av[n]:Av[n]="on"+n}function BC(n,e){if(n.ca)n=!0;else{e=new Vf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Cm(n),n=t.call(r,e)}return n}function Im(n){return(n=n[Sv])instanceof Em?n:null}var bm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tm(n){return"function"==typeof n?n:(n[bm]||(n[bm]=function(e){return n.handleEvent(e)}),n[bm])}function Br(){xc.call(this),this.i=new Em(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ai(e,n);else if(e instanceof Ai)e.target=e.target||n;else{var i=e;wv(e=new Ai(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=jf(l,r,!0,e)&&i}if(i=jf(l=e.g=n,r,!0,e)&&i,i=jf(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=jf(l=e.g=t[a],r,!1,e)&&i}function jf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,m=l.ia||l.src;l.fa&&Tv(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Yr(Br,xc),Br.prototype[Bf]=!0,Br.prototype.removeEventListener=function(n,e,t,r){xv(this,n,e,t,r)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wm(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Dm=Rt.JSON.stringify;function Rc(){var n=mS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var HC,jC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Qd,n=>n.reset());class Qd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xN(n){Rt.setTimeout(()=>{throw n},0)}function Hf(n,e){HC||function $C(){var n=Rt.Promise.resolve(void 0);HC=function(){n.then(Et)}}(),Sm||(HC(),Sm=!0),mS.add(n,e)}var Sm=!1,mS=new class gS{constructor(){this.h=this.g=null}add(e,t){const r=jC.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Et(){for(var n;n=Rc();){try{n.h.call(n.g)}catch(t){xN(t)}var e=jC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sm=!1}function Am(n,e){Br.call(this),this.h=n||1,this.g=e||Rt,this.j=Zr(this.kb,this),this.l=Date.now()}function Mv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Nv(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function $f(n){n.g=Nv(()=>{n.g=null,n.i&&(n.i=!1,$f(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(Am,Br),(Ge=Am.prototype).da=!1,Ge.S=null,Ge.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(Mv(this),this.start()))}},Ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.M=function(){Am.Z.M.call(this),Mv(this),delete this.g};class _S extends xc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$f(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pl(n){xc.call(this),this.h=n,this.g={}}Yr(pl,xc);var Gf=[];function ir(n,e,t,r){Array.isArray(t)||(t&&(Gf[0]=t.toString()),t=Gf);for(var i=0;i<t.length;i++){var a=LC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function yS(n){Ff(n.g,function(e,t){this.g.hasOwnProperty(t)&&Cm(e)},n),n.g={}}function qf(){this.g=!0}function Mc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Dm(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}pl.prototype.M=function(){pl.Z.M.call(this),yS(this)},pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qf.prototype.Aa=function(){this.g=!1},qf.prototype.info=function(){};var gl={},WC=null;function xm(){return WC=WC||new Br}function zC(n){Ai.call(this,gl.Ma,n)}function fu(n){const e=xm();Qr(e,new zC(e,n))}function KC(n,e){Ai.call(this,gl.STAT_EVENT,n),this.stat=e}function Ki(n){const e=xm();Qr(e,new KC(e,n))}function ZC(n,e){Ai.call(this,gl.Na,n),this.size=e}function ml(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}gl.Ma="serverreachability",Yr(zC,Ai),gl.STAT_EVENT="statevent",Yr(KC,Ai),gl.Na="timingevent",Yr(ZC,Ai);var Wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Pv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Rm(){}function Jd(){}Rm.prototype.h=null;var Fv,pu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function kv(){Ai.call(this,"d")}function Ov(){Ai.call(this,"c")}function zf(){}function Xd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new pl(this),this.P=ES,this.W=new Am(n=gm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Lv}function Lv(){this.i=null,this.g="",this.h=!1}Yr(kv,Ai),Yr(Ov,Ai),Yr(zf,Rm),zf.prototype.g=function(){return new XMLHttpRequest},zf.prototype.i=function(){return{}},Fv=new zf;var ES=45e3,Mm={},Nm={};function Uv(n,e,t){n.K=1,n.v=Qf(ps(e)),n.s=t,n.U=!0,CS(n,null)}function CS(n,e){n.F=Date.now(),eh(n),n.A=ps(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Lv,n.g=_I(n.l,t?e:null,!n.s),0<n.O&&(n.L=new _S(Zr(n.Ia,n,n.g),n.O)),ir(n.V,n.g,"readystatechange",n.gb),e=n.H?Yd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),fu(1),function vS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var T=v[0];v=v[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+v+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function IS(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function bS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=RN(n,t),i==Nm){4==e&&(n.o=4,Ki(14),r=!1),Mc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Mm){n.o=4,Ki(15),Mc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mc(n.j,n.m,i,null),Nc(n,i)}IS(n)&&i!=Nm&&i!=Mm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),gI(e),e.L=!0,Ki(11))):(Mc(n.j,n.m,t,"[Invalid Chunked Response]"),_l(n),Zf(n))}function RN(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Nm:(t=Number(e.substring(t,r)),isNaN(t)?Mm:(r+=1)+t>e.length?Nm:(e=e.substr(r,t),n.C=r+t,e))}function eh(n){n.Y=Date.now()+n.P,Kf(n,n.P)}function Kf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ml(Zr(n.eb,n),e)}function Pm(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Zf(n){0==n.l.G||n.I||Lc(n.l,n)}function _l(n){Pm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mv(n.W),yS(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Nc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wv(t.i,n)))if(t.I=n.N,!n.J&&Wv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ml(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Vm(t),Fc(t)}nw(t),Ki(18)}if(1>=iI(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else uo(t,11)}else if((n.J||t.g==n)&&Vm(t),!fs(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const T=v[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;!a.g&&(Si(q,"spdy")||Si(q,"quic")||Si(q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Fm(a,a.h),a.h=null))}if(r.D){const we=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.sa=we,Wn(r.F,r.D,we))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=iw(r,r.H?r.la:null,r.W),l.J){sI(r.i,l);var h=l,m=r.K;m&&h.setTimeout(m),h.B&&(Pm(h),eh(h)),r.g=l}else Um(r);0<t.l.length&&ip(t)}else"stop"!=v[0]&&"close"!=v[0]||uo(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?uo(t,7):rp(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}fu(4)}catch(v){}}function Vv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hm(n)||"string"==typeof n)AC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(hm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function TS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function th(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof th)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Bv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Pc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Pc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Pc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ge=Xd.prototype).setTimeout=function(n){this.P=n},Ge.gb=function(n){n=n.target;const e=this.L;e&&3==gu(n)?e.l():this.Ia(n)},Ge.Ia=function(n){try{if(n==this.g)e:{const T=gu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||gm||this.g&&(this.h.h||this.g.ga()||dI(this.g)))){this.I||4!=T||7==e||fu(8==e||0>=S?3:2),Pm(this);var t=this.g.ba();this.N=t;t:if(IS(this)){var r=dI(this.g);n="";var i=r.length,a=4==gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_l(this),Zf(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function wS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fs(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Ki(12),_l(this),Zf(this);break e}Mc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nc(this,t)}this.U?(bS(this,T,l),gm&&this.i&&3==T&&(ir(this.V,this.W,"tick",this.fb),this.W.start())):(Mc(this.j,this.m,l,null),Nc(this,l)),4==T&&_l(this),this.i&&!this.I&&(4==T?Lc(this.l,this):(this.i=!1,eh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),_l(this),Zf(this)}}}catch(T){}},Ge.fb=function(){if(this.g){var n=gu(this.g),e=this.g.ga();this.C<e.length&&(Pm(this),bS(this,n,e),this.i&&4!=n&&eh(this))}},Ge.cancel=function(){this.I=!0,_l(this)},Ge.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function GC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fu(3),Ki(17)),_l(this),this.o=2,Zf(this)):Kf(this,this.Y-n)},(Ge=th.prototype).R=function(){Bv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ge.T=function(){return Bv(this),this.g.concat()},Ge.get=function(n,e){return Pc(this.h,n)?this.h[n]:e},Ge.set=function(n,e){Pc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ge.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var jv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof kc){this.g=void 0!==e?e:n.g,km(this,n.j),this.s=n.s,Yf(this,n.i),Om(this,n.m),this.l=n.l,e=n.h;var t=new rh;t.i=e.i,e.g&&(t.g=new th(e.g),t.h=e.h),Hv(this,t),this.o=n.o}else n&&(t=String(n).match(jv))?(this.g=!!e,km(this,t[1]||"",!0),this.s=Jf(t[2]||""),Yf(this,t[3]||"",!0),Om(this,t[4]),this.l=Jf(t[5]||"",!0),Hv(this,t[6]||"",!0),this.o=Jf(t[7]||"")):(this.g=!!e,this.h=new rh(null,this.g))}function ps(n){return new kc(n)}function km(n,e,t){n.j=t?Jf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yf(n,e,t){n.i=t?Jf(e,!0):e}function Om(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hv(n,e,t){e instanceof rh?(n.h=e,function MS(n,e){e&&!n.j&&(yl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(XC(this,r),tI(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=nh(e,Gv)),n.h=new rh(e,n.g))}function Wn(n,e,t){n.h.set(e,t)}function Qf(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,QC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nh(e,JC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nh(e,JC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(nh(t,"/"==t.charAt(0)?xS:AS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nh(t,RS)),n.join("")};var JC=/[#\/\?@]/g,AS=/[#\?:]/g,xS=/[#\?]/g,Gv=/[#\?@]/g,RS=/#/g;function rh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function yl(n){n.g||(n.g=new th,n.h=0,n.i&&function DS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function XC(n,e){yl(n),e=ih(n,e),Pc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Pc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Bv(n)))}function eI(n,e){return yl(n),e=ih(n,e),Pc(n.g.h,e)}function tI(n,e,t){XC(n,e),0<t.length&&(n.i=null,n.g.set(ih(n,e),Os(t)),n.h+=t.length)}function ih(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nI(n){this.l=n||rI,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=rh.prototype).add=function(n,e){yl(this),this.i=null,n=ih(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ge.forEach=function(n,e){yl(this),this.g.forEach(function(t,r){AC(t,function(i){n.call(e,i,r,this)},this)},this)},Ge.T=function(){yl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Ge.R=function(n){yl(this);var e=[];if("string"==typeof n)eI(this,n)&&(e=Fo(e,this.g.get(ih(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Fo(e,n[t])}return e},Ge.set=function(n,e){return yl(this),this.i=null,eI(this,n=ih(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ge.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var rI=10;function qv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iI(n){return n.h?1:n.g?n.g.size:0}function Wv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Fm(n,e){n.g?n.g.add(e):n.h=e}function sI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function oI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Os(n.i)}function zv(){}function Kv(){this.g=new zv}function Zv(n,e,t){const r=t||"";try{Vv(n,function(i,a){let l=i;Of(i)&&(l=Dm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Xf(n){this.l=n.$b||null,this.j=n.ib||!1}function Lm(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ep,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nI.prototype.cancel=function(){if(this.i=oI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},zv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Yr(Xf,Rm),Xf.prototype.g=function(){return new Lm(this.l,this.j)},Xf.prototype.i=function(n){return function(){return n}}({}),Yr(Lm,Br);var ep=0;function uI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function oh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tp(n)}function tp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ge=Lm.prototype).open=function(n,e){if(this.readyState!=ep)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tp(this)},Ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oh(this)),this.readyState=ep},Ge.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tp(this)),this.g&&(this.readyState=3,tp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ge.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?oh(this):tp(this),3==this.readyState&&uI(this)}},Ge.Ua=function(n){this.g&&(this.response=this.responseText=n,oh(this))},Ge.Ta=function(n){this.g&&(this.response=n,oh(this))},Ge.ha=function(){this.g&&oh(this)},Ge.setRequestHeader=function(n,e){this.v.append(n,e)},Ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Lm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lI=Rt.JSON.parse;function Nr(n){Br.call(this),this.headers=new th,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yv,this.K=this.L=!1}Yr(Nr,Br);var Yv="",MN=/^https?$/i,PS=["POST","PUT"];function kS(n){return"content-type"==n.toLowerCase()}function Oc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ah(n),Qv(n)}function ah(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function cI(n){if(n.h&&void 0!==cm&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))Nv(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==gu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(jv)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!MN.test(i?i.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var l=2<gu(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.ba()+"]",ah(n)}}finally{Qv(n)}}}function Qv(n,e){if(n.g){Jv(n);const t=n.g,r=n.C[0]?dm:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Jv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function dI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function OS(n){let e="";return Ff(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ew(n){this.za=0,this.l=[],this.h=new qf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uh("baseRetryDelayMs",5e3,n),this.$a=uh("retryDelaySeedMs",1e4,n),this.Ya=uh("forwardChannelMaxRetries",2,n),this.ra=uh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new nI(n&&n.concurrentRequestLimit),this.Ca=new Kv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rp(n){if(lh(n),3==n.G){var e=n.V++,t=ps(n.F);Wn(t,"SID",n.J),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),sp(n,t),(e=new Xd(n,n.h,e,void 0)).K=2,e.v=Qf(ps(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_I(e.l,null),e.g.ea(e.v)),e.F=Date.now(),eh(e)}FS(n)}function Fc(n){n.g&&(gI(n),n.g.cancel(),n.g=null)}function lh(n){Fc(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Vm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function tw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ip(n)}function ip(n){qv(n.i)||n.m||(n.m=!0,Hf(n.Ha,n),n.C=0)}function fI(n,e){var t;t=e?e.m:n.V++;const r=ps(n.F);Wn(r,"SID",n.J),Wn(r,"RID",t),Wn(r,"AID",n.U),sp(n,r),n.o&&n.s&&Xv(r,n.o,n.s),t=new Xd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=pI(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Fm(n.i,t),Uv(t,r,e)}function sp(n,e){n.j&&Vv({},function(t,r){Wn(e,r,t)})}function pI(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const T=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),h=!1;else try{Zv(T,l,"req"+v+"_")}catch(S){r&&r(T)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Um(n){n.g||n.u||(n.Y=1,Hf(n.Ga,n),n.A=0)}function nw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ml(Zr(n.Ga,n),rw(n,n.A)),n.A++,0))}function gI(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function mI(n){n.g=new Xd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ps(n.oa);Wn(e,"RID","rpc"),Wn(e,"SID",n.J),Wn(e,"CI",n.N?"0":"1"),Wn(e,"AID",n.U),sp(n,e),Wn(e,"TYPE","xmlhttp"),n.o&&n.s&&Xv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Qf(ps(e)),t.s=null,t.U=!0,CS(t,n)}function Vm(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Lc(n,e){var t=null;if(n.g==e){Vm(n),gI(n),n.g=null;var r=2}else{if(!Wv(n.i,e))return;t=e.D,sI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Qr(r=xm(),new ZC(r,t,e,i)),ip(n)}else Um(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function hI(n,e){return!(iI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ml(Zr(n.Ha,n,e),rw(n,n.C)),n.C++,0)))}(n,e)||2==r&&nw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:uo(n,5);break;case 4:uo(n,10);break;case 3:uo(n,6);break;default:uo(n,2)}}function rw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function uo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zr(n.jb,n);t||(t=new kc("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||km(t,"https"),Qf(t)),function aI(n,e){const t=new qf;if(Rt.Image){const r=new Image;r.onload=pm(sh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pm(sh,t,r,"TestLoadImage: error",!1,e),r.onabort=pm(sh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pm(sh,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.G=0,n.j&&n.j.va(e),FS(n),lh(n)}function FS(n){n.G=0,n.I=-1,n.j&&((0!=oI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Os(n.l),n.l.length=0),n.j.ua())}function iw(n,e,t){let r=function SS(n){return n instanceof kc?ps(n):new kc(n,void 0)}(t);if(""!=r.i)e&&Yf(r,e+"."+r.i),Om(r,r.m);else{const i=Rt.location;r=function $v(n,e,t,r){var i=new kc(null,void 0);return n&&km(i,n),e&&Yf(i,e),t&&Om(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Ff(n.aa,function(i,a){Wn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Wn(r,e,t),Wn(r,"VER",n.ma),sp(n,r),r}function _I(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nr(t&&n.Ba&&!n.qa?new Xf({ib:!0}):n.qa)).L=n.H,e}function LS(){}function op(){if(hu&&!(10<=Number(lS)))throw Error("Environmental error: no available transport.")}function lo(n,e){Br.call(this),this.g=new ew(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fs(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fs(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ch(this)}function sw(n){kv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bm(){Ov.call(this),this.status=1}function ch(n){this.g=n}(Ge=Nr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fv.g(),this.C=function YC(n){return n.h||(n.h=n.i())}(this.u?this.u:Fv),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Oc(this,a)}n=t||"";const i=new th(this.headers);r&&Vv(r,function(a,l){i.set(l,a)}),r=function uS(n){e:{var e=kS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=Oo(PS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jv(this),0<this.B&&((this.K=function np(n){return hu&&function FC(){return function NC(n){var e=OC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=yv(String(Uf)).split("."),t=yv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=vv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||vv(0==i[2].length,0==a[2].length)||vv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=Nv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Oc(this,a)}},Ge.pa=function(){void 0!==cm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},Ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),Qv(this))},Ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qv(this,!0)),Nr.Z.M.call(this)},Ge.Fa=function(){this.s||(this.F||this.v||this.l?cI(this):this.cb())},Ge.cb=function(){cI(this)},Ge.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch(n){return-1}},Ge.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ge.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lI(e)}},Ge.Da=function(){return this.m},Ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=ew.prototype).ma=8,Ge.G=1,Ge.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ge.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Xd(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Yd(a),wv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pI(this,i,e),Wn(t=ps(this.F),"RID",n),Wn(t,"CVER",22),this.D&&Wn(t,"X-HTTP-Session-Id",this.D),sp(this,t),this.o&&a&&Xv(t,this.o,a),Fm(this.i,i),this.Ra&&Wn(t,"TYPE","init"),this.ja?(Wn(t,"$req",e),Wn(t,"SID","null"),i.$=!0,Uv(i,t,null)):Uv(i,t,e),this.G=2}}else 3==this.G&&(n?fI(this,n):0==this.l.length||qv(this.i)||fI(this))},Ge.Ga=function(){if(this.u=null,mI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ml(Zr(this.bb,this),n)}},Ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ki(10),Fc(this),mI(this))},Ge.ab=function(){null!=this.v&&(this.v=null,Fc(this),nw(this),Ki(19))},Ge.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ki(2)):(this.h.info("Failed to ping google.com"),Ki(1))},(Ge=LS.prototype).xa=function(){},Ge.wa=function(){},Ge.va=function(){},Ge.ua=function(){},Ge.Oa=function(){},op.prototype.g=function(n,e){return new lo(n,e)},Yr(lo,Br),lo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hf(Zr(n.hb,n,e))),Ki(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=iw(n,null,n.W),ip(n)},lo.prototype.close=function(){rp(this.g)},lo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,tw(this.g,e)}else this.v?((e={}).__data__=Dm(n),tw(this.g,e)):tw(this.g,n)},lo.prototype.M=function(){this.g.j=null,delete this.j,rp(this.g),delete this.g,lo.Z.M.call(this)},Yr(sw,kv),Yr(Bm,Ov),Yr(ch,LS),ch.prototype.xa=function(){Qr(this.g,"a")},ch.prototype.wa=function(n){Qr(this.g,new sw(n))},ch.prototype.va=function(n){Qr(this.g,new Bm(n))},ch.prototype.ua=function(){Qr(this.g,"b")},op.prototype.createWebChannel=op.prototype.g,lo.prototype.send=lo.prototype.u,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,Wf.NO_ERROR=0,Wf.TIMEOUT=8,Wf.HTTP_ERROR=6,Pv.COMPLETE="complete",Jd.EventType=pu,pu.OPEN="a",pu.CLOSE="b",pu.ERROR="c",pu.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Nr.prototype.listenOnce=Nr.prototype.O,Nr.prototype.getLastError=Nr.prototype.La,Nr.prototype.getLastErrorCode=Nr.prototype.Da,Nr.prototype.getStatus=Nr.prototype.ba,Nr.prototype.getResponseJson=Nr.prototype.Qa,Nr.prototype.getResponseText=Nr.prototype.ga,Nr.prototype.send=Nr.prototype.ea;var US=du.createWebChannelTransport=function(){return new op},VS=du.getStatEventTarget=function(){return xm()},ow=du.ErrorCode=Wf,BS=du.EventType=Pv,jS=du.Event=gl,yI=du.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HS=du.FetchXmlHttpFactory=Xf,jm=du.WebChannel=Jd,$S=du.XhrIo=Nr;const dh="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Uc="9.6.7";const mu=new ks.Yd("@firebase/firestore");function Hm(){return mu.logLevel}function Be(n,...e){if(mu.logLevel<=ks.in.DEBUG){const t=e.map(aw);mu.debug(`Firestore (${Uc}): ${n}`,...t)}}function Pr(n,...e){if(mu.logLevel<=ks.in.ERROR){const t=e.map(aw);mu.error(`Firestore (${Uc}): ${n}`,...t)}}function ap(n,...e){if(mu.logLevel<=ks.in.WARN){const t=e.map(aw);mu.warn(`Firestore (${Uc}): ${n}`,...t)}}function aw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function Dt(n,e){n||ct()}function We(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class up{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qS{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Sn,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,ve.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Sn)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new wI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Jr(e)}}class WS{constructor(e,t,r){this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new WS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $m{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new lp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function EI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Fs.A=-1;class lw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=EI(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Vc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function CI(n){return n+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Xr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Gm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _u(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Bc{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const KS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends Bc{construct(e,t,r){return new ei(e,t,r)}static isValidIdentifier(e){return KS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ei(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ke(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ke(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ei(t)}static emptyPath(){return new ei([])}}class hh{constructor(e){this.fields=e,e.sort(ei.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const dw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yu(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=dw.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vl(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function qm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function II(n){const e=n.mapValue.fields.__previous_value__;return qm(e)?II(e):e}function fh(n){const e=yu(n.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}class bI{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class jc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}function wl(n){return null==n}function cp(n){return 0===n&&1/n==-1/0}function xi(n){return"number"==typeof n&&Number.isInteger(n)&&!cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(tn.fromString(e))}static fromName(e){return new Xe(tn.fromString(e).popFirst(5))}static empty(){return new Xe(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new tn(e.slice()))}}const YS={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Hc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qm(n)?4:10:ct()}function pa(n,e){if(n===e)return!0;const t=Hc(n);if(t!==Hc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fh(n).isEqual(fh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=yu(r.timestampValue),l=yu(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,vl(n.bytesValue).isEqual(vl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return pr(r.geoPointValue.latitude)===pr(i.geoPointValue.latitude)&&pr(r.geoPointValue.longitude)===pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pr(r.integerValue)===pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=pr(r.doubleValue),l=pr(i.doubleValue);return a===l?cp(a)===cp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Vc(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Gm(a)!==Gm(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!pa(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function vu(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function ph(n,e){if(n===e)return 0;const t=Hc(n),r=Hc(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=pr(i.integerValue||i.doubleValue),h=pr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Wm(n.timestampValue,e.timestampValue);case 4:return Wm(fh(n),fh(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,a){const l=vl(i),h=vl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=Ht(l[m],h[m]);if(0!==v)return v}return Ht(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ht(pr(i.latitude),pr(a.latitude));return 0!==l?l:Ht(pr(i.longitude),pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=ph(l[m],h[m]);if(v)return v}return Ht(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let T=0;T<h.length&&T<v.length;++T){const S=Ht(h[T],v[T]);if(0!==S)return S;const N=ph(l[h[T]],m[v[T]]);if(0!==N)return N}return Ht(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Wm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=yu(n),r=yu(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function gh(n){return zm(n)}function zm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=zm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${zm(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function Km(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hw(n){return!!n&&"integerValue"in n}function mh(n){return!!n&&"arrayValue"in n}function fw(n){return!!n&&"nullValue"in n}function pw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $c(n){return!!n&&"mapValue"in n}function Gc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _u(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gc(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$c(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(t)}setAll(e){let t=ei.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Gc(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());$c(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_u(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Zi(Gc(this.value))}}function gw(n){const e=[];return _u(n.fields,(t,r)=>{const i=new ei([t]);if($c(r)){const a=gw(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new hh(e)}class sr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new sr(e,0,It.min(),It.min(),Zi.empty(),0)}static newFoundDocument(e,t,r){return new sr(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new sr(e,2,t,It.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,It.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Zm=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class qc{constructor(e,t){this.fieldPath=e,this.kind=t}}class _h{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _h(0,Ym.min())}}class Ym{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ym(It.min(),Xe.empty(),-1)}}class mw{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function Qm(n,e=null,t=[],r=[],i=null,a=null,l=null){return new mw(n,e,t,r,i,a,l)}function Jm(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+gh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gh(r)).join(",")),e.P=t}return e.P}function Xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!RI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NI(n.startAt,e.startAt)&&NI(n.endAt,e.endAt)}function dp(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ri extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new JS(e,t,r):"array-contains"===t?new XS(e,r):"in"===t?new AI(e,r):"not-in"===t?new eA(e,r):"array-contains-any"===t?new xI(e,r):new Ri(e,t,r)}static v(e,t,r){return"in"===t?new TI(e,r):new DI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(ph(t,this.value)):null!==t&&Hc(this.value)===Hc(t)&&this.V(ph(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JS extends Ri{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.V(t)}}class TI extends Ri{constructor(e,t){super(e,"in",t),this.keys=SI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DI extends Ri{constructor(e,t){super(e,"not-in",t),this.keys=SI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class XS extends Ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mh(t)&&vu(t.arrayValue,this.value)}}class AI extends Ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vu(this.value.arrayValue,t)}}class eA extends Ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vu(this.value.arrayValue,t)}}class xI extends Ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}}class Wc{constructor(e,t){this.position=e,this.inclusive=t}}class zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function RI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function MI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):ph(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function NI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class El{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function _w(n,e,t,r,i,a,l,h){return new El(n,e,t,r,i,a,l,h)}function hp(n){return new El(n)}function yw(n){return!wl(n.limit)&&"F"===n.limitType}function vw(n){return!wl(n.limit)&&"L"===n.limitType}function PI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kI(n){for(const e of n.filters)if(e.S())return e.field;return null}function OI(n){return null!==n.collectionGroup}function fp(n){const e=We(n);if(null===e.D){e.D=[];const t=kI(e),r=PI(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new zc(t)),e.D.push(new zc(ei.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zc(ei.keyField(),a))}}}return e.D}function Lo(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=Qm(e.path,e.collectionGroup,fp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of fp(e))t.push(new zc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Wc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Wc(e.startAt.position,!e.startAt.inclusive):null;e.C=Qm(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function pp(n,e,t){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function e_(n,e){return Xm(Lo(n),Lo(e))&&n.limitType===e.limitType}function t_(n){return`${Jm(Lo(n))}|lt:${n.limitType}`}function Cl(n){return`Query(target=${function QS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gh(r.value)}`;var r}).join(", ")}]`),wl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gh(t)).join(",")),`Target(${e})`}(Lo(n))}; limitType=${n.limitType})`}function n_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=MI(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,fp(t),r)||t.endAt&&!function(i,a,l){const h=MI(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,fp(t),r)));var t,r}function FI(n){return(e,t)=>{let r=!1;for(const i of fp(n)){const a=tA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function tA(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?ph(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function r_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cp(e)?"-0":e}}function ww(n){return{integerValue:""+n}}function Ew(n,e){return xi(e)?ww(e):r_(n,e)}class gp{constructor(){this._=void 0}}function PN(n,e,t){return n instanceof Kc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof yh?nA(n,e):n instanceof vh?UI(n,e):function(r,i){const a=mp(r,i),l=VI(a)+VI(r.k);return hw(a)&&hw(r.k)?ww(l):r_(r.O,l)}(n,e)}function LI(n,e,t){return n instanceof yh?nA(n,e):n instanceof vh?UI(n,e):t}function mp(n,e){return n instanceof Il?hw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Kc extends gp{}class yh extends gp{constructor(e){super(),this.elements=e}}function nA(n,e){const t=rA(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class vh extends gp{constructor(e){super(),this.elements=e}}function UI(n,e){let t=rA(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class Il extends gp{constructor(e,t){super(),this.O=e,this.k=t}}function VI(n){return pr(n.integerValue||n.doubleValue)}function rA(n){return mh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _p{constructor(e,t){this.field=e,this.transform=t}}class iA{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function i_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wh{}function sA(n,e,t){n instanceof yp?function(r,i,a){const l=r.value.clone(),h=BI(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof bl?function(r,i,a){if(!i_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=BI(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Sw(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Iw(n,e,t){var i;n instanceof yp?function(r,i,a){if(!i_(r.precondition,i))return;const l=r.value.clone(),h=jI(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(Dw(i),l).setHasLocalMutations()}(n,e,t):n instanceof bl?function(r,i,a){if(!i_(r.precondition,i))return;const l=jI(r.fieldTransforms,a,i),h=i.data;h.setAll(Sw(r)),h.setAll(l),i.convertToFoundDocument(Dw(i),h).setHasLocalMutations()}(n,e,t):i_(n.precondition,i=e)&&i.convertToNoDocument(It.min())}function bw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=mp(r.transform,i||null);null!=a&&(null==t&&(t=Zi.empty()),t.set(r.field,a))}return t||null}function Tw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vc(t,r,(i,a)=>function Cw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yh&&r instanceof yh||t instanceof vh&&r instanceof vh?Vc(t.elements,r.elements,pa):t instanceof Il&&r instanceof Il?pa(t.k,r.k):t instanceof Kc&&r instanceof Kc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Dw(n){return n.isFoundDocument()?n.version:It.min()}class yp extends wh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class bl extends wh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Sw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BI(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,LI(l,h,t[i]))}return r}function jI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,PN(a,l,e))}return r}class Zc extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ls extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class oA{constructor(e){this.count=e}}var jr,nn;function Aw(n){switch(n){default:return ct();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function HI(n){if(void 0===n)return Pr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case jr.OK:return ge.OK;case jr.CANCELLED:return ge.CANCELLED;case jr.UNKNOWN:return ge.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ge.INTERNAL;case jr.UNAVAILABLE:return ge.UNAVAILABLE;case jr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case jr.NOT_FOUND:return ge.NOT_FOUND;case jr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case jr.ABORTED:return ge.ABORTED;case jr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case jr.DATA_LOSS:return ge.DATA_LOSS;default:return ct()}}(nn=jr||(jr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Ir{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vp(this.root,e,this.comparator,!0)}}class vp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:mi.RED,this.left=null!=i?i:mi.EMPTY,this.right=null!=a?a:mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1,mi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xw(this.data.getIterator())}getIteratorFrom(e){return new xw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class xw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yc(n){return n.hasNext()?n.getNext():void 0}const aA=new Ir(Xe.comparator);function co(){return aA}const $I=new Ir(Xe.comparator);function Qc(){return $I}const Rw=new Ir(Xe.comparator),GI=new or(Xe.comparator);function yn(...n){let e=GI;for(const t of n)e=e.add(t);return e}const qI=new or(Ht);function wp(){return qI}class Ep{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ep(It.min(),r,wp(),co(),yn())}}class Cp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cp(kr.EMPTY_BYTE_STRING,t,yn(),yn(),yn())}}class Mw{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class uA{constructor(e,t){this.targetId=e,this.F=t}}class Nw{constructor(e,t,r=kr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WI{constructor(){this.B=0,this.L=cA(),this.U=kr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=yn(),t=yn(),r=yn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new Cp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=cA()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lA{constructor(e){this.nt=e,this.st=new Map,this.it=co(),this.rt=zI(),this.ot=new or(Ht)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(dp(a))if(0===r){const l=new Xe(a.path);this.at(t,l,sr.newNoDocument(l,It.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&dp(h.target)){const m=new Xe(h.target.path);null!==this.it.get(m)||this.It(l,m)||this.at(l,m,sr.newNoDocument(m,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=yn();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.wt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new Ep(e,t,this.ot,this.it,r);return this.it=co(),this.rt=zI(),this.ot=new or(Ht),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new WI,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new or(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new WI),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function zI(){return new Ir(Xe.comparator)}function cA(){return new Ir(Xe.comparator)}const kN={asc:"ASCENDING",desc:"DESCENDING"},ON={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FN{constructor(e,t){this.databaseId=e,this.N=t}}function s_(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KI(n,e){return n.N?e.toBase64():e.toUint8Array()}function o_(n,e){return s_(n,e.toTimestamp())}function ti(n){return Dt(!!n),It.fromTimestamp(function(e){const t=yu(e);return new Xr(t.seconds,t.nanos)}(n))}function Pw(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kw(n){const e=tn.fromString(n);return Dt(Fw(e)),e}function Uo(n,e){return Pw(n.databaseId,e.path)}function Vo(n,e){const t=kw(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(u_(t))}function Ip(n,e){return Pw(n.databaseId,e)}function a_(n){const e=kw(n);return 4===e.length?tn.emptyPath():u_(e)}function bp(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u_(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function l_(n,e,t){return{name:Uo(n,e),fields:t.value.mapValue.fields}}function Tp(n,e,t){const r=Vo(n,e.name),i=ti(e.updateTime),a=new Zi({mapValue:{fields:e.fields}}),l=sr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function c_(n,e){let t;if(e instanceof yp)t={update:l_(n,e.key,e.value)};else if(e instanceof Zc)t={delete:Uo(n,e.key)};else if(e instanceof bl)t={update:l_(n,e.key,e.data),updateMask:VN(e.fieldMask)};else{if(!(e instanceof Ls))return ct();t={verify:Uo(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Kc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Il)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:o_(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function ZI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?cn.updateTime(ti(i.updateTime)):void 0!==i.exists?cn.exists(i.exists):cn.none():cn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),h=new Kc):"appendMissingElements"in l?h=new yh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new vh(l.removeAllFromArray.values||[]):"increment"in l?h=new Il(a,l.increment):ct();const m=ei.fromServerFormat(l.fieldPath);return new _p(m,h)}(n,i)):[];var i;if(e.update){const i=Vo(n,e.update.name),a=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new hh((e.updateMask.fieldPaths||[]).map(v=>ei.fromServerFormat(v)));return new bl(i,a,l,t,r)}return new yp(i,a,t,r)}if(e.delete){const i=Vo(n,e.delete);return new Zc(i,t)}if(e.verify){const i=Vo(n,e.verify);return new Ls(i,t)}return ct()}function QI(n,e){return{documents:[Ip(n,e.path)]}}function JI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ip(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ip(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(T=>function(S){if("=="===S.op){if(pw(S.value))return{unaryFilter:{field:Eh(S.field),op:"IS_NAN"}};if(fw(S.value))return{unaryFilter:{field:Eh(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(pw(S.value))return{unaryFilter:{field:Eh(S.field),op:"IS_NOT_NAN"}};if(fw(S.value))return{unaryFilter:{field:Eh(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(S.field),op:tb(S.op),value:S.value}}}(T));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Eh((T=v).field),direction:eb(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.N||wl(v)?v:{value:v});var v,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function XI(n){let e=a_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=Ow(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new zc(Ch((S=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(T){let S;return S="object"==typeof T?T.value:T,wl(S)?null:S}(t.limit));let m=null;var T;t.startAt&&(m=new Wc((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new Wc(T.values||[],!T.before)}(t.endAt)),_w(e,i,l,a,h,"F",m,v)}function Ow(n){return n?void 0!==n.unaryFilter?[d_(n)]:void 0!==n.fieldFilter?[nb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ow(e)).reduce((e,t)=>e.concat(t)):ct():[]}function eb(n){return kN[n]}function tb(n){return ON[n]}function Eh(n){return{fieldPath:n.canonicalString()}}function Ch(n){return ei.fromServerFormat(n.fieldPath)}function nb(n){return Ri.create(Ch(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function d_(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ch(n.unaryFilter.field);return Ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ch(n.unaryFilter.field);return Ri.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ch(n.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ch(n.unaryFilter.field);return Ri.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function VN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function br(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rb(e)),e=hA(n.get(t),e);return rb(e)}function hA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function rb(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new tn(r)}class fA{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ho{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ho.store="owner",ho.key="owner";class Tl{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Tl.store="mutationQueues",Tl.keyPath="userId";class Fn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}Fn.store="mutations",Fn.keyPath="batchId",Fn.userMutationsIndex="userMutationsIndex",Fn.userMutationsKeyPath=["userId","batchId"];class Mi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,br(t)]}static key(e,t,r){return[e,br(t),r]}}Mi.store="documentMutations",Mi.PLACEHOLDER=new Mi;class pA{constructor(e,t){this.path=e,this.readTime=t}}class gA{constructor(e,t){this.path=e,this.version=t}}class gr{constructor(e,t,r,i,a,l){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=l}}gr.store="remoteDocuments",gr.readTimeIndex="readTimeIndex",gr.readTimeIndexPath="readTime",gr.collectionReadTimeIndex="collectionReadTimeIndex",gr.collectionReadTimeIndexPath=["parentPath","readTime"];class ma{constructor(e){this.byteSize=e}}ma.store="remoteDocumentGlobal",ma.key="remoteDocumentGlobalKey";class gs{constructor(e,t,r,i,a,l,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=l,this.query=h}}gs.store="targets",gs.keyPath="targetId",gs.queryTargetsIndexName="queryTargetsIndex",gs.queryTargetsKeyPath=["canonicalId","targetId"];class Ni{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Ni.store="targetDocuments",Ni.keyPath=["targetId","path"],Ni.documentTargetsIndex="documentTargetsIndex",Ni.documentTargetsKeyPath=["path","targetId"];class fo{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}fo.key="targetGlobalKey",fo.store="targetGlobal";class Ih{constructor(e,t){this.collectionId=e,this.parent=t}}Ih.store="collectionParents",Ih.keyPath=["collectionId","parent"];class Dl{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Dl.store="clientMetadata",Dl.keyPath="clientId";class Dp{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Dp.store="bundles",Dp.keyPath="bundleId";class bh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}bh.store="namedQueries",bh.keyPath="name";class po{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}po.store="indexConfiguration",po.keyPath="indexId",po.collectionGroupIndex="collectionGroupIndex",po.collectionGroupIndexPath="collectionGroup";class Bo{constructor(e,t,r,i,a,l){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=l}}Bo.store="indexState",Bo.keyPath=["indexId","uid"],Bo.sequenceNumberIndex="sequenceNumberIndex",Bo.sequenceNumberIndexPath=["uid","sequenceNumber"];class jo{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}jo.store="indexEntries",jo.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],jo.documentKeyIndex="documentKeyIndex",jo.documentKeyIndexPath=["indexId","uid","documentKey"];class _i{constructor(e,t,r,i,a,l){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=l}}_i.store="documentOverlays",_i.keyPath=["userId","collectionPath","documentId"],_i.collectionPathOverlayIndex="collectionPathOverlayIndex",_i.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],_i.collectionGroupOverlayIndex="collectionGroupOverlayIndex",_i.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const s=[Tl.store,Fn.store,Mi.store,gr.store,gs.store,ho.store,fo.store,Ni.store,Dl.store,ma.store,Ih.store,Dp.store,bh.store],o=[...s,_i.store],u=[...o,po.store,Bo.store,jo.store],c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new f((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof f?t:f.resolve(t)}catch(t){return f.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):f.reject(t)}static resolve(e){return new f((t,r)=>{t(e)})}static reject(e){return new f((t,r)=>{r(e)})}static waitFor(e){return new f((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=f.resolve(!1);for(const r of e)t=t.next(i=>i?f.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class y{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Sn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new A(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Ce(r.target.error);this.At.reject(new A(e,i))}}static open(e,t,r,i){try{return new y(t,e.transaction(i,r))}catch(a){throw new A(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new L(t)}}class E{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===E.vt((0,k.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),$(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,k.hl)())return!1;if(E.St())return!0;const e=(0,k.z$)(),t=E.vt(e),r=0<t&&t<10,i=E.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new A(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new ke(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new A(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const m=y.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(T=>(m.Pt(),T)).catch(T=>(m.abort(T),f.reject(T))).toPromise();return v.catch(()=>{}),yield m.Rt,v}catch(m){const v="FirebaseError"!==m.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),a.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class I{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return $(this.$t.delete())}}class A extends ke{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function x(n){return"IndexedDbTransactionError"===n.name}class L{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),$(this.store.add(e))}get(e){return $(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),$(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),$(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new f((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new f((r,i)=>{t.onerror=a=>{const l=Ce(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new f((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new I(h),v=t(h.primaryKey,h.value,m);if(v instanceof f){const T=v.catch(S=>(m.done(),f.reject(S)));r.push(T)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>f.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $(n){return new f((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ce(r.target.error);t(i)}})}let ee=!1;function Ce(n){const e=E.vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ee||(ee=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ve extends d{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Ue(n,e){const t=We(n);return E.Nt(t.zt,e)}class nt{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&sA(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Iw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Iw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(t,r)=>Tw(t,r))&&Vc(this.baseMutations,e.baseMutations,(t,r)=>Tw(t,r))}}class Ae{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=Rw;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Ae(e,t,r,i)}}class gt{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mt{constructor(e,t,r,i,a=It.min(),l=It.min(),h=kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Mt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Mt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Mt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class pn{constructor(e){this.Ht=e}}function ms(n,e){let t;if(e.document)t=Tp(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Eu(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=Eu(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(Ap(e.readTime)),t}function Sl(n,e){const t=Sp(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:Uo(l=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:s_(l,h.version.toTimestamp())};return new gr(null,null,i,e.hasCommittedMutations,t,r)}var l,h;if(e.isNoDocument()){const i=e.key.path.toArray(),a=wu(e.version),l=e.hasCommittedMutations;return new gr(null,new pA(i,a),null,l,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=wu(e.version);return new gr(new gA(i,a),null,null,!0,t,r)}return ct()}function Sp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ap(n){const e=new Xr(n[0],n[1]);return It.fromTimestamp(e)}function wu(n){const e=n.toTimestamp();return new fA(e.seconds,e.nanoseconds)}function Eu(n){const e=new Xr(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(a=>ZI(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>ZI(n.Ht,a)),i=Xr.fromMillis(e.localWriteTimeMs);return new nt(e.batchId,i,t,r)}function Jc(n){const e=Eu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Eu(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=Lo(hp(a_(i.documents[0])))):r=Lo(XI(n.query)),new Mt(r,n.targetId,0,n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function h_(n,e){const t=wu(e.snapshotVersion),r=wu(e.lastLimboFreeSnapshotVersion);let i;i=dp(e.target)?QI(n.Ht,e.target):JI(n.Ht,e.target);const a=e.resumeToken.toBase64();return new gs(e.targetId,Jm(e.target),t,a,e.sequenceNumber,r,i)}function xp(n){const e=XI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?pp(e,e.limit,"L"):e}function Rp(n,e){return new gt(e.largestBatchId,ZI(n.Ht,e.overlayMutation))}function BN(n,e){const t=e.path.lastSegment();return[n,br(e.path.popLast()),t]}class vL{getBundleMetadata(e,t){return jN(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Eu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return jN(e).put({bundleId:(r=t).id,createTime:wu(ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return HN(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xp(i.bundledQuery),readTime:Eu(i.readTime)};var i})}saveNamedQuery(e,t){return HN(e).put({name:(r=t).name,readTime:wu(ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jN(n){return Ue(n,Dp.store)}function HN(n){return Ue(n,bh.store)}class mA{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new mA(e,t.uid||"")}getOverlay(e,t){return Lw(e).get(BN(this.userId,t)).next(r=>r?Rp(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const l=new gt(t,a);i.push(this.Yt(e,l))}),f.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(br(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Lw(e).Gt(_i.collectionPathOverlayIndex,h))}),f.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=br(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Lw(e).qt(_i.collectionPathOverlayIndex,l).next(h=>{for(const m of h){const v=Rp(this.O,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lw(e).Qt({index:_i.collectionGroupOverlayIndex,range:h},(m,v,T)=>{const S=Rp(this.O,v);a.size<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}Yt(e,t){return Lw(e).put(function(r,i,a){const[l,h,m]=BN(i,a.mutation.key);return new _i(i,h,m,a.mutation.key.getCollectionGroup(),a.largestBatchId,c_(r.Ht,a.mutation))}(this.O,this.userId,t))}}function Lw(n){return Ue(n,_i.store)}class ib{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),cp(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(vl(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?pa(e,YS)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):ct()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Xe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function wL(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $N(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=wL(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ib.le=new ib;class EL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=$N(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=$N(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CL{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class IL{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class GN{constructor(){this.Se=new EL,this.De=new CL(this.Se),this.Ce=new IL(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class _A{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function yA(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=qN(n.arrayValue,e.arrayValue),0!==t?t:qN(n.directionalValue,e.directionalValue)))}function qN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bL{constructor(){this.xe=new vA}addToCollectionParentIndex(e,t){return this.xe.add(t),f.resolve()}getCollectionParents(e,t){return f.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return f.resolve()}deleteFieldIndex(e,t){return f.resolve()}getDocumentsMatchingTarget(e,t,r){return f.resolve(yn())}getFieldIndex(e,t){return f.resolve(null)}getFieldIndexes(e,t){return f.resolve([])}getNextCollectionGroupToUpdate(e){return f.resolve(null)}updateCollectionGroup(e,t,r){return f.resolve()}updateIndexEntries(e,t){return f.resolve()}}class vA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new or(tn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(tn.comparator)).toArray()}}class TL{constructor(e){this.user=e,this.ke=new vA,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:br(i)};return WN(e).put(a)}return f.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[CI(t),""],!1,!0);return WN(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ga(l.parent))}return r})}addFieldIndex(e,t){const r=ob(e),i=new po((a=t).indexId,a.collectionGroup,a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=ob(e),i=ab(e),a=sb(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return f.resolve(yn())}getFieldIndex(e,t){return f.resolve(null)}Oe(e,t){const r=new GN;for(const i of e.fields.filter(l=>2!==l.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);ib.le.Xt(a,l)}return r.Ve()}Me(e){const t=new GN;return ib.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=ob(e),i=ab(e);return(t?r.qt(po.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return f.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,T){const S=T?new _h(T.sequenceNumber,new Ym(Eu(T.readTime),new Xe(ga(T.documentKey)),T.largestBatchId)):_h.empty(),N=v.fields.map(([U,q])=>new qc(ei.fromServerFormat(U),q));return new Zm(v.indexId,v.collectionGroup,N,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ob(e),a=ab(e);return this.$e(e).next(l=>i.qt(po.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>f.forEach(h,m=>{return a.put(new Bo(m.indexId,this.user.uid||"",l,wu((N=r).readTime),br(N.documentKey.path),N.largestBatchId));var N})))}updateIndexEntries(e,t){const r=new Map;return f.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?f.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),f.forEach(h,m=>this.Fe(e,i,m).next(v=>{const T=this.Be(a,m);return v.isEqual(T)?f.resolve():this.Le(e,a,v,T)}))))})}Ue(e,t,r){return sb(e).put(new jo(r.indexId,this.uid,r.arrayValue,r.directionalValue,br(t.key.path)))}qe(e,t,r){return sb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,br(t.key.path)])}Fe(e,t,r){const i=sb(e);let a=new or(yA);return i.Qt({index:jo.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,br(t.path)])},(l,h)=>{a=a.add(new _A(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let r=new or(yA);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(h=>2===h.kind);if(null!=a){const l=e.data.field(a.fieldPath);if(mh(l))for(const h of l.arrayValue.values||[])r=r.add(new _A(t.indexId,e.key,this.Me(h),i))}else r=r.add(new _A(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,h,m,v,T){const S=l.getIterator(),N=h.getIterator();let U=Yc(S),q=Yc(N);for(;U||q;){let we=!1,Pe=!1;if(U&&q){const tt=m(U,q);tt<0?Pe=!0:tt>0&&(we=!0)}else null!=U?Pe=!0:we=!0;we?(v(q),q=Yc(N)):Pe?(T(U),U=Yc(S)):(U=Yc(S),q=Yc(N))}}(r,i,yA,l=>{a.push(this.Ue(e,t,l))},l=>{a.push(this.qe(e,t,l))}),f.waitFor(a)}$e(e){let t=1;return ab(e).Qt({index:Bo.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function WN(n){return Ue(n,Ih.store)}function sb(n){return Ue(n,jo.store)}function ob(n){return Ue(n,po.store)}function ab(n){return Ue(n,Bo.store)}const zN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function KN(n,e,t){const r=n.store(Fn.store),i=n.store(Mi.store),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Qt({range:l},(T,S,N)=>(h++,N.delete()));a.push(m.next(()=>{Dt(1===h)}));const v=[];for(const T of t.mutations){const S=Mi.key(e,T.key.path,t.batchId);a.push(i.delete(S)),v.push(T.key)}return f.waitFor(a).next(()=>v)}function ub(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class wA{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new wA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).Qt({index:Fn.userMutationsIndex,range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=f_(e),l=Th(e);return l.add({}).next(h=>{Dt("number"==typeof h);const m=new nt(h,t,r,i),v=function(N,U,q){const we=q.baseMutations.map(tt=>c_(N.Ht,tt)),Pe=q.mutations.map(tt=>c_(N.Ht,tt));return new Fn(U,q.batchId,q.localWriteTime.toMillis(),we,Pe)}(this.O,this.userId,m),T=[];let S=new or((N,U)=>Ht(N.canonicalString(),U.canonicalString()));for(const N of i){const U=Mi.key(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),T.push(l.put(v)),T.push(a.put(U,Mi.PLACEHOLDER))}return S.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.Ke[h]=m.keys()}),f.waitFor(T).next(()=>m)})}lookupMutationBatch(e,t){return Th(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Al(this.O,r)):null)}Ge(e,t){return this.Ke[t]?f.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Th(e).Qt({index:Fn.userMutationsIndex,range:i},(l,h,m)=>{h.userId===this.userId&&(Dt(h.batchId>=r),a=Al(this.O,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Th(e).Qt({index:Fn.userMutationsIndex,range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).qt(Fn.userMutationsIndex,t).next(r=>r.map(i=>Al(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Mi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return f_(e).Qt({range:i},(l,h,m)=>{const[v,T,S]=l,N=ga(T);if(v===this.userId&&t.path.isEqual(N))return Th(e).get(S).next(U=>{if(!U)throw ct();Dt(U.userId===this.userId),a.push(Al(this.O,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Ht);const i=[];return t.forEach(a=>{const l=Mi.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=f_(e).Qt({range:h},(v,T,S)=>{const[N,U,q]=v,we=ga(U);N===this.userId&&a.path.isEqual(we)?r=r.add(q):S.done()});i.push(m)}),f.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Mi.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new or(Ht);return f_(e).Qt({range:l},(m,v,T)=>{const[S,N,U]=m,q=ga(N);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(h=h.add(U)):T.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Th(e).get(a).next(l=>{if(null===l)throw ct();Dt(l.userId===this.userId),r.push(Al(this.O,l))}))}),f.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return KN(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),f.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return f.resolve();const r=IDBKeyRange.lowerBound(Mi.prefixForUser(this.userId)),i=[];return f_(e).Qt({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=ga(a[1]);i.push(m)}else h.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return ZN(e,this.userId,t)}We(e){return YN(e).get(this.userId).next(t=>t||new Tl(this.userId,-1,""))}}function ZN(n,e,t){const r=Mi.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return f_(n).Qt({range:a,jt:!0},(h,m,v)=>{const[T,S,N]=h;T===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Th(n){return Ue(n,Fn.store)}function f_(n){return Ue(n,Mi.store)}function YN(n){return Ue(n,Tl.store)}class Mp{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Mp(0)}static Je(){return new Mp(-1)}}class DL{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Mp(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>It.fromTimestamp(new Xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>p_(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return p_(e).Qt((l,h)=>{const m=Jc(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>f.waitFor(a)).next(()=>i)}forEachTarget(e,t){return p_(e).Qt((r,i)=>{const a=Jc(i);t(a)})}Ye(e){return QN(e).get(fo.key).next(t=>(Dt(null!==t),t))}Xe(e,t){return QN(e).put(fo.key,t)}Ze(e,t){return p_(e).put(h_(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return p_(e).Qt({range:i,index:gs.queryTargetsIndexName},(l,h,m)=>{const v=Jc(h);Xm(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Dh(e);return t.forEach(l=>{const h=br(l.path);i.push(a.put(new Ni(r,h))),i.push(this.referenceDelegate.addReference(e,r,l))}),f.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dh(e);return f.forEach(t,a=>{const l=br(a.path);return f.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Dh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dh(e);let a=yn();return i.Qt({range:r,jt:!0},(l,h,m)=>{const v=ga(l[1]),T=new Xe(v);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=br(t.path),i=IDBKeyRange.bound([r],[CI(r)],!1,!0);let a=0;return Dh(e).Qt({index:Ni.documentTargetsIndex,jt:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}Tt(e,t){return p_(e).get(t).next(r=>r?Jc(r):null)}}function p_(n){return Ue(n,gs.store)}function QN(n){return Ue(n,fo.store)}function Dh(n){return Ue(n,Ni.store)}function Np(n){return EA.apply(this,arguments)}function EA(){return EA=(0,ve.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==c)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),EA.apply(this,arguments)}function JN([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class SL{constructor(e){this.en=e,this.buffer=new or(JN),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AL{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){x(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Np(i)}yield t.un(e)}))}}class xL{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return f.resolve(Fs.A);const r=new SL(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),f.resolve(zN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zN):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,l,h,m,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Hm()<=ks.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-T}ms`),f.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class RL{constructor(e,t){this.db=e,this.garbageCollector=new xL(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return lb(e,r)}removeReference(e,t,r){return lb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lb(e,t)}wn(e,t){return function(r,i){let a=!1;return YN(r).Wt(l=>ZN(r,l,i).next(h=>(h&&(a=!0),f.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(l,h)=>{if(h<=t){const m=this.wn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),Dh(e).delete([0,br(l.path)])))});i.push(m)}}).next(()=>f.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lb(e,t)}_n(e,t){const r=Dh(e);let i,a=Fs.A;return r.Qt({index:Ni.documentTargetsIndex},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==Fs.A&&t(new Xe(ga(i)),a),a=v,i=m):a=Fs.A}).next(()=>{a!==Fs.A&&t(new Xe(ga(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lb(n,e){return Dh(n).put((r=n.currentSequenceNumber,new Ni(0,br(e.path),r)));var r}class g_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){_u(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return cw(this.inner)}}class XN{constructor(){this.changes=new g_(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?f.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ML{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sh(e).put(cb(t),r)}removeEntry(e,t){const r=Sh(e),i=cb(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Sh(e).get(cb(t)).next(r=>this.gn(t,r))}yn(e,t){return Sh(e).get(cb(t)).next(r=>({document:this.gn(t,r),size:ub(r)}))}getEntries(e,t){let r=co();return this.pn(e,t,(i,a)=>{const l=this.gn(i,a);r=r.insert(i,l)}).next(()=>r)}In(e,t){let r=co(),i=new Ir(Xe.comparator);return this.pn(e,t,(a,l)=>{const h=this.gn(a,l);r=r.insert(a,h),i=i.insert(a,ub(l))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return f.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let l=a.getNext();return Sh(e).Qt({range:i},(h,m,v)=>{const T=Xe.fromSegments(h);for(;l&&Xe.comparator(l,T)<0;)r(l,null),l=a.getNext();l&&l.isEqual(T)&&(r(l,m),l=a.hasNext()?a.getNext():null),l?v.Ut(l.path.toArray()):v.done()}).next(()=>{for(;l;)r(l,null),l=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=co();const a=t.length+1,l={};if(r.isEqual(It.min())){const h=t.toArray();l.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),m=Sp(r);l.range=IDBKeyRange.lowerBound([h,m],!0),l.index=gr.collectionReadTimeIndex}return Sh(e).Qt(l,(h,m,v)=>{if(h.length!==a)return;const T=this.gn(Xe.fromSegments(h),m);t.isPrefixOf(T.key.path)?i=i.insert(T.key,T):v.done()}).next(()=>i)}newChangeBuffer(e){return new NL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eP(e).get(ma.key).next(t=>(Dt(!!t),t))}mn(e,t){return eP(e).put(ma.key,t)}gn(e,t){if(t){const r=ms(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return sr.newInvalidDocument(e)}}class NL extends XN{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new g_(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new or((a,l)=>Ht(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.An.get(a);if(l.isValidDocument()){const m=Sl(this.Tn.O,l);i=i.add(a.path.popLast()),r+=ub(m)-h,t.push(this.Tn.addEntry(e,a,m))}else if(r-=h,this.trackRemovals){const m=Sl(this.Tn.O,l.convertToNoDocument(It.min()));t.push(this.Tn.addEntry(e,a,m))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),f.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,l)=>{this.An.set(a,l)}),r))}}function eP(n){return Ue(n,ma.store)}function Sh(n){return Ue(n,gr.store)}function cb(n){return n.path.toArray()}class PL{constructor(e){this.O=e}kt(e,t,r,i){const a=new y("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(ho.store),(h=e).createObjectStore(Tl.store,{keyPath:Tl.keyPath}),h.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Mi.store),tP(e),function(h){h.createObjectStore(gr.store)}(e));let l=f.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Ni.store),h.deleteObjectStore(gs.store),h.deleteObjectStore(fo.store)}(e),tP(e)),l=l.next(()=>function(h){const m=h.store(fo.store),v=new fo(0,0,It.min().toTimestamp(),0);return m.put(fo.key,v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store(Fn.store).qt().next(v=>{h.deleteObjectStore(Fn.store),h.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0});const T=m.store(Fn.store),S=v.map(N=>T.put(N));return f.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore(Dl.store,{keyPath:Dl.keyPath})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Rn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore(ma.store)}(e),this.Pn(a)))),r<7&&i>=7&&(l=l.next(()=>this.bn(a))),r<8&&i>=8&&(l=l.next(()=>this.vn(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const m=h.objectStore(gr.store);m.createIndex(gr.readTimeIndex,gr.readTimeIndexPath,{unique:!1}),m.createIndex(gr.collectionReadTimeIndex,gr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(l=l.next(()=>this.Vn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore(Dp.store,{keyPath:Dp.keyPath})})(e),function(h){h.createObjectStore(bh.store,{keyPath:bh.keyPath})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore(_i.store,{keyPath:_i.keyPath});m.createIndex(_i.collectionPathOverlayIndex,_i.collectionPathOverlayIndexPath,{unique:!1}),m.createIndex(_i.collectionGroupOverlayIndex,_i.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>{!function(h){h.createObjectStore(po.store,{keyPath:po.keyPath,autoIncrement:!0}).createIndex(po.collectionGroupIndex,po.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(Bo.store,{keyPath:Bo.keyPath}).createIndex(Bo.sequenceNumberIndex,Bo.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(jo.store,{keyPath:jo.keyPath}).createIndex(jo.documentKeyIndex,jo.documentKeyIndexPath,{unique:!1})}(e)})),l}Pn(e){let t=0;return e.store(gr.store).Qt((r,i)=>{t+=ub(i)}).next(()=>{const r=new ma(t);return e.store(ma.store).put(ma.key,r)})}Rn(e){const t=e.store(Tl.store),r=e.store(Fn.store);return t.qt().next(i=>f.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(Fn.userMutationsIndex,l).next(h=>f.forEach(h,m=>{Dt(m.userId===a.userId);const v=Al(this.O,m);return KN(e,a.userId,v).next(()=>{})}))}))}bn(e){const t=e.store(Ni.store),r=e.store(gr.store);return e.store(fo.store).get(fo.key).next(i=>{const a=[];return r.Qt((l,h)=>{const m=new tn(l),v=[0,br(m)];a.push(t.get(v).next(T=>T?f.resolve():t.put(new Ni(0,br(m),i.highestListenSequenceNumber))))}).next(()=>f.waitFor(a))})}vn(e,t){e.createObjectStore(Ih.store,{keyPath:Ih.keyPath});const r=t.store(Ih.store),i=new vA,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:br(m)})}};return t.store(gr.store).Qt({jt:!0},(l,h)=>{const m=new tn(l);return a(m.popLast())}).next(()=>t.store(Mi.store).Qt({jt:!0},([l,h,m],v)=>{const T=ga(h);return a(T.popLast())}))}Vn(e){const t=e.store(gs.store);return t.Qt((r,i)=>{const a=Jc(i),l=h_(this.O,a);return t.put(l)})}}function tP(n){n.createObjectStore(Ni.store,{keyPath:Ni.keyPath}).createIndex(Ni.documentTargetsIndex,Ni.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(gs.store,{keyPath:gs.keyPath}).createIndex(gs.queryTargetsIndexName,gs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(fo.store)}const CA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class IA{constructor(e,t,r,i,a,l,h,m,v,T,S=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=l,this.document=h,this.Dn=v,this.Cn=T,this.schemaVersion=S,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=N=>Promise.resolve(),!IA.Vt())throw new ke(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RL(this,i),this.Bn=t+"main",this.O=new pn(m),this.Ln=new E(this.Bn,this.schemaVersion,new PL(this.O)),this.Un=new DL(this.referenceDelegate,this.O),this.qn=new ML(this.O),this.Kn=new vL,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===T&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,CA);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Fs(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>db(e).put(new Dl(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(x(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Uw(e).get(ho.key).next(t=>f.resolve(this.ts(t)))}es(e){return db(e).delete(this.clientId)}ns(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ue(r,Dl.store);return i.qt().next(a=>{const l=e.rs(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return f.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?f.resolve(!0):Uw(e).get(ho.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,CA);return!1}}return!(!this.networkEnabled||!this.inForeground)||db(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[ho.store,Dl.store],t=>{const r=new Ve(t,Fs.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>db(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return wA.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new TL(e)}getDocumentOverlayCache(e){return mA.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(l=this.schemaVersion)?u:12===l?o:11===l?s:void ct();var l;let h;return this.Ln.runTransaction(e,i,a,m=>(h=new Ve(m,this.Nn?this.Nn.next():Fs.A),"readwrite-primary"===t?this.Jn(h).next(v=>!!v||this.Yn(h)).next(v=>{if(!v)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new ke(ge.FAILED_PRECONDITION,c);return r(h)}).next(v=>this.Zn(h).next(()=>v)):this._s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}_s(e){return Uw(e).get(ho.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(ge.FAILED_PRECONDITION,CA)})}Zn(e){const t=new ho(this.clientId,this.allowTabSynchronization,Date.now());return Uw(e).put(ho.key,t)}static Vt(){return E.Vt()}Xn(e){const t=Uw(e);return t.get(ho.key).next(r=>this.ts(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(ho.key)):f.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uw(n){return Ue(n,ho.store)}function db(n){return Ue(n,Dl.store)}function bA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kL{constructor(e,t){this.progress=e,this.ws=t}}class OL{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):OI(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Xe(t)).next(r=>{let i=Qc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=Qc();return this.indexManager.getCollectionParents(e,i).next(l=>f.forEach(l,h=>{const m=(v=t,T=h.child(i),new El(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.bs(e,m,r).next(v=>{v.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const m=h.key;let v=i.get(m);null==v&&(v=sr.newInvalidDocument(m),i=i.insert(m,v)),Iw(h,v,l.localWriteTime),v.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,l)=>{n_(t,l)||(i=i.remove(a))}),i))}}class TA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=yn(),i=yn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new TA(e,t.fromCache,r,i)}}class nP{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(It.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const l=this.xs(t,a);return(yw(t)||vw(t))&&this.ks(t.limitType,l,i,r)?this.Ns(e,t):(Hm()<=ks.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cl(t)),this.Cs.As(e,t,r).next(h=>(l.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}xs(e,t){let r=new or(FI(e));return t.forEach((i,a)=>{n_(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return Hm()<=ks.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Cl(t)),this.Cs.As(e,t,It.min())}}class FL{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new Ir(Ht),this.$s=new g_(a=>Jm(a),Xm),this.Fs=It.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new OL(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function rP(n,e,t,r){return new FL(n,e,t,r)}function iP(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,ve.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=yn();for(const v of i){l.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}for(const v of a){h.push(v.batchId);for(const T of v.mutations)m=m.add(T.key)}return t.Us.Es(r,m).next(v=>({qs:v,removedBatchIds:l,addedBatchIds:h}))})})}),DA.apply(this,arguments)}function LL(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const T=m.batch,S=T.keys();let N=f.resolve();return S.forEach(U=>{N=N.next(()=>v.getEntry(h,U)).next(q=>{const we=m.docVersions.get(U);Dt(null!==we),q.version.compareTo(we)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))})}),N.next(()=>l.gs.removeMutationBatch(h,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function sP(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function UL(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((v,T)=>{const S=i.get(T);if(!S)return;h.push(t.Un.removeMatchingKeys(a,v.removedDocuments,T).next(()=>t.Un.addMatchingKeys(a,v.addedDocuments,T)));let N=S.withSequenceNumber(a.currentSequenceNumber);var U,q,we;e.targetMismatches.has(T)?N=N.withResumeToken(kr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),i=i.insert(T,N),q=N,we=v,(0===(U=S).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,N))});let m=co();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(oP(a,l,e.documentUpdates).next(v=>{m=v})),!r.isEqual(It.min())){const v=t.Un.getLastRemoteSnapshotVersion(a).next(T=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return f.waitFor(h).next(()=>l.apply(a)).next(()=>t.Us.Ts(a,m)).next(()=>m)}).then(a=>(t.Ms=i,a))}function oP(n,e,t){let r=yn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=co();return t.forEach((l,h)=>{const m=i.get(l);h.isNoDocument()&&h.version.isEqual(It.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Be("LocalStore","Ignoring outdated watch update for ",l,". Current version:",m.version," Watch version:",h.version)}),a})}function VL(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function m_(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,f.resolve(i)):t.Un.allocateTargetId(r).next(l=>(i=new Mt(e,l,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function __(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,ve.Z)(function*(n,e,t){const r=We(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!x(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),SA.apply(this,arguments)}function hb(n,e,t){const r=We(n);let i=It.min(),a=yn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const T=We(h),S=T.$s.get(v);return void 0!==S?f.resolve(T.Ms.get(S)):T.Un.getTargetData(m,v)}(r,l,Lo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Os.As(l,e,t?i:It.min(),t?a:yn())).next(h=>({documents:h,Ks:a})))}function aP(n,e){const t=We(n),r=We(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(l=>l?l.target:null))}function uP(n){const e=We(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const l=We(r);let h=co(),m=Sp(a);const v=Sh(i),T=IDBKeyRange.lowerBound(m,!0);return v.Qt({index:gr.readTimeIndex,range:T},(S,N)=>{const U=ms(l.O,N);h=h.insert(U.key,U),m=N.readTime}).next(()=>({ws:h,readTime:Ap(m)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function AA(){return AA=(0,ve.Z)(function*(n){const e=We(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Sh(r);let a=It.min();return i.Qt({index:gr.readTimeIndex,reverse:!0},(l,h,m)=>{h.readTime&&(a=Ap(h.readTime)),m.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),AA.apply(this,arguments)}function xA(){return xA=(0,ve.Z)(function*(n,e,t,r){const i=We(n);let a=yn(),l=co();for(const v of t){const T=e.Gs(v.metadata.name);v.document&&(a=a.add(T));const S=e.js(v);S.setReadTime(e.Qs(v.metadata.readTime)),l=l.insert(T,S)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),m=yield m_(i,(v=r,Lo(hp(tn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>oP(v,h,l).next(T=>(h.apply(v),T)).next(T=>i.Un.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Un.addMatchingKeys(v,a,m.targetId)).next(()=>i.Us.Ts(v,T)).next(()=>T)))}),xA.apply(this,arguments)}function HL(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,ve.Z)(function*(n,e,t=yn()){const r=yield m_(n,Lo(xp(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ti(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Kn.saveNamedQuery(a,e);const h=r.withResumeToken(kr.EMPTY_BYTE_STRING,l);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(a,h).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),RA.apply(this,arguments)}class $L{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return f.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:ti(r.createTime)}),f.resolve()}getNamedQuery(e,t){return f.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:xp(r.bundledQuery),readTime:ti(r.readTime)}),f.resolve();var r}}class GL{constructor(){this.overlays=new Ir(Xe.comparator),this.Hs=new Map}getOverlay(e,t){return f.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),f.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),f.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return f.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ir((v,T)=>v-T);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=a.get(v.largestBatchId);null===T&&(T=new Map,a=a.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const h=new Map,m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,T)=>h.set(T,v)),!(h.size>=i)););return f.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new gt(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class MA{constructor(){this.Js=new or(Pi.Ys),this.Xs=new or(Pi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Pi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Pi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Xe(new tn([])),r=new Pi(t,e),i=new Pi(t,e+1),a=[];return this.Xs.forEachInRange([r,i],l=>{this.ei(l),a.push(l.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Xe(new tn([])),r=new Pi(t,e),i=new Pi(t,e+1);let a=yn();return this.Xs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Pi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Xe.comparator(e.key,t.key)||Ht(e.oi,t.oi)}static Zs(e,t){return Ht(e.oi,t.oi)||Xe.comparator(e.key,t.key)}}class qL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new or(Pi.Ys)}checkEmpty(e){return f.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const l=new nt(a,t,r,i);this.gs.push(l);for(const h of i)this.ui=this.ui.add(new Pi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return f.resolve(l)}lookupMutationBatch(e,t){return f.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return f.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return f.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return f.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pi(t,0),i=new Pi(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],l=>{const h=this.ai(l.oi);a.push(h)}),f.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Ht);return t.forEach(i=>{const a=new Pi(i,0),l=new Pi(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,l],h=>{r=r.add(h.oi)})}),f.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Pi(new Xe(a),0);let h=new or(Ht);return this.ui.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.oi)),!0)},l),f.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return f.forEach(t.mutations,i=>{const a=new Pi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Pi(t,0),i=this.ui.firstAfterOrEqual(r);return f.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return f.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class WL{constructor(e){this.di=e,this.docs=new Ir(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return f.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():sr.newInvalidDocument(i))}),f.resolve(r)}getAll(e,t,r){let i=co();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||m.readTime.compareTo(r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return f.resolve(i)}_i(e,t){return f.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zL(this)}getSize(e){return f.resolve(this.size)}}class zL extends XN{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),f.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class KL{constructor(e){this.persistence=e,this.wi=new g_(t=>Jm(t),Xm),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.mi=0,this.gi=new MA,this.targetCount=0,this.yi=Mp.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),f.resolve()}getLastRemoteSnapshotVersion(e){return f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return f.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),f.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Mp(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,f.resolve()}updateTargetData(e,t){return this.Ze(t),f.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,f.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),f.waitFor(a).next(()=>i)}getTargetCount(e){return f.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return f.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),f.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),f.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),f.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return f.resolve(r)}containsKey(e,t){return f.resolve(this.gi.containsKey(t))}}class ZL{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Fs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new KL(this),this.indexManager=new bL,this.qn=new WL(r=>this.referenceDelegate.Ii(r)),this.O=new pn(t),this.Kn=new $L(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new qL(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new YL(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return f.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class YL extends d{constructor(e){super(),this.currentSequenceNumber=e}}class NA{constructor(e){this.persistence=e,this.Ri=new MA,this.Pi=null}static bi(e){return new NA(e)}get vi(){if(this.Pi)return this.Pi;throw ct()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),f.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),f.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),f.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return f.forEach(this.vi,r=>{const i=Xe.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,It.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return f.or([()=>f.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function lP(n,e){return`firestore_clients_${n}_${e}`}function cP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function PA(n,e){return`firestore_targets_${n}_${e}`}class fb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ke(i.error.code,i.error.message))),l?new fb(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new Vw(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=wp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=xi(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new pb(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kA{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kA(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class OA{constructor(){this.activeTargetIds=wp()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FA{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Ir(Ht),this.started=!1,this.$i=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=lP(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new OA),this.Li=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(lP(e.persistenceKey,i));if(a){const l=pb.Si(i,a);l&&(e.Mi=e.Mi.insert(l.clientId,l))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(PA(this.persistenceKey,e));if(r){const i=Vw.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let l=Fs.A;if(null!=a)try{const h=JSON.parse(a);Dt("number"==typeof h),l=h}catch(h){Pr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Fs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new fb(this.currentUser,e,t,r),a=cP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=cP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=PA(this.persistenceKey,e),a=new Vw(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return pb.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return fb.Si(new Jr(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Vw.Si(i,t)}Qi(e){return kA.Si(e)}rr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.dr(l,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=wp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dP{constructor(){this._r=new OA,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new OA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class QL{mr(e){}shutdown(){}}class hP{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const JL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class XL{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class eU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const l=this.$r(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.Fr(h,i,a),this.Br(e,l,h,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw ap("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${JL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,l)=>{const h=new $S;h.listenOnce(BS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ow.NO_ERROR:const v=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(v)),a(v);break;case ow.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new ke(ge.DEADLINE_EXCEEDED,"Request time out"));break;case ow.HTTP_ERROR:const T=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',T,"response text:",h.getResponseText()),T>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(q)>=0?q:ge.UNKNOWN}(S.status);l(new ke(N,S.message))}else l(new ke(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ke(ge.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=US(),l=VS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new HS({})),this.Fr(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Be("Connection","Creating WebChannel: "+m,h);const v=a.createWebChannel(m,h);let T=!1,S=!1;const N=new XL({Ar:q=>{S?Be("Connection","Not sending because WebChannel is closed:",q):(T||(Be("Connection","Opening WebChannel transport."),v.open(),T=!0),Be("Connection","WebChannel sending:",q),v.send(q))},Rr:()=>v.close()}),U=(q,we,Pe)=>{q.listen(we,tt=>{try{Pe(tt)}catch(vt){setTimeout(()=>{throw vt},0)}})};return U(v,jm.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),U(v,jm.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),N.Cr())}),U(v,jm.EventType.ERROR,q=>{S||(S=!0,ap("Connection","WebChannel transport errored:",q),N.Cr(new ke(ge.UNAVAILABLE,"The operation could not be completed")))}),U(v,jm.EventType.MESSAGE,q=>{var we;if(!S){const Pe=q.data[0];Dt(!!Pe);const tt=Pe,vt=tt.error||(null===(we=tt[0])||void 0===we?void 0:we.error);if(vt){Be("Connection","WebChannel received error:",vt);const Ct=vt.status;let dt=function(Li){const Wh=jr[Li];if(void 0!==Wh)return HI(Wh)}(Ct),wn=vt.message;void 0===dt&&(dt=ge.INTERNAL,wn="Unknown error status: "+Ct+" with message "+vt.message),S=!0,N.Cr(new ke(dt,wn)),v.close()}else Be("Connection","WebChannel received:",Pe),N.Nr(Pe)}}),U(l,jS.STAT_EVENT,q=>{q.stat===yI.PROXY?Be("Connection","Detected buffering proxy"):q.stat===yI.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Dr()},0),N}}function fP(){return"undefined"!=typeof window?window:null}function gb(){return"undefined"!=typeof document?document:null}function Bw(n){return new FN(n,!0)}class LA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class pP{constructor(e,t,r,i,a,l,h,m){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new LA(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,ve.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,ve.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new ke(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,ve.Z)(function*(){e.state=0,e.start()}))}Io(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tU extends pP{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function UN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,v){return m.N?(Dt(void 0===v||"string"==typeof v),kr.fromBase64String(v||"")):(Dt(void 0===v||v instanceof Uint8Array),kr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?ge.UNKNOWN:HI(m.code);return new ke(v,m.message||"")}(l);t=new Nw(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Vo(n,r.document.name),a=ti(r.document.updateTime),l=new Zi({mapValue:{fields:r.document.fields}}),h=sr.newFoundDocument(i,a,l);t=new Mw(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Vo(n,r.document),a=r.readTime?ti(r.readTime):It.min(),l=sr.newNoDocument(i,a);t=new Mw([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Vo(n,r.document);t=new Mw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new oA(r.count||0);t=new uA(r.targetId,a)}}var m;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?ti(a.readTime):It.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=bp(this.O),t.addTarget=function(i,a){let l;const h=a.target;return l=dp(h)?{documents:QI(i,h)}:{query:JI(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=KI(i,a.resumeToken):a.snapshotVersion.compareTo(It.min())>0&&(l.readTime=s_(i,a.snapshotVersion.toTimestamp())),l}(this.O,e);const r=function dA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=bp(this.O),t.removeTarget=e,this.fo(t)}}class nU extends pP{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function YI(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=ti(r.updateTime?r.updateTime:i);return a.isEqual(It.min())&&(a=ti(i)),new iA(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.Vo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=bp(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>c_(this.O,r))};this.fo(t)}}class rU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(ge.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(ge.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class iU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Pr(t),this.Oo=!1):Be("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class sU{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var m;Ah(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ve.Z)(function*(v){const T=We(v);T.Ko.add(4),yield y_(T),T.Qo.set("Unknown"),T.Ko.delete(4),yield jw(T)}),function(v){return m.apply(this,arguments)})(l))}))}),this.Qo=new iU(r,i)}}function jw(n){return UA.apply(this,arguments)}function UA(){return UA=(0,ve.Z)(function*(n){if(Ah(n))for(const e of n.Go)yield e(!0)}),UA.apply(this,arguments)}function y_(n){return VA.apply(this,arguments)}function VA(){return VA=(0,ve.Z)(function*(n){for(const e of n.Go)yield e(!1)}),VA.apply(this,arguments)}function mb(n,e){const t=We(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),HA(t)?jA(t):w_(t).co()&&BA(t,e))}function Hw(n,e){const t=We(n),r=w_(t);t.qo.delete(e),r.co()&&gP(t,e),0===t.qo.size&&(r.co()?r.ho():Ah(t)&&t.Qo.set("Unknown"))}function BA(n,e){n.Wo.Z(e.targetId),w_(n).Ao(e)}function gP(n,e){n.Wo.Z(e),w_(n).Ro(e)}function jA(n){n.Wo=new lA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),w_(n).start(),n.Qo.Mo()}function HA(n){return Ah(n)&&!w_(n).oo()&&n.qo.size>0}function Ah(n){return 0===We(n).Ko.size}function mP(n){n.Wo=void 0}function oU(n){return $A.apply(this,arguments)}function $A(){return $A=(0,ve.Z)(function*(n){n.qo.forEach((e,t)=>{BA(n,e)})}),$A.apply(this,arguments)}function aU(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ve.Z)(function*(n,e){mP(n),HA(n)?(n.Qo.Bo(e),jA(n)):n.Qo.set("Unknown")}),GA.apply(this,arguments)}function uU(n,e,t){return qA.apply(this,arguments)}function qA(){return qA=(0,ve.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Nw&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _b(n,r)}else if(e instanceof Mw?n.Wo.ct(e):e instanceof uA?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(It.min()))try{const r=yield sP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Wo.yt(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.qo.get(m);v&&i.qo.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.qo.get(h);if(!m)return;i.qo.set(h,m.withResumeToken(kr.EMPTY_BYTE_STRING,m.snapshotVersion)),gP(i,h);const v=new Mt(m.target,h,1,m.sequenceNumber);BA(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield _b(n,r)}var r}),qA.apply(this,arguments)}function _b(n,e,t){return WA.apply(this,arguments)}function WA(){return WA=(0,ve.Z)(function*(n,e,t){if(!x(e))throw e;n.Ko.add(1),yield y_(n),n.Qo.set("Offline"),t||(t=()=>sP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield jw(n)}))}),WA.apply(this,arguments)}function _P(n,e){return e().catch(t=>_b(n,t,e))}function v_(n){return zA.apply(this,arguments)}function zA(){return zA=(0,ve.Z)(function*(n){const e=We(n),t=xh(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;lU(e);)try{const i=yield VL(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,cU(e,i)}catch(i){yield _b(e,i)}yP(e)&&vP(e)}),zA.apply(this,arguments)}function lU(n){return Ah(n)&&n.Uo.length<10}function cU(n,e){n.Uo.push(e);const t=xh(n);t.co()&&t.bo&&t.vo(e.mutations)}function yP(n){return Ah(n)&&!xh(n).oo()&&n.Uo.length>0}function vP(n){xh(n).start()}function dU(n){return KA.apply(this,arguments)}function KA(){return KA=(0,ve.Z)(function*(n){xh(n).Do()}),KA.apply(this,arguments)}function hU(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ve.Z)(function*(n){const e=xh(n);for(const t of n.Uo)e.vo(t.mutations)}),ZA.apply(this,arguments)}function fU(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,ve.Z)(function*(n,e,t){const r=n.Uo.shift(),i=Ae.from(r,e,t);yield _P(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield v_(n)}),YA.apply(this,arguments)}function pU(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,ve.Z)(function*(n,e){var t;e&&xh(n).bo&&(yield(t=(0,ve.Z)(function*(r,i){if(Aw(a=i.code)&&a!==ge.ABORTED){const l=r.Uo.shift();xh(r).ao(),yield _P(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield v_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),yP(n)&&vP(n)}),QA.apply(this,arguments)}function wP(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,ve.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Ah(t);t.Ko.add(3),yield y_(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield jw(t)}),JA.apply(this,arguments)}function XA(n,e){return ex.apply(this,arguments)}function ex(){return ex=(0,ve.Z)(function*(n,e){const t=We(n);e?(t.Ko.delete(2),yield jw(t)):e||(t.Ko.add(2),yield y_(t),t.Qo.set("Unknown"))}),ex.apply(this,arguments)}function w_(n){return n.zo||(n.zo=function(e,t,r){const i=We(e);return i.No(),new tU(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:oU.bind(null,n),vr:aU.bind(null,n),To:uU.bind(null,n)}),n.Go.push(function(){var e=(0,ve.Z)(function*(t){t?(n.zo.ao(),HA(n)?jA(n):n.Qo.set("Unknown")):(yield n.zo.stop(),mP(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function xh(n){return n.Ho||(n.Ho=function(e,t,r){const i=We(e);return i.No(),new nU(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:dU.bind(null,n),vr:pU.bind(null,n),So:hU.bind(null,n),Vo:fU.bind(null,n)}),n.Go.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Ho.ao(),yield v_(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class tx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new tx(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E_(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),x(n))return new ke(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class C_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Qc(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new C_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof C_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new C_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EP{constructor(){this.Jo=new Ir(Xe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):ct():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class I_{constructor(e,t,r,i,a,l,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new I_(e,t,C_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class gU{constructor(){this.Xo=void 0,this.listeners=[]}}class mU{constructor(){this.queries=new g_(e=>t_(e),e_),this.onlineState="Unknown",this.Zo=new Set}}function nx(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,ve.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new gU),i)try{a.Xo=yield t.onListen(r)}catch(l){const h=E_(l,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&ox(t)}),rx.apply(this,arguments)}function ix(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,ve.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sx.apply(this,arguments)}function _U(n,e){const t=We(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.ec(i)&&(r=!0);l.Xo=i}}r&&ox(t)}function yU(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function ox(n){n.Zo.forEach(e=>{e.next()})}class ax{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new I_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=I_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class vU{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class CP{constructor(e){this.O=e}Gs(e){return Vo(this.O,e)}js(e){return e.metadata.exists?Tp(this.O,e.document,!1):sr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return ti(e)}}class wU{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=IP(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new CP(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||yn()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function jL(n,e,t,r){return xA.apply(this,arguments)}(e.localStore,new CP(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield HL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new kL(Object.assign({},e.progress),t)})()}}function IP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bP{constructor(e){this.key=e}}class TP{constructor(e){this.key=e}}class DP{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=yn(),this.mutatedKeys=yn(),this.mc=FI(e),this.gc=new C_(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new EP,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m=yw(this.query)&&i.size===this.query.limit?i.last():null,v=vw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const N=i.get(T),U=n_(this.query,S)?S:null,q=!!N&&this.mutatedKeys.has(N.key),we=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Pe=!1;N&&U?N.data.isEqual(U.data)?q!==we&&(r.track({type:3,doc:U}),Pe=!0):this.Tc(N,U)||(r.track({type:2,doc:U}),Pe=!0,(m&&this.mc(U,m)>0||v&&this.mc(U,v)<0)&&(h=!0)):!N&&U?(r.track({type:0,doc:U}),Pe=!0):N&&!U&&(r.track({type:1,doc:N}),Pe=!0,(m||v)&&(h=!0)),Pe&&(U?(l=l.add(U),a=we?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),yw(this.query)||vw(this.query))for(;l.size>this.query.limit;){const T=yw(this.query)?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{gc:l,Ec:r,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((v,T)=>function(S,N){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return U(S)-U(N)}(v.type,T.type)||this.mc(v.doc,T.doc)),this.Ac(r);const l=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,m=h!==this._c;return this._c=h,0!==a.length||m?{snapshot:new I_(this.query,e.gc,i,a,e.mutatedKeys,0===h,m,!1),Pc:l}:{Pc:l}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new EP,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=yn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new TP(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new bP(r))}),t}vc(e){this.dc=e.Ks,this.wc=yn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return I_.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class EU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CU{constructor(e){this.key=e,this.Sc=!1}}class IU{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Dc={},this.Cc=new g_(h=>t_(h),e_),this.Nc=new Map,this.xc=new Set,this.kc=new Ir(Xe.comparator),this.Oc=new Map,this.Mc=new MA,this.$c={},this.Fc=new Map,this.Bc=Mp.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function bU(n,e){return ux.apply(this,arguments)}function ux(){return ux=(0,ve.Z)(function*(n,e){const t=Mx(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const l=yield m_(t.localStore,Lo(e));t.isPrimaryClient&&mb(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield lx(t,e,r,"current"===h)}return i}),ux.apply(this,arguments)}function lx(n,e,t,r){return cx.apply(this,arguments)}function cx(){return cx=(0,ve.Z)(function*(n,e,t,r){n.Uc=(T,S,N)=>{return(U=(0,ve.Z)(function*(q,we,Pe,tt){let vt=we.view.Ic(Pe);vt.ks&&(vt=yield hb(q.localStore,we.query,!1).then(({documents:wn})=>we.view.Ic(wn,vt)));const Ct=tt&&tt.targetChanges.get(we.targetId),dt=we.view.applyChanges(vt,q.isPrimaryClient,Ct);return wx(q,we.targetId,dt.Pc),dt.snapshot}),function(q,we,Pe,tt){return U.apply(this,arguments)})(n,T,S,N);var U};const i=yield hb(n.localStore,e,!0),a=new DP(e,i.Ks),l=a.Ic(i.documents),h=Cp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,h);wx(n,t,m.Pc);const v=new EU(e,t,a);return n.Cc.set(e,v),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),m.snapshot}),cx.apply(this,arguments)}function TU(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,ve.Z)(function*(n,e){const t=We(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!e_(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield __(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hw(t.remoteStore,r.targetId),b_(t,r.targetId)}).catch(Np))):(b_(t,r.targetId),yield __(t.localStore,r.targetId,!0))}),dx.apply(this,arguments)}function hx(){return hx=(0,ve.Z)(function*(n,e,t){const r=Nx(n);try{const i=yield function(a,l){const h=We(a),m=Xr.now(),v=l.reduce((S,N)=>S.add(N.key),yn());let T;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.Us.Es(S,v).next(N=>{T=N;const U=[];for(const q of l){const we=bw(q,T.get(q.key));null!=we&&U.push(new bl(q.key,we,gw(we.value.mapValue),cn.exists(!0)))}return h.gs.addMutationBatch(S,m,U,l)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.$c[a.currentUser.toKey()];m||(m=new Ir(Ht)),m=m.insert(l,h),a.$c[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Xc(r,i.changes),yield v_(r.remoteStore)}catch(i){const a=E_(i,"Failed to persist write");t.reject(a)}}),hx.apply(this,arguments)}function SP(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,ve.Z)(function*(n,e){const t=We(n);try{const r=yield UL(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.Oc.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Sc=!0:i.modifiedDocuments.size>0?Dt(l.Sc):i.removedDocuments.size>0&&(Dt(l.Sc),l.Sc=!1))}),yield Xc(t,r,e)}catch(r){yield Np(r)}}),fx.apply(this,arguments)}function AP(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,l)=>{const h=l.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=We(a);h.onlineState=l;let m=!1;h.queries.forEach((v,T)=>{for(const S of T.listeners)S.tc(l)&&(m=!0)}),m&&ox(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SU(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,ve.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let l=new Ir(Xe.comparator);l=l.insert(a,sr.newNoDocument(a,It.min()));const h=yn().add(a),m=new Ep(It.min(),new Map,new or(Ht),l,h);yield SP(r,m),r.kc=r.kc.remove(a),r.Oc.delete(e),Ex(r)}else yield __(r.localStore,e,!1).then(()=>b_(r,e,t)).catch(Np)}),px.apply(this,arguments)}function AU(n,e){return gx.apply(this,arguments)}function gx(){return gx=(0,ve.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield LL(t.localStore,e);vx(t,r,null),yx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xc(t,i)}catch(i){yield Np(i)}}),gx.apply(this,arguments)}function xU(n,e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,ve.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(a,l){const h=We(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.gs.lookupMutationBatch(m,l).next(T=>(Dt(null!==T),v=T.keys(),h.gs.removeMutationBatch(m,T))).next(()=>h.gs.performConsistencyCheck(m)).next(()=>h.Us.Es(m,v))})}(r.localStore,e);vx(r,e,t),yx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(r,i)}catch(i){yield Np(i)}}),mx.apply(this,arguments)}function _x(){return _x=(0,ve.Z)(function*(n,e){const t=We(n);Ah(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=We(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=E_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),_x.apply(this,arguments)}function yx(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function vx(n,e,t){const r=We(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function b_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||xP(n,r)})}function xP(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Hw(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),Ex(n))}function wx(n,e,t){for(const r of t)r instanceof bP?(n.Mc.addReference(r.key,e),MU(n,r)):r instanceof TP?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||xP(n,r.key)):ct()}function MU(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.xc.add(r),Ex(n))}function Ex(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Xe(tn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new CU(t)),n.kc=n.kc.insert(t,r),mb(n.remoteStore,new Mt(Lo(hp(t.path)),r,2,Fs.A))}}function Xc(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,ve.Z)(function*(n,e,t){const r=We(n),i=[],a=[],l=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,m)=>{l.push(r.Uc(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const T=TA.Ss(m.targetId,v);a.push(T)}}))}),yield Promise.all(l),r.Dc.To(i),yield(h=(0,ve.Z)(function*(m,v){const T=We(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>f.forEach(v,N=>f.forEach(N.vs,U=>T.persistence.referenceDelegate.addReference(S,N.targetId,U)).next(()=>f.forEach(N.Vs,U=>T.persistence.referenceDelegate.removeReference(S,N.targetId,U)))))}catch(S){if(!x(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const U=T.Ms.get(N),we=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ms=T.Ms.insert(N,we)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),Cx.apply(this,arguments)}function NU(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ve.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield iP(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(l=>{l.forEach(h=>{h.reject(new ke(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xc(t,r.qs)}var i}),Ix.apply(this,arguments)}function PU(n,e){const t=We(n),r=t.Oc.get(e);if(r&&r.Sc)return yn().add(r.key);{let i=yn();const a=t.Nc.get(e);if(!a)return i;for(const l of a){const h=t.Cc.get(l);i=i.unionWith(h.view.yc)}return i}}function kU(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,ve.Z)(function*(n,e){const t=We(n),r=yield hb(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&wx(t,e.targetId,i.Pc),i}),bx.apply(this,arguments)}function OU(n){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,ve.Z)(function*(n){const e=We(n);return uP(e.localStore).then(t=>Xc(e,t))}),Tx.apply(this,arguments)}function FU(n,e,t,r){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,ve.Z)(function*(n,e,t,r){const i=We(n),a=yield function(l,h){const m=We(l),v=We(m.gs);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Ge(T,h).next(S=>S?m.Us.Es(T,S):f.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield v_(i.remoteStore):"acknowledged"===t||"rejected"===t?(vx(i,e,r||null),yx(i,e),h=e,We(We(i.localStore).gs).Qe(h)):ct(),yield Xc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Dx.apply(this,arguments)}function Sx(){return Sx=(0,ve.Z)(function*(n,e){const t=We(n);if(Mx(t),Nx(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RP(t,r.toArray());t.Lc=!0,yield XA(t.remoteStore,!0);for(const a of i)mb(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(b_(t,l),__(t.localStore,l,!0))),Hw(t.remoteStore,l)}),yield i,yield RP(t,r),function(a){const l=We(a);l.Oc.forEach((h,m)=>{Hw(l.remoteStore,m)}),l.Mc.ii(),l.Oc=new Map,l.kc=new Ir(Xe.comparator)}(t),t.Lc=!1,yield XA(t.remoteStore,!1)}}),Sx.apply(this,arguments)}function RP(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ve.Z)(function*(n,e,t){const r=We(n),i=[],a=[];for(const l of e){let h;const m=r.Nc.get(l);if(m&&0!==m.length){h=yield m_(r.localStore,Lo(m[0]));for(const v of m){const T=r.Cc.get(v),S=yield kU(r,T);S.snapshot&&a.push(S.snapshot)}}else{const v=yield aP(r.localStore,l);h=yield m_(r.localStore,v),yield lx(r,MP(v),l,!1)}i.push(h)}return r.Dc.To(a),i}),Ax.apply(this,arguments)}function MP(n){return _w(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UU(n){const e=We(n);return We(We(e.localStore).persistence).ds()}function VU(n,e,t,r){return xx.apply(this,arguments)}function xx(){return xx=(0,ve.Z)(function*(n,e,t,r){const i=We(n);if(i.Lc)Be("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield uP(i.localStore),l=Ep.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Xc(i,a,l);break}case"rejected":yield __(i.localStore,e,!0),b_(i,e,r);break;default:ct()}}),xx.apply(this,arguments)}function BU(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ve.Z)(function*(n,e,t){const r=Mx(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield aP(r.localStore,i),l=yield m_(r.localStore,a);yield lx(r,MP(a),l.targetId,!1),mb(r.remoteStore,l)}for(const i of t)r.Nc.has(i)&&(yield __(r.localStore,i,!1).then(()=>{Hw(r.remoteStore,i),b_(r,i)}).catch(Np))}}),Rx.apply(this,arguments)}function Mx(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SU.bind(null,e),e.Dc.To=_U.bind(null,e.eventManager),e.Dc.qc=yU.bind(null,e.eventManager),e}function Nx(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xU.bind(null,e),e}class NP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.O=Bw(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return rP(this.persistence,new nP,e.initialUser,this.O)}jc(e){return new ZL(NA.bi,this.O)}Gc(e){return new dP}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PP extends NP{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield function BL(n){return AA.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield Nx(r.zc.syncEngine),yield v_(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return rP(this.persistence,new nP,e.initialUser,this.O)}Qc(e){return new AL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=bA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new IA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fP(),gb(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new dP}}class HU extends PP{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof FA&&(r.sharedClientState.syncEngine={hr:FU.bind(null,i),lr:VU.bind(null,i),dr:BU.bind(null,i),ds:UU.bind(null,i),ar:OU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,ve.Z)(function*(l){yield function LU(n,e){return Sx.apply(this,arguments)}(r.zc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Gc(e){const t=fP();if(!FA.Vt(t))throw new ke(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new FA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Px{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>AP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=NU.bind(null,r.syncEngine),yield XA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mU}createDatastore(e){const t=Bw(e.databaseInfo.databaseId),r=new eU(e.databaseInfo);return new rU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>AP(this.syncEngine,h,0),l=hP.Vt()?new hP:new QL,new sU(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const T=new IU(r,i,a,l,h,m);return v&&(T.Lc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=We(t);Be("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield y_(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kP(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $U{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Sn,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new vU(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,ve.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,l){const h=We(a),m=bp(h.O)+"/documents",v={documents:l.map(U=>Uo(h.O,U))},T=yield h.Lr("BatchGetDocuments",m,v),S=new Map;T.forEach(U=>{const q=function LN(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Vo(t,r.found.name),a=ti(r.found.updateTime),l=new Zi({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Vo(t,r.missing),a=ti(r.readTime);return sr.newNoDocument(i,a)}(n,e):ct()}(h.O,U);S.set(q.key.toString(),q)});const N=[];return l.forEach(U=>{const q=S.get(U.toString());Dt(!!q),N.push(q)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new Ls(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const l=We(i),h=bp(l.O)+"/documents",m={writes:a.map(v=>c_(l.O,v))};yield l.Mr("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cn.updateTime(t):cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new ke(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cn.updateTime(t)}return cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qU{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new LA(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,ve.Z)(function*(){const t=new GU(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Aw(t)}return!1}}class WU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=lw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=E_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OP(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield iP(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kx.apply(this,arguments)}function FP(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Fx(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>wP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>wP(e.remoteStore,a)),n.onlineComponents=e}),Ox.apply(this,arguments)}function Fx(n){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,ve.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield OP(n,new NP)),n.offlineComponents}),Lx.apply(this,arguments)}function vb(n){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,ve.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield FP(n,new Px)),n.onlineComponents}),Ux.apply(this,arguments)}function LP(n){return Fx(n).then(e=>e.persistence)}function Vx(n){return Fx(n).then(e=>e.localStore)}function UP(n){return vb(n).then(e=>e.remoteStore)}function Bx(n){return vb(n).then(e=>e.syncEngine)}function T_(n){return jx.apply(this,arguments)}function jx(){return jx=(0,ve.Z)(function*(n){const e=yield vb(n),t=e.eventManager;return t.onListen=bU.bind(null,e.syncEngine),t.onUnlisten=TU.bind(null,e.syncEngine),t}),jx.apply(this,arguments)}function VP(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,m){const v=new yb({next:S=>{a.enqueueAndForget(()=>ix(i,T));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new ke(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?m.reject(new ke(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new ax(hp(l.path),v,{includeMetadataChanges:!0,uc:!0});return nx(i,T)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}function BP(n,e,t={}){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,m){const v=new yb({next:S=>{a.enqueueAndForget(()=>ix(i,T)),S.fromCache&&"server"===h.source?m.reject(new ke(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new ax(l,v,{includeMetadataChanges:!0,uc:!0});return nx(i,T)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}const jP=new Map;function Hx(n,e,t){if(!t)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HP(n,e,t,r){if(!0===e&&!0===r)throw new ke(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $P(n){if(!Xe.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GP(n){if(Xe.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wb(n);throw new ke(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qP(n,e){if(e<=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class WP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,HP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $w{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WP({}),this._settingsFrozen=!1,e instanceof jc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new uw;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jP.get(e);t&&(Be("ComponentProvider","Removing Datastore"),jP.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class _s{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class xl extends _s{constructor(e,t,r){super(e,t,hp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Xe(e))}withConverter(e){return new xl(this.firestore,e,this._path)}}function zP(n,e,...t){if(n=(0,k.m9)(n),Hx("collection","path",e),n instanceof $w){const r=tn.fromString(e,...t);return GP(r),new xl(n,null,r)}{if(!(n instanceof ar||n instanceof xl))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return GP(r),new xl(n.firestore,null,r)}}function Eb(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=lw.R()),Hx("doc","path",e),n instanceof $w){const r=tn.fromString(e,...t);return $P(r),new ar(n,null,new Xe(r))}{if(!(n instanceof ar||n instanceof xl))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return $P(r),new ar(n.firestore,n instanceof xl?n.converter:null,new Xe(r))}}function KP(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof ar||n instanceof xl)&&(e instanceof ar||e instanceof xl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZP(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&e_(n._query,e._query)&&n.converter===e.converter}class rV{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new LA(this,"async_queue_retry"),this.yu=()=>{const t=gb();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=gb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=gb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Sn;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,ve.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!x(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=tx.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&ct()}verifyOperationInProgress(){}Au(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function $x(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class iV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends $w{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new rV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||YP(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||YP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function YP(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bI(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new WU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function QP(n,e,t){const r=new Sn;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield OP(n,t),yield FP(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function JP(n){if(n._initialized||n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ed{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(kr.fromBase64String(e))}catch(t){throw new ke(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pp{constructor(e){this._methodName=e}}class Cb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const pV=/^__.*__$/;class gV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new yp(e,this.data,t,this.fieldTransforms)}}class XP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ek(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class Ib{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new Ib(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return Db(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(ek(this.Vu)&&pV.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class mV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Bw(e)}Fu(e,t,r,i=!1){return new Ib({Vu:e,methodName:t,$u:r,path:ei.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function kp(n){const e=n._freezeSettings(),t=Bw(n._databaseId);return new mV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bb(n,e,t,r,i,a={}){const l=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);zx("Data must be an object, but it was:",l,r);const h=rk(r,l);let m,v;if(a.merge)m=new hh(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const N=Kx(e,S,t);if(!l.contains(N))throw new ke(ge.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);sk(T,N)||T.push(N)}m=new hh(T),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new gV(new Zi(h),m,v)}class Gw extends Pp{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gw}}function tk(n,e,t){return new Ib({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Gx extends Pp{_toFieldTransform(e){return new _p(e.path,new Kc)}isEqual(e){return e instanceof Gx}}class _V extends Pp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=tk(this,e,!0),r=this.Bu.map(a=>Op(a,t)),i=new yh(r);return new _p(e.path,i)}isEqual(e){return this===e}}class yV extends Pp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=tk(this,e,!0),r=this.Bu.map(a=>Op(a,t)),i=new vh(r);return new _p(e.path,i)}isEqual(e){return this===e}}class vV extends Pp{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Il(e.O,Ew(e.O,this.Lu));return new _p(e.path,t)}isEqual(e){return this===e}}function qx(n,e,t,r){const i=n.Fu(1,e,t);zx("Data must be an object, but it was:",i,r);const a=[],l=Zi.empty();_u(r,(m,v)=>{const T=Tb(e,m,t);v=(0,k.m9)(v);const S=i.xu(T);if(v instanceof Gw)a.push(T);else{const N=Op(v,S);null!=N&&(a.push(T),l.set(T,N))}});const h=new hh(a);return new XP(l,h,i.fieldTransforms)}function Wx(n,e,t,r,i,a){const l=n.Fu(1,e,t),h=[Kx(e,r,t)],m=[i];if(a.length%2!=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(Kx(e,a[N])),m.push(a[N+1]);const v=[],T=Zi.empty();for(let N=h.length-1;N>=0;--N)if(!sk(v,h[N])){const U=h[N];let q=m[N];q=(0,k.m9)(q);const we=l.xu(U);if(q instanceof Gw)v.push(U);else{const Pe=Op(q,we);null!=Pe&&(v.push(U),T.set(U,Pe))}}const S=new hh(v);return new XP(T,S,l.fieldTransforms)}function nk(n,e,t,r=!1){return Op(t,n.Fu(r?4:3,e))}function Op(n,e){if(ik(n=(0,k.m9)(n)))return zx("Unsupported field value:",e,n),rk(n,e);if(n instanceof Pp)return function(t,r){if(!ek(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Op(l,r.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ew(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xr.fromDate(t);return{timestampValue:s_(r.O,i)}}if(t instanceof Xr){const i=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:s_(r.O,i)}}if(t instanceof Cb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:KI(r.O,t._byteString)};if(t instanceof ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${wb(t)}`)}(n,e)}function rk(n,e){const t={};return cw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_u(n,(r,i)=>{const a=Op(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ik(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xr||n instanceof Cb||n instanceof Rl||n instanceof ar||n instanceof Pp)}function zx(n,e,t){if(!ik(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wb(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Kx(n,e,t){if((e=(0,k.m9)(e))instanceof ed)return e._internalPath;if("string"==typeof e)return Tb(n,e);throw Db("Field path arguments must be of type string or ",n,!1,void 0,t)}const wV=new RegExp("[~\\*/\\[\\]]");function Tb(n,e,t){if(e.search(wV)>=0)throw Db(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ed(...e.split("."))._internalPath}catch(r){throw Db(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Db(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new ke(ge.INVALID_ARGUMENT,h+n+m)}function sk(n,e){return n.some(t=>t.isEqual(e))}class qw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new EV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class EV extends qw{data(){return super.data()}}function Sb(n,e){return"string"==typeof e?Tb(n,e):e instanceof ed?e._internalPath:e._delegate._internalPath}class Fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class td extends qw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Sb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ww extends td{data(e={}){return super.data(e)}}class Rh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ww(this._firestore,this._userDataWriter,r.key,r,new Fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Ww(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Ww(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:CV(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function ok(n,e){return n instanceof td&&e instanceof td?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rh&&e instanceof Rh&&n._firestore===e._firestore&&ZP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ak(n){if(vw(n)&&0===n.explicitOrderBy.length)throw new ke(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zw{}function Mh(n,...e){for(const t of e)n=t._apply(n);return n}class IV extends zw{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=kp(e.firestore),r=function(i,a,l,h,m,v,T){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){fk(T,v);const U=[];for(const q of T)U.push(hk(h,i,q));S={arrayValue:{values:U}}}else S=hk(h,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||fk(T,v),S=nk(l,"where",T,"in"===v||"not-in"===v);const N=Ri.create(m,v,S);return function(U,q){if(q.S()){const Pe=kI(U);if(null!==Pe&&!Pe.isEqual(q.field))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${q.field.toString()}'`);const tt=PI(U);null!==tt&&pk(0,q.field,tt)}const we=function(Pe,tt){for(const vt of Pe.filters)if(tt.indexOf(vt.op)>=0)return vt.op;return null}(U,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==we)throw new ke(ge.INVALID_ARGUMENT,we===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${we.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new _s(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class TV extends zw{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new zc(i,a);return function(h,m){if(null===PI(h)){const v=kI(h);null!==v&&pk(0,v,m.field)}}(r,l),l}(e._query,this.Uu,this.Gu);return new _s(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new El(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uk extends zw{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new _s(e.firestore,e.converter,pp(e._query,this.ju,this.Qu))}}class lk extends zw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=dk(e,this.type,this.Wu,this.zu);return new _s(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ck extends zw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=dk(e,this.type,this.Wu,this.zu);return new _s(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dk(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof qw)return function(i,a,l,h,m){if(!h)throw new ke(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const T of fp(i))if(T.field.isKeyField())v.push(Km(a,h.key));else{const S=h.data.field(T.field);if(qm(S))throw new ke(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=T.field.canonicalString();throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new Wc(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=kp(n.firestore);return function(a,l,h,m,v,T){const S=a.explicitOrderBy;if(v.length>S.length)throw new ke(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let U=0;U<v.length;U++){const q=v[U];if(S[U].field.isKeyField()){if("string"!=typeof q)throw new ke(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!OI(a)&&-1!==q.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const we=a.path.child(tn.fromString(q));if(!Xe.isDocumentKey(we))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Pe=new Xe(we);N.push(Km(l,Pe))}else{const we=nk(h,m,q);N.push(we)}}return new Wc(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hk(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OI(e)&&-1!==t.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Xe.isDocumentKey(r))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Km(n,new Xe(r))}if(t instanceof ar)return Km(n,t._key);throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wb(t)}.`)}function fk(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pk(n,e,t){if(!t.isEqual(e))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zx{convertValue(e,t="none"){switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return _u(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Cb(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=II(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fh(e));default:return null}}convertTimestamp(e){const t=yu(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Dt(Fw(r));const i=new jc(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Ab(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PV extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class gk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kp(e)}set(e,t,r){this._verifyNotCommitted();const i=Nh(e,this._firestore),a=Ab(i.converter,t,r),l=bb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,cn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof ed?Wx(this._dataReader,"WriteBatch.update",a._key,t,r,i):qx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new Zc(t._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new ke(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Lp extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function mk(n,e,t){n=rn(n,ar);const r=rn(n.firestore,mr),i=Ab(n.converter,e,t);return D_(r,[bb(kp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,cn.none())])}function _k(n,e,t,...r){n=rn(n,ar);const i=rn(n.firestore,mr),a=kp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof ed?Wx(a,"updateDoc",n._key,e,t,r):qx(a,"updateDoc",n._key,e),D_(i,[l.toMutation(n._key,cn.exists(!0))])}function yk(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||$x(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if($x(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,T;if(n instanceof ar)v=rn(n.firestore,mr),T=hp(n._key.path),m={next:S=>{e[l]&&e[l](Yx(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=rn(n,_s);v=rn(S.firestore,mr),T=S._query;const N=new Lp(v);m={next:U=>{e[l]&&e[l](new Rh(v,N,S,U))},error:e[l+1],complete:e[l+2]},ak(n._query)}return function(S,N,U,q){const we=new yb(q),Pe=new ax(N,we,U);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return nx(yield T_(S),Pe)})),()=>{we.Jc(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return ix(yield T_(S),Pe)}))}}(ni(v),T,h,m)}function D_(n,e){return function(t,r){const i=new Sn;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function DU(n,e,t){return hx.apply(this,arguments)}(yield Bx(t),r,i)})),i.promise}(ni(n),e)}function Yx(n,e,t){const r=t.docs.get(e._key),i=new Lp(n);return new td(n,i,e._key,r,new Fp(t.hasPendingWrites,t.fromCache),e.converter)}class $V extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kp(e)}get(e){const t=Nh(e,this._firestore),r=new PV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new qw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new qw(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Nh(e,this._firestore),a=Ab(i.converter,t,r),l=bb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof ed?Wx(this._dataReader,"Transaction.update",a._key,t,r,i):qx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Lp(this._firestore);return super.get(e).then(i=>new td(this._firestore,r,t._key,i._document,new Fp(!1,!1),t.converter))}}function Qx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wk(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function Ek(){if(!function ZS(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Uc=On.SDK_VERSION,(0,On._registerComponent)(new ro.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new mr(i,new qS(t.getProvider("auth-internal")),new $m(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,On.registerVersion)(dh,"3.4.5",n),(0,On.registerVersion)(dh,"3.4.5","esm2017")}();class Kw{constructor(e){this._delegate=e}static fromBase64String(e){return Ek(),new Kw(Rl.fromBase64String(e))}static fromUint8Array(e){return wk(),new Kw(Rl.fromUint8Array(e))}toBase64(){return Ek(),this._delegate.toBase64()}toUint8Array(){return wk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Jx(n){return function JV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XV{enableIndexedDbPersistence(e,t){return function oV(n,e){JP(n=rn(n,mr));const t=ni(n),r=n._freezeSettings(),i=new Px;return QP(t,i,new PP(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aV(n){JP(n=rn(n,mr));const e=ni(n),t=n._freezeSettings(),r=new Px;return QP(e,r,new HU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uV(n){if(n._initialized&&!n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!E.Vt())return Promise.resolve();const i=r+"main";yield E.delete(i)}),function(r){return t.apply(this,arguments)})(bA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ck{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ap("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tV(n,e,t,r={}){var i;const a=(n=rn(n,$w))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ap("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Jr.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ke(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jr(m)}n._authCredentials=new up(new wI(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function cV(n){return function zU(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield LP(n),t=yield UP(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.Ko.delete(0),jw(i)}(t)}))}(ni(n=rn(n,mr)))}(this._delegate)}disableNetwork(){return function dV(n){return function KU(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield LP(n),t=yield UP(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=We(i);a.Ko.add(0),yield y_(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=rn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,HP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lV(n){return function(e){const t=new Sn;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function RU(n,e){return _x.apply(this,arguments)}(yield Bx(e),t)})),t.promise}(ni(n=rn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function HV(n,e){return function QU(n,e){const t=new yb(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield T_(n),i=t,We(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield T_(n),i=t,void We(r).Zo.delete(i);var r,i}))}}(ni(n=rn(n,mr)),$x(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new S_(this,zP(this._delegate,e))}catch(t){throw Us(t,"collection()","Firestore.collection()")}}doc(e){try{return new _a(this,Eb(this._delegate,e))}catch(t){throw Us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function nV(n,e){if(n=rn(n,$w),Hx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new El(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function GV(n,e){return function JU(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,vb(i).then(a=>a.datastore));var i;new qU(n.asyncQueue,r,e,t).run()})),t.promise}(ni(n=rn(n,mr)),t=>e(new $V(n,t)))}(this._delegate,t=>e(new Ik(this,t)))}batch(){return ni(this._delegate),new bk(new gk(this._delegate,e=>D_(this._delegate,e)))}loadBundle(e){return function hV(n,e){const t=ni(n=rn(n,mr)),r=new iV;return function XU(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return kP(m,v);if(m instanceof ArrayBuffer)return kP(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new $U(m,l);var m}(t,Bw(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function jU(n,e,t){const r=We(n);var i;(i=(0,ve.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(N,U){const q=We(N),we=ti(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",Pe=>q.Kn.getBundleMetadata(Pe,U.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(we)>=0)}(a.localStore,m))return yield l.close(),void h._completeWith((N=m,{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}));h._updateProgress(IP(m));const v=new wU(m,a.localStore,l.O);let T=yield l.Kc();for(;T;){const N=yield v.lc(T);N&&h._updateProgress(N),T=yield l.Kc()}const S=yield v.complete();yield Xc(a,S.ws,void 0),yield function(N,U){const q=We(N);return q.persistence.runTransaction("Save bundle","readwrite",we=>q.Kn.saveBundleMetadata(we,U))}(a.localStore,m),h._completeWith(S.progress)}catch(m){ap("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Bx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fV(n,e){return function eV(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield Vx(n),e)}))}(ni(n=rn(n,mr)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class xb extends Zx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kw(new Rl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _a.forKey(t,this.firestore,null)}}class Ik{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}get(e){const t=Vp(e);return this._delegate.get(t).then(r=>new Zw(this._firestore,new td(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Vp(e);return r?(Qx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}}class bk{constructor(e){this._delegate=e}set(e,t,r){const i=Vp(e);return r?(Qx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Up{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Up.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Up(e,new xb(e),t),i.set(t,a)),a}}Up.INSTANCES=new WeakMap;class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _a(t,new ar(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new _a(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new S_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new S_(this.firestore,zP(this._delegate,e))}catch(t){throw Us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof ar&&KP(this._delegate,e)}set(e,t){t=Qx("DocumentReference.set",t);try{return t?mk(this._delegate,e,t):mk(this._delegate,e)}catch(r){throw Us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_k(this._delegate,e):_k(this._delegate,e,t,...r)}catch(i){throw Us(i,"updateDoc()","DocumentReference.update()")}}delete(){return function BV(n){return D_(rn(n.firestore,mr),[new Zc(n._key,cn.none())])}(this._delegate)}onSnapshot(...e){const t=Tk(e),r=Dk(e,i=>new Zw(this.firestore,new td(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function OV(n){n=rn(n,ar);const e=rn(n.firestore,mr),t=ni(e),r=new Lp(e);return function ZU(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield function(m,v){const T=We(m);return T.persistence.runTransaction("read document","readonly",S=>T.Us.ys(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new ke(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=E_(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Vx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new td(e,r,n._key,i,new Fp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function FV(n){n=rn(n,ar);const e=rn(n.firestore,mr);return VP(ni(e),n._key,{source:"server"}).then(t=>Yx(e,n,t))}(this._delegate):function kV(n){n=rn(n,ar);const e=rn(n.firestore,mr);return VP(ni(e),n._key).then(t=>Yx(e,n,t))}(this._delegate),t.then(r=>new Zw(this.firestore,new td(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}function Us(n,e,t){return n.message=n.message.replace(e,t),n}function Tk(n){for(const e of n)if("object"==typeof e&&!Jx(e))return e;return{}}function Dk(n,e){var t,r;let i;return i=Jx(n[0])?n[0]:Jx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Zw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ok(this._delegate,e._delegate)}}class Yw extends Zw{data(e){const t=this._delegate.data(e);return function GS(n,e){n||ct()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}where(e,t,r){try{return new Vs(this.firestore,Mh(this._delegate,function bV(n,e,t){const r=e,i=Sb("where",n);return new IV(i,r,t)}(e,t,r)))}catch(i){throw Us(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,Mh(this._delegate,function DV(n,e="asc"){const t=e,r=Sb("orderBy",n);return new TV(r,t)}(e,t)))}catch(r){throw Us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,Mh(this._delegate,function SV(n){return qP("limit",n),new uk("limit",n,"F")}(e)))}catch(t){throw Us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,Mh(this._delegate,function AV(n){return qP("limitToLast",n),new uk("limitToLast",n,"L")}(e)))}catch(t){throw Us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,Mh(this._delegate,function xV(...n){return new lk("startAt",n,!0)}(...e)))}catch(t){throw Us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,Mh(this._delegate,function RV(...n){return new lk("startAfter",n,!1)}(...e)))}catch(t){throw Us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,Mh(this._delegate,function MV(...n){return new ck("endBefore",n,!1)}(...e)))}catch(t){throw Us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,Mh(this._delegate,function NV(...n){return new ck("endAt",n,!0)}(...e)))}catch(t){throw Us(t,"endAt()","Query.endAt()")}}isEqual(e){return ZP(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UV(n){n=rn(n,_s);const e=rn(n.firestore,mr),t=ni(e),r=new Lp(e);return function YU(n,e){const t=new Sn;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield hb(i,a,!0),m=new DP(a,h.Ks),v=m.Ic(h.documents),T=m.applyChanges(v,!1);l.resolve(T.snapshot)}catch(h){const m=E_(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Vx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Rh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function VV(n){n=rn(n,_s);const e=rn(n.firestore,mr),t=ni(e),r=new Lp(e);return BP(t,n._query,{source:"server"}).then(i=>new Rh(e,r,n,i))}(this._delegate):function LV(n){n=rn(n,_s);const e=rn(n.firestore,mr),t=ni(e),r=new Lp(e);return ak(n._query),BP(t,n._query).then(i=>new Rh(e,r,n,i))}(this._delegate),t.then(r=>new Xx(this.firestore,new Rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Tk(e),r=Dk(e,i=>new Xx(this.firestore,new Rh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yk(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}class tB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Yw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Yw(this._firestore,r))})}isEqual(e){return ok(this._delegate,e._delegate)}}class S_ extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _a(this.firestore,e):null}doc(e){try{return new _a(this.firestore,void 0===e?Eb(this._delegate):Eb(this._delegate,e))}catch(t){throw Us(t,"doc()","CollectionReference.doc()")}}add(e){return function jV(n,e){const t=rn(n.firestore,mr),r=Eb(n),i=Ab(n.converter,e);return D_(t,[bb(kp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,cn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _a(this.firestore,t))}isEqual(e){return KP(this._delegate,e._delegate)}withConverter(e){return new S_(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}function Vp(n){return rn(n,ar)}class eR{constructor(...e){this._delegate=new ed(...e)}static documentId(){return new eR(ei.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof ed&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WV(){return new Gx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bp(e)}static delete(){const e=function qV(){return new Gw("deleteField")}();return e._methodName="FieldValue.delete",new Bp(e)}static arrayUnion(...e){const t=function zV(...n){return new _V("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bp(t)}static arrayRemove(...e){const t=function KV(...n){return new yV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bp(t)}static increment(e){const t=function ZV(n){return new vV("increment",n)}(e);return t._methodName="FieldValue.increment",new Bp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nB={Firestore:Ck,GeoPoint:Cb,Timestamp:Xr,Blob:Kw,Transaction:Ik,WriteBatch:bk,DocumentReference:_a,DocumentSnapshot:Zw,Query:Vs,QueryDocumentSnapshot:Yw,QuerySnapshot:Xx,CollectionReference:S_,FieldPath:eR,FieldValue:Bp,setLogLevel:function eB(n){!function vI(n){mu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Sk(n,e){return function sB(n,e=Qg.z){return new xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function tR(n,e){return Sk(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function Rb(n,e){return tR(n,e).pipe(So(void 0),lm(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(T=>T.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function Ak(n,e,t){return Rb(n,t).pipe(Ei((r,i)=>function aB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),iS(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function nR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function xk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function iB(n){(function rB(n,e){n.INTERNAL.registerComponent(new ro.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nB)))})(n,(e,t)=>new Ck(e,t,new XV)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(jd.Z);class Rk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Rb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(So(void 0),lm(),Gn(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ei((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xk(e);return Ak(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return tR(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new Mk(this.ref.doc(e),this.afs)}}class Mk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=kk(r,t);return new Rk(i,a,this.afs)}snapshotChanges(){return function oB(n,e){return Sk(n,e).pipe(So(void 0),lm(),(0,_t.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(ln.iC)}}class lB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Rb(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gn(t=>t.length>0),ln.iC):Rb(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ei((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xk(e);return Ak(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return tR(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(ln.iC)}}const Nk=new p.OlP("angularfire2.enableFirestorePersistence"),Pk=new p.OlP("angularfire2.firestore.persistenceSettings"),cB=new p.OlP("angularfire2.firestore.settings"),dB=new p.OlP("angularfire2.firestore.use-emulator");function kk(n,e=(t=>t)){return{query:e(n),ref:n}}let Ok=(()=>{class n{constructor(t,r,i,a,l,h,m,v,T,S,N,U,q,we,Pe,tt,vt){this.schedulers=m;const Ct=(0,Vr.on)(t,h,r),dt=T;S&&Yg(Ct,h,N,q,we,Pe,U,tt),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const wn=h.runOutsideAngular(()=>Ct.firestore());if(a&&wn.settings(a),dt&&wn.useEmulator(...dt),i&&!Pa(l)){const Li=()=>{try{return(0,_n.D)(wn.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Wh){return"undefined"!=typeof console&&console.warn(Wh),et(!1)}};return[wn,h.runOutsideAngular(Li)]}return[wn,et(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=kk(i,r),h=this.schedulers.ngZone.run(()=>a);return new Rk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new lB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Mk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(Nk,8),p.LFG(cB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ln.HU),p.LFG(Pk,8),p.LFG(dB,8),p.LFG(Bd,8),p.LFG(Ly,8),p.LFG(Uy,8),p.LFG(Af,8),p.LFG(R0,8),p.LFG(Vy,8),p.LFG(Zg,8),p.LFG(hs,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hB=(()=>{class n{constructor(){Vd.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Nk,useValue:!0},{provide:Pk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Ok]}),n})();var fB=O(5032);const Fk="@firebase/database";let rR="";function Uk(n){rR=n}class mB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _B{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Vk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mB(e)}}catch(e){}return new _B},jp=Vk("localStorage"),iR=Vk("sessionStorage"),A_=new ks.Yd("@firebase/database"),Bk=function(){let n=1;return function(){return n++}}(),jk=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Qw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Qw.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Hp=null,Hk=!0;const $k=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(A_.logLevel=ks.in.VERBOSE,Hp=A_.log.bind(A_),e&&iR.set("logging_enabled",!0)):"function"==typeof n?Hp=n:(Hp=null,iR.remove("logging_enabled"))},ki=function(...n){if(!0===Hk&&(Hk=!1,null===Hp&&!0===iR.get("logging_enabled")&&$k(!0)),Hp){const e=Qw.apply(null,n);Hp(e)}},Jw=function(n){return function(...e){ki(n,...e)}},sR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Qw(...n);A_.error(e)},Ml=function(...n){const e=`FIREBASE FATAL ERROR: ${Qw(...n)}`;throw A_.error(e),new Error(e)},Bs=function(...n){const e="FIREBASE WARNING: "+Qw(...n);A_.warn(e)},Mb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nd="[MIN_NAME]",Nl="[MAX_NAME]",$p=function(n,e){if(n===e)return 0;if(n===nd||e===Nl)return-1;if(e===nd||n===Nl)return 1;{const t=Nb(n),r=Nb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wB=function(n,e){return n===e?0:n<e?-1:1},Xw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},oR=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=oR(n[e[r]]);return t+="}",t},Gk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qk=function(n){(0,k.hu)(!Mb(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const T=v.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(T.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},bB=new RegExp("^-?(0*)\\d{1,10}$"),Wk=-2147483648,aR=2147483647,Nb=function(n){if(bB.test(n)){const e=Number(n);if(e>=Wk&&e<=aR)return e}return null},x_=function(n){try{n()}catch(e){setTimeout(()=>{throw Bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},eE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class DB{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class SB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bs(e)}}let tE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Qk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xk="websocket",eO="long_polling";class lR{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tO(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Xk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==eO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function xB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class RB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const cR={},dR={};function hR(n){const e=n.toString();return cR[e]||(cR[e]=new RB),cR[e]}class NB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&x_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class R_{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jw(e),this.stats_=hR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),tO(t,eO,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fR((...a)=>{const[l,h,m,v,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Qk.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){R_.forceAllow_=!0}static forceDisallow(){R_.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!R_.forceAllow_&&(R_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Gk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class fR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Bk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=fR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){ki("frame writing exception"),h.stack&&ki(h.stack),ki(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ki("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ki("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nE=null;"undefined"!=typeof MozWebSocket?nE=MozWebSocket:"undefined"!=typeof WebSocket&&(nE=WebSocket);let rE=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jw(this.connId),this.stats_=hR(r),this.connURL=n.connectionURL_(r,h,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&Qk.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),tO(t,Xk,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jp.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${rR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new nE(this.connURL,[],a)}else this.mySock=new nE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==nE&&!n.forceDisallow_}static previouslyFailed(){return jp.isInMemoryStorage||!0===jp.get("previous_websocket_failure")}markConnectionHealthy(){jp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Gk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class pR{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[R_,rE]}initTransports_(e){const t=rE&&rE.isAvailable();let r=t&&!rE.previouslyFailed();if(e.webSocketOnly&&(t||Bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rE];else{const i=this.transports_=[];for(const a of pR.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class pO{constructor(e,t,r,i,a,l,h,m,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jw("c:"+this.id+":"),this.transportManager_=new pR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=eE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xw("t",e),r=Xw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xw("t",e),r=Xw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?sR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),eE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class kb extends mO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kb}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new bn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ph(n){return n.pieces_.length-n.pieceNum_}function Ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function mR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function iE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function _r(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return js(Ln(n),Ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function e2(n,e){const t=iE(n,0),r=iE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=$p(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function _R(n,e){if(Ph(n)!==Ph(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ya(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ph(n)>Ph(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class t2{constructor(e,t){this.errorPrefix_=t,this.parts_=iE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);wO(this)}}function wO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gp(n))}function Gp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class yR extends mO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new yR}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const sE=1e3;let Fb,qp=(()=>{class n extends gO{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Jw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&kb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,T=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):sR("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const T=function(){v?v.close():(m=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(U)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?ki("getToken() completed but was canceled"):(ki("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,v=new pO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,we=>{Bs(we+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&Bs(U),T())}}})()}interrupt(t){ki("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ki("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=sE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>oR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ki("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ki("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+rR.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=kb.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class Ob{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(nd,e),i=new Kt(nd,t);return 0!==this.compare(r,i)}minPost(){return Kt.MIN}}class IO extends Ob{static get __EMPTY_NODE(){return Fb}static set __EMPTY_NODE(e){Fb=e}compare(e,t){return $p(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(Nl,Fb)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,Fb)}toString(){return".key"}}const Pl=new IO;class Lb{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wR,Cu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:mo.EMPTY_NODE,this.right=null!=l?l:mo.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return mo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class mo{constructor(e,t=mo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new mo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cu.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Lb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Lb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Lb(this.root_,null,this.comparator_,!0,e)}}function c2(n,e){return $p(n.name,e.name)}function vR(n,e){return $p(n,e)}mo.EMPTY_NODE=new class l2{copy(e,t,r,i,a){return this}insert(e,t,r){return new Cu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bO=function(n){return"number"==typeof n?"number:"+qk(n):"string:"+n},TO=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===wR||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===wR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let DO,SO,AO,M_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),TO(this.priorityNode_)}static set __childrenNodeConstructor(t){DO=t}static get __childrenNodeConstructor(){return DO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Ph(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ln(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qk(this.value_):this.value_,this.lazyHash_=jk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class p2 extends Ob{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?$p(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(Nl,new M_("[PRIORITY-POST]",AO))}makePost(e,t){const r=SO(e);return new Kt(t,new M_("[PRIORITY-POST]",r))}toString(){return".priority"}},g2=Math.log(2);class m2{constructor(e){this.count=parseInt(Math.log(e+1)/g2,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ub=function(n,e,t,r){n.sort(e);const i=function(m,v){const T=v-m;let S,N;if(0===T)return null;if(1===T)return S=n[m],N=t?t(S):S,new Cu(N,S.node,Cu.BLACK,null,null);{const U=parseInt(T/2,10)+m,q=i(m,U),we=i(U+1,v);return S=n[U],N=t?t(S):S,new Cu(N,S.node,Cu.BLACK,q,we)}},h=function(m){let v=null,T=null,S=n.length;const N=function(q,we){const Pe=S-q,tt=S;S-=q;const vt=i(Pe+1,tt),Ct=n[Pe],dt=t?t(Ct):Ct;U(new Cu(dt,Ct.node,we,null,vt))},U=function(q){v?(v.left=q,v=q):(T=q,v=q)};for(let q=0;q<m.count;++q){const we=m.nextBitIsOne(),Pe=Math.pow(2,m.count-(q+1));we?N(Pe,Cu.BLACK):(N(Pe,Cu.BLACK),N(Pe,Cu.RED))}return T}(new m2(n.length));return new mo(r||e,h)};let ER;const N_={};class rd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(N_&&zn,"ChildrenNode.ts has not been loaded"),ER=ER||new rd({".priority":N_},{".priority":zn}),ER}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof mo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Kt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?Ub(r,e.getCompare()):N_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const T=Object.assign({},this.indexes_);return T[m]=h,new rd(T,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===N_){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(Kt.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),Ub(h,l.getCompare())}return N_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Kt(e.name,h))),m.insert(e,e.node)}});return new rd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===N_)return i;{const a=t.get(e.name);return a?i.remove(new Kt(e.name,a)):i}});return new rd(r,this.indexSet_)}}let oE,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&TO(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return oE||(oE=new n(new mo(vR),null,rd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||oE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?oE:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Kt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?oE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Gt(t)||1===Ph(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Ln(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(zn,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+bO(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":jk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Kt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===aE?-1:0}withIndex(t){if(t===Pl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),a=r.getIterator(zn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Pl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const aE=new class _2 extends Vt{constructor(){super(new mo(vR),Vt.EMPTY_NODE,rd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new M_(n,Tr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(Oi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Tr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Kt(l,m)))}}),0===t.length)return Vt.EMPTY_NODE;const a=Ub(t,c2,l=>l.name,vR);if(r){const l=Ub(t,zn.getCompare());return new Vt(a,Tr(e),new rd({".priority":l},{".priority":zn}))}return new Vt(a,Tr(e),rd.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(nd,Vt.EMPTY_NODE)},MAX:{value:new Kt(Nl,aE)}}),IO.__EMPTY_NODE=Vt.EMPTY_NODE,M_.__childrenNodeConstructor=Vt,function d2(n){wR=n}(aE),function f2(n){AO=n}(aE),function h2(n){SO=n}(Tr);class CR extends Ob{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!qt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?$p(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,aE);return new Kt(Nl,e)}toString(){return iE(this.indexPath_,0).join("/")}}const IR=new class v2 extends Ob{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?$p(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=Tr(e);return new Kt(t,r)}toString(){return".value"}},P_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",w2=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=P_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=P_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),MO=function(n){if(n===""+aR)return"-";const e=Nb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nl;const a=P_.charAt(P_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},NO=function(n){if(n===""+Wk)return nd;const e=Nb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+aR:(delete t[t.length-1],t.join("")):(t[t.length-1]=P_.charAt(P_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function PO(n){return{type:"value",snapshotNode:n}}function k_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function uE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function lE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class TR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(uE(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(k_(t,r)):l.trackChildChange(lE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(uE(i,a))}),t.isLeafNode()||t.forEachChild(zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(lE(i,a,l))}else r.trackChildChange(k_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cE{constructor(e){this.indexedFilter_=new TR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cE.getStartPost_(e),this.endPost_=cE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(zn,(l,h)=>{a.matches(new Kt(l,h))||(i=i.updateImmediateChild(l,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class C2{constructor(e){this.rangedFilter_=new cE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,U)=>S(U,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,T=!1;for(;m.hasNext();){const S=m.getNext();!T&&h(a,S)<=0&&(T=!0),T&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,U)=>S(U,N)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new Kt(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const U=null==N?1:l(N,m);if(T&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(lE(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(uE(t,S));const we=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(k_(N.name,N.node)),we.updateImmediateChild(N.name,N.node)):we}}return r.isEmpty()?e:T&&l(v,m)>=0?(null!=a&&(a.trackChildChange(uE(v.name,v.node)),a.trackChildChange(k_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Vt.EMPTY_NODE)):e}}class Vb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new Vb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function SR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Bb(n,e){const t=n.copy();return t.index_=e,t}function kO(n){const e={};if(n.isDefault())return e;let t;return n.index_===zn?t="$priority":n.index_===IR?t="$value":n.index_===Pl?t="$key":((0,k.hu)(n.index_ instanceof CR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function OO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class jb extends gO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Jw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=jb.getListenId_(e,r),h={};this.listens_[l]=h;const m=kO(e._queryParams);this.restRequest_(a+".json",m,(v,T)=>{let S=T;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=jb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=kO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch(v){Bs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Bs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class A2{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hb(){return{value:null,children:new Map}}function O_(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,Hb()),O_(n.children.get(r),e=Ln(e),t)}}function AR(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(r,i)=>{O_(n,new bn(r),i)}),AR(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Ln(e),n.children.has(t)&&AR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function xR(n,e,t){null!==n.value?t(e,n.value):function x2(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{xR(i,new bn(e.toString()+"/"+r),t)})}class R2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class P2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new R2(e);const r=1e4+2e4*Math.random();eE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),eE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(va||(va={})),va))();function NR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class $b{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new $b(vn(),t,this.revert)}}return(0,k.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new $b(Ln(this.path),this.affectedTree,this.revert)}}class dE{constructor(e,t){this.source=e,this.path=t,this.type=va.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new dE(this.source,vn()):new dE(this.source,Ln(this.path))}}class Wp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=va.OVERWRITE}operationForChild(e){return qt(this.path)?new Wp(this.source,vn(),this.snap.getImmediateChild(e)):new Wp(this.source,Ln(this.path),this.snap)}}class F_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=va.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new Wp(this.source,vn(),t.value):new F_(this.source,vn(),t)}return(0,k.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new F_(this.source,Ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class k2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function L2(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),i=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function F2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function Gb(n,e){return{eventCache:n,serverCache:e}}function fE(n,e,t,r){return Gb(new kh(e,t,r),n.serverCache)}function LO(n,e,t,r){return Gb(n.eventCache,new kh(e,t,r))}function qb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PR;class Kn{constructor(e,t=(()=>(PR||(PR=new mo(wB)),PR))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return Oi(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(qt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Ln(e),t);return null!=a?{path:_r(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Ln(e)):new Kn(null)}}set(e,t){if(qt(e))return new Kn(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new Kn(null)).set(Ln(e),t),l=this.children.insert(r,a);return new Kn(this.value,l)}}remove(e){if(qt(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Ln(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Kn(null):new Kn(this.value,a)}return this}}get(e){if(qt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Ln(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new Kn(null)).setTree(Ln(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Kn(this.value,l)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(_r(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const a=Gt(e),l=this.children.get(a);return l?l.findOnPath_(Ln(e),_r(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Ln(e),_r(t,i),r):new Kn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_r(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Iu{constructor(e){this.writeTree_=e}static empty(){return new Iu(new Kn(null))}}function pE(n,e,t){if(qt(e))return new Iu(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=js(i,e);return a=a.updateChild(l,t),new Iu(n.writeTree_.set(i,a))}{const i=new Kn(t),a=n.writeTree_.setTree(e,i);return new Iu(a)}}}function kR(n,e,t){let r=n;return Oi(t,(i,a)=>{r=pE(r,_r(e,i),a)}),r}function UO(n,e){if(qt(e))return Iu.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new Iu(t)}}function OR(n,e){return null!=Kp(n,e)}function Kp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function VO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new Kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Kt(r,i.value))}),e}function Oh(n,e){if(qt(e))return n;{const t=Kp(n,e);return new Iu(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function FR(n){return n.writeTree_.isEmpty()}function L_(n,e){return BO(vn(),n.writeTree_,e)}function BO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=BO(_r(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_r(n,".priority"),r)),t}}function Wb(n,e){return qO(e,n)}function $2(n,e){if(n.snap)return ya(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ya(_r(n.path,t),e))return!0;return!1}function q2(n){return n.visible}function jO(n,e,t){let r=Iu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)ya(t,l)?(h=js(t,l),r=pE(r,h,a.snap)):ya(l,t)&&(h=js(l,t),r=pE(r,vn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ya(t,l))h=js(t,l),r=kR(r,h,a.children);else if(ya(l,t))if(h=js(l,t),qt(h))r=kR(r,vn(),a.children);else{const m=(0,k.DV)(a.children,Gt(h));if(m){const v=m.getChild(Ln(h));r=pE(r,vn(),v)}}}}}return r}function HO(n,e,t,r,i){if(r||i){const a=Oh(n.visibleWrites,e);return!i&&FR(a)?t:i||null!=t||OR(a,vn())?L_(jO(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ya(v.path,e)||ya(e,v.path))},e),t||Vt.EMPTY_NODE):null}{const a=Kp(n.visibleWrites,e);if(null!=a)return a;{const l=Oh(n.visibleWrites,e);return FR(l)?t:null!=t||OR(l,vn())?L_(l,t||Vt.EMPTY_NODE):null}}}function zb(n,e,t,r){return HO(n.writeTree,n.treePath,e,t,r)}function LR(n,e){return function W2(n,e,t){let r=Vt.EMPTY_NODE;const i=Kp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Oh(n.visibleWrites,e);return t.forEachChild(zn,(l,h)=>{const m=L_(Oh(a,new bn(l)),h);r=r.updateImmediateChild(l,m)}),VO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return VO(Oh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function $O(n,e,t,r){return function z2(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=_r(e,t);if(OR(n.visibleWrites,a))return null;{const l=Oh(n.visibleWrites,a);return FR(l)?i.getChild(t):L_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Kb(n,e){return function Z2(n,e){return Kp(n.visibleWrites,e)}(n.writeTree,_r(n.treePath,e))}function UR(n,e,t){return function K2(n,e,t,r){const i=_r(e,t),a=Kp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?L_(Oh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function GO(n,e){return qO(_r(n.treePath,e),n.writeTree)}function qO(n,e){return{treePath:n,writeTree:e}}class X2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,lE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,uE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,k_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,lE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const WO=new class ej{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class VR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new kh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return UR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zp(this.viewCache_),a=function J2(n,e,t,r,i,a){return function Y2(n,e,t,r,i,a,l){let h;const m=Oh(n.visibleWrites,e),v=Kp(m,vn());if(null!=v)h=v;else{if(null==t)return[];h=L_(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const T=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=N.getNext();for(;U&&T.length<i;)0!==S(U,r)&&T.push(U),U=N.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function zO(n,e,t,r,i,a){const l=e.eventCache;if(null!=Kb(r,t))return e;{let h,m;if(qt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=zp(e),S=LR(r,v instanceof Vt?v:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=zb(r,zp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Gt(t);if(".priority"===v){(0,k.hu)(1===Ph(t),"Can't have a priority with additional path components");const T=l.getNode();m=e.serverCache.getNode();const S=$O(r,t,T,m);h=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=Ln(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const N=$O(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(v).updateChild(T,N):l.getNode().getImmediateChild(v)}else S=UR(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,T,i,a):l.getNode()}}return fE(e,h,l.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function Zb(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const T=l?n.filter:n.filter.getIndexedFilter();if(qt(t))v=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);v=T.updateFullNode(m.getNode(),U,null)}else{const U=Gt(t);if(!m.isCompleteForPath(t)&&Ph(t)>1)return e;const q=Ln(t),Pe=m.getNode().getImmediateChild(U).updateChild(q,r);v=".priority"===U?T.updatePriority(m.getNode(),Pe):T.updateChild(m.getNode(),U,Pe,q,WO,null)}const S=LO(e,v,m.isFullyInitialized()||qt(t),T.filtersNodes());return zO(n,S,t,i,new VR(i,S,a),h)}function BR(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const T=new VR(i,e,a);if(qt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=fE(e,v,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=fE(e,v,h.isFullyInitialized(),h.isFiltered());else{const N=Ln(t),U=h.getNode().getImmediateChild(S);let q;if(qt(N))q=r;else{const we=T.getCompleteChild(S);q=null!=we?".priority"===mR(N)&&we.getChild(vO(N)).isEmpty()?we:we.updateChild(N,r):Vt.EMPTY_NODE}m=U.equals(q)?e:fE(e,n.filter.updateChild(h.getNode(),S,q,N,T,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function KO(n,e){return n.eventCache.isCompleteForChild(e)}function ZO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=qt(t)?r:new Kn(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(T.hasChild(S)){const q=ZO(0,e.serverCache.getNode().getImmediateChild(S),N);m=Zb(n,m,new bn(S),q,i,a,l,h)}}),v.children.inorderTraversal((S,N)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!T.hasChild(S)&&!U){const we=ZO(0,e.serverCache.getNode().getImmediateChild(S),N);m=Zb(n,m,new bn(S),we,i,a,l,h)}}),m}class lj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new TR(r.getIndex()),a=function I2(n){return n.loadsAllData()?new TR(n.getIndex()):n.hasLimit()?new C2(n):new cE(n)}(r);this.processor_=function tj(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Vt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),T=new kh(m,l.isFullyInitialized(),i.filtersNodes()),S=new kh(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Gb(S,T),this.eventGenerator_=new k2(this.query_)}get query(){return this.query_}}function hj(n,e){const t=zp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function YO(n){return 0===n.eventRegistrations_.length}function QO(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JO(n,e,t,r){e.type===va.MERGE&&null!==e.source.queryId&&((0,k.hu)(zp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(qb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function rj(n,e,t,r,i){const a=new X2;let l,h;if(t.type===va.OVERWRITE){const v=t;v.source.fromUser?l=BR(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!qt(v.path),l=Zb(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===va.MERGE){const v=t;v.source.fromUser?l=function sj(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const T=_r(t,m);KO(e,Gt(T))&&(h=BR(n,h,T,v,i,a,l))}),r.foreach((m,v)=>{const T=_r(t,m);KO(e,Gt(T))||(h=BR(n,h,T,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=jR(n,e,v.path,v.children,r,i,h,a))}else if(t.type===va.ACK_USER_WRITE){const v=t;l=v.revert?function uj(n,e,t,r,i,a){let l;if(null!=Kb(r,t))return e;{const h=new VR(r,e,i),m=e.eventCache.getNode();let v;if(qt(t)||".priority"===Gt(t)){let T;if(e.serverCache.isFullyInitialized())T=zb(r,zp(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Vt,"serverChildren would be complete if leaf node"),T=LR(r,S)}T=T,v=n.filter.updateFullNode(m,T,a)}else{const T=Gt(t);let S=UR(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=m.getImmediateChild(T)),v=null!=S?n.filter.updateChild(m,T,S,Ln(t),h,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Vt.EMPTY_NODE,Ln(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=zb(r,zp(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Kb(r,vn()),fE(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function oj(n,e,t,r,i,a,l){if(null!=Kb(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(qt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Zb(n,e,t,m.getNode().getChild(t),i,a,h,l);if(qt(t)){let v=new Kn(null);return m.getNode().forEachChild(Pl,(T,S)=>{v=v.set(new bn(T),S)}),jR(n,e,t,v,i,a,h,l)}return e}{let v=new Kn(null);return r.foreach((T,S)=>{const N=_r(t,T);m.isCompleteForPath(N)&&(v=v.set(T,m.getNode().getChild(N)))}),jR(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==va.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function aj(n,e,t,r,i){const a=e.serverCache;return zO(n,LO(e,a.getNode(),a.isFullyInitialized()||qt(t),a.isFiltered()),t,r,WO,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function ij(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=qb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(PO(qb(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function nj(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,XO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function XO(n,e,t,r){return function O2(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function E2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),hE(n,i,"child_removed",e,r,t),hE(n,i,"child_added",e,r,t),hE(n,i,"child_moved",a,r,t),hE(n,i,"child_changed",e,r,t),hE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Yb,Jb;class e1{constructor(){this.views=new Map}}function HR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(JO(l,e,t,r));return a}}function t1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=zb(t,i?r:null),m=!1;h?m=!0:r instanceof Vt?(h=LR(t,r),m=!1):(h=Vt.EMPTY_NODE,m=!1);const v=Gb(new kh(h,m,!1),new kh(r,i,!1));return new lj(e,v)}return l}function n1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Fh(n,e){let t=null;for(const r of n.views.values())t=t||hj(r,e);return t}function r1(n,e){return e._queryParams.loadsAllData()?Qb(n):n.views.get(e._queryIdentifier)}function i1(n,e){return null!=r1(n,e)}function Lh(n){return null!=Qb(n)}function Qb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Cj=1;class s1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_=function Q2(){return{visibleWrites:Iu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $R(n,e,t,r,i){return function V2(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?U_(n,new Wp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Uh(n,e,t=!1){const r=function j2(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function H2(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&$2(h,r.path)?i=!1:ya(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function G2(n){n.visibleWrites=jO(n.allWrites,q2,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=UO(n.visibleWrites,r.path):Oi(r.children,m=>{n.visibleWrites=UO(n.visibleWrites,_r(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Kn(null);return null!=r.snap?a=a.set(vn(),!0):Oi(r.children,l=>{a=a.set(new bn(l),!0)}),U_(n,new $b(r.path,a,t))}return[]}function gE(n,e,t){return U_(n,new Wp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function GR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||i1(a,e))){const h=function vj(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Lh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(QO(v,t,r)),YO(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(QO(m,t,r)),YO(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Lh(n)&&a.push(new(function mj(){return(0,k.hu)(Yb,"Reference.ts has not been loaded"),Yb}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function _j(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;l=h.events;const v=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,N)=>Lh(N));if(v&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function Rj(n){return n.fold((e,t,r)=>{if(t&&Lh(t))return[Qb(t)];{let i=[];return t&&(i=n1(t)),Oi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<N.length;++U){const q=N[U],we=q.query,Pe=l1(n,q);n.listenProvider_.startListening(mE(we),eT(n,we),Pe.hashFn,Pe.onComplete)}}}!T&&m.length>0&&!r&&(v?n.listenProvider_.stopListening(mE(e),null):m.forEach(S=>{const N=n.queryToTagMap.get(tT(S));n.listenProvider_.stopListening(mE(S),N)})),function Mj(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=tT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return l}function o1(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const U=js(S,r);i=i||Fh(N,U),a=a||Lh(N)});let h,l=n.syncPointTree_.get(r);l?(a=a||Lh(l),i=i||Fh(l,vn())):(l=new e1,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,U)=>{const q=Fh(U,vn());q&&(i=i.updateImmediateChild(N,q))}));const m=i1(l,e);if(!m&&!e._queryParams.loadsAllData()){const S=tT(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function Nj(){return Cj++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let T=function yj(n,e,t,r,i,a){const l=t1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function fj(n,e){n.eventRegistrations_.push(e)}(l,t),function pj(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(a,l)=>{r.push(k_(a,l))}),t.isFullyInitialized()&&r.push(PO(t.getNode())),XO(n,r,t.getNode(),e)}(l,t)}(l,e,t,Wb(n.pendingWriteTree_,r),i,h);if(!m&&!a){const S=r1(l,e);T=T.concat(function Pj(n,e,t){const r=e._path,i=eT(n,e),a=l1(n,t),l=n.listenProvider_.startListening(mE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Lh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,T,S)=>{if(!qt(v)&&T&&Lh(T))return[Qb(T).query];{let N=[];return T&&(N=N.concat(n1(T).map(U=>U.query))),Oi(S,(U,q)=>{N=N.concat(q)}),N}});for(let v=0;v<m.length;++v){const T=m[v];n.listenProvider_.stopListening(mE(T),eT(n,T))}}return l}(n,e,S))}return T}function Xb(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=Fh(h,js(l,e));if(v)return v});return HO(i,e,a,t,!0)}function U_(n,e){return a1(e,n.syncPointTree_,null,Wb(n.pendingWriteTree_,vn()))}function a1(n,e,t,r){if(qt(n.path))return u1(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=Fh(i,vn()));let a=[];const l=Gt(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,T=GO(r,l);a=a.concat(a1(h,m,v,T))}return i&&(a=a.concat(HR(i,n,r,t))),a}}function u1(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=Fh(i,vn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=GO(r,l),T=n.operationForChild(l);T&&(a=a.concat(u1(T,h,m,v)))}),i&&(a=a.concat(HR(i,n,r,t))),a}function l1(n,e){const t=e.query,r=eT(n,t);return{hashFn:()=>(function cj(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Dj(n,e,t){const r=qR(n,t);if(r){const i=WR(r),a=i.path,l=i.queryId,h=js(a,e);return zR(n,a,new dE(NR(l),h))}return[]}(n,t._path,r):function Tj(n,e){return U_(n,new dE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function IB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return GR(n,t,null,a)}}}}function eT(n,e){const t=tT(e);return n.queryToTagMap.get(t)}function tT(n){return n._path.toString()+"$"+n._queryIdentifier}function qR(n,e){return n.tagToQueryMap.get(e)}function WR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function zR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),HR(r,t,Wb(n.pendingWriteTree_,e),null)}function mE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ej(){return(0,k.hu)(Jb,"Reference.ts has not been loaded"),Jb}())(n._repo,n._path):n}class KR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new KR(t)}node(){return this.node_}}class ZR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_r(this.path_,e);return new ZR(this.syncTree_,t)}node(){return Xb(this.syncTree_,this.path_)}}const c1=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Oj(n[".sv"],e,t):"object"==typeof n[".sv"]?Fj(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Oj=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},Fj=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},d1=function(n,e,t,r){return QR(e,new ZR(t,n),r)},YR=function(n,e,t){return QR(n,new KR(e),t)};function QR(n,e,t){const r=n.getPriority().val(),i=c1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=c1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new M_(h,Tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new M_(i))),l.forEachChild(zn,(h,m)=>{const v=QR(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class JR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function nT(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new JR(i,r,a),t=Ln(t),i=Gt(t)}return r}function Zp(n){return n.node.value}function XR(n,e){n.node.value=e,eM(n)}function h1(n){return n.node.childCount>0}function rT(n,e){Oi(n.node.children,(t,r)=>{e(new JR(t,n,r))})}function f1(n,e,t,r){t&&!r&&e(n),rT(n,i=>{f1(i,e,!0,r)}),t&&r&&e(n)}function _E(n){return new bn(null===n.parent?n.name:_E(n.parent)+"/"+n.name)}function eM(n){null!==n.parent&&function Vj(n,e,t){const r=function Lj(n){return void 0===Zp(n)&&!h1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,eM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,eM(n))}(n.parent,n.name,n)}const Bj=/[\[\].#$\/\u0000-\u001F\u007F]/,jj=/[\[\].#$\u0000-\u001F\u007F]/,tM=10485760,iT=function(n){return"string"==typeof n&&0!==n.length&&!Bj.test(n)},p1=function(n){return"string"==typeof n&&0!==n.length&&!jj.test(n)},yE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Mb(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},kl=function(n,e,t,r){r&&void 0===e||vE((0,k.gK)(n,"value"),e,t)},vE=function(n,e,t){const r=t instanceof bn?new t2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Gp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Gp(r)+" with contents = "+e.toString());if(Mb(e))throw new Error(n+"contains "+e.toString()+" "+Gp(r));if("string"==typeof e&&e.length>tM/3&&(0,k.ug)(e)>tM)throw new Error(n+"contains a string greater than "+tM+" utf8 bytes "+Gp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!iT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Gp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function n2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),wO(n)})(r,l),vE(n,h,r),function r2(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Gp(r)+" in addition to actual children.")}},g1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(l,h)=>{const m=new bn(l);if(vE(i,h,_r(t,m)),".priority"===mR(m)&&!yE(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=iE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!iT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(e2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ya(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},nM=function(n,e,t){if(!t||void 0!==e){if(Mb(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wE=function(n,e,t,r){if(!(r&&void 0===t||iT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},EE=function(n,e,t,r){if(!(r&&void 0===t||p1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wa=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},m1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class qj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!_R(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function rM(n,e,t){sT(n,t),_1(n,r=>_R(r,e))}function Ea(n,e,t){sT(n,t),_1(n,r=>ya(r,e)||ya(e,r))}function _1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Wj(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Wj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Hp&&ki("event: "+t.toString()),x_(r)}}}const y1="repo_interrupt";class Kj{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hb(),this.transactionQueueTree_=new JR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v1(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:v1(n)})}function w1(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,k.UI)(t,v=>Tr(v));l=function Aj(n,e,t,r){const i=qR(n,r);if(i){const a=WR(i),l=a.path,h=a.queryId,m=js(l,e),v=Kn.fromObject(t);return zR(n,l,new F_(NR(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Tr(t);l=function Sj(n,e,t,r){const i=qR(n,r);if(null!=i){const a=WR(i),l=a.path,h=a.queryId,m=js(l,e);return zR(n,l,new Wp(NR(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,k.UI)(t,v=>Tr(v));l=function bj(n,e,t){const r=Kn.fromObject(t);return U_(n,new F_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Tr(t);l=gE(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=B_(n,a)),Ea(n.eventQueue_,h,l)}function E1(n,e){iM(n,"connected",e),!1===e&&function Xj(n){V_(n,"onDisconnectEvents");const e=CE(n),t=Hb();xR(n.onDisconnect_,vn(),(i,a)=>{const l=d1(i,a,n.serverSyncTree_,e);O_(t,i,l)});let r=[];xR(t,vn(),(i,a)=>{r=r.concat(gE(n.serverSyncTree_,i,a));const l=uM(n,i);B_(n,l)}),n.onDisconnect_=Hb(),Ea(n.eventQueue_,vn(),r)}(n)}function iM(n,e,t){const r=new bn("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=gE(n.infoSyncTree_,r,i);Ea(n.eventQueue_,r,a)}function oT(n){return n.nextWriteId_++}function sM(n,e,t,r,i){V_(n,"set",{path:e.toString(),value:t,priority:r});const a=CE(n),l=Tr(t,r),h=Xb(n.serverSyncTree_,e),m=YR(l,h,a),v=oT(n),T=$R(n.serverSyncTree_,e,m,v,!0);sT(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(N,U)=>{const q="ok"===N;q||Bs("set at "+e+" failed: "+N);const we=Uh(n.serverSyncTree_,v,!q);Ea(n.eventQueue_,e,we),Vh(0,i,N,U)});const S=uM(n,e);B_(n,S),Ea(n.eventQueue_,S,[])}function eH(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&AR(n.onDisconnect_,e),Vh(0,t,r,i)})}function C1(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&O_(n.onDisconnect_,e,i),Vh(0,r,a,l)})}function oM(n,e,t){let r;r=".info"===Gt(e._path)?GR(n.infoSyncTree_,e,t):GR(n.serverSyncTree_,e,t),rM(n.eventQueue_,e._path,r)}function I1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(y1)}function V_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ki(t,...e)}function Vh(n,e,t,r){e&&x_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function aM(n,e,t){return Xb(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function aT(n,e=n.transactionQueueTree_){if(e||uT(n,e),Zp(e)){const t=T1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function oH(n,e,t){const r=t.map(v=>v.currentWriteId),i=aM(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=js(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{V_(n,"transaction put response",{path:m.toString(),status:v});let T=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,T=T.concat(Uh(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();uT(n,nT(n.transactionQueueTree_,e)),aT(n,n.transactionQueueTree_),Ea(n.eventQueue_,e,T);for(let N=0;N<S.length;N++)x_(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Bs("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}B_(n,e)}},l)}(n,_E(e),t)}else h1(e)&&rT(e,t=>{aT(n,t)})}function B_(n,e){const t=b1(n,e),r=_E(t);return function aH(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=js(t,m.path);let S,T=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,S=m.abortReason,i=i.concat(Uh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,S="maxretry",i=i.concat(Uh(n.serverSyncTree_,m.currentWriteId,!0));else{const N=aM(n,m.path,l);m.currentInputSnapshot=N;const U=e[h].update(N.val());if(void 0!==U){vE("transaction failed: Data returned ",U,m.path);let q=Tr(U);"object"==typeof U&&null!=U&&(0,k.r3)(U,".priority")||(q=q.updatePriority(N.getPriority()));const Pe=m.currentWriteId,tt=CE(n),vt=YR(q,N,tt);m.currentOutputSnapshotRaw=q,m.currentOutputSnapshotResolved=vt,m.currentWriteId=oT(n),l.splice(l.indexOf(Pe),1),i=i.concat($R(n.serverSyncTree_,m.path,vt,m.currentWriteId,m.applyLocally)),i=i.concat(Uh(n.serverSyncTree_,Pe,!0))}else T=!0,S="nodata",i=i.concat(Uh(n.serverSyncTree_,m.currentWriteId,!0))}Ea(n.eventQueue_,t,i),i=[],T&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}uT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)x_(r[h]);aT(n,n.transactionQueueTree_)}(n,T1(n,t),r),r}function b1(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===Zp(r);)r=nT(r,t),t=Gt(e=Ln(e));return r}function T1(n,e){const t=[];return D1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function D1(n,e,t){const r=Zp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);rT(e,i=>{D1(n,i,t)})}function uT(n,e){const t=Zp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,XR(e,t.length>0?t:void 0)}rT(e,r=>{uT(n,r)})}function uM(n,e){const t=_E(b1(n,e)),r=nT(n.transactionQueueTree_,e);return function Uj(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{lM(n,i)}),lM(n,r),f1(r,i=>{lM(n,i)}),t}function lM(n,e){const t=Zp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Uh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?XR(e,void 0):t.length=a+1,Ea(n.eventQueue_,_E(e),i);for(let l=0;l<r.length;l++)x_(r[l])}}const cM=function(n,e){const t=cH(n),r=t.namespace;return"firebase.com"===t.domain&&Ml(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ml("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lR(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new bn(t.pathString)}},cH=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function uH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,S)));const N=function lH(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const U=e.slice(0,v);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class S1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class A1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class x1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class R1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return eH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){wa("OnDisconnect.remove",this._path);const e=new k.BH;return C1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){wa("OnDisconnect.set",this._path),kl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return C1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){wa("OnDisconnect.setWithPriority",this._path),kl("OnDisconnect.setWithPriority",e,this._path,!1),nM("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function tH(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&O_(n.onDisconnect_,e,a),Vh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){wa("OnDisconnect.update",this._path),g1("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function nH(n,e,t,r){if((0,k.xb)(t))return ki("onDisconnect().update() called with empty data.  Don't do anything."),void Vh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(l,h)=>{const m=Tr(h);O_(n.onDisconnect_,_r(e,l),m)}),Vh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class _o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:mR(this._path)}get ref(){return new Ca(this._repo,this._path)}get _queryIdentifier(){const e=OO(this._queryParams),t=oR(e);return"{}"===t?"default":t}get _queryObject(){return OO(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof _o))return!1;const t=this._repo===e._repo,r=_R(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function XB(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function lT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Bh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==nd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===zn){if(null!=e&&!yE(e)||null!=t&&!yE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof CR||n.getIndex()===IR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ca extends _o{constructor(e,t){super(e,t,new Vb,!1)}get parent(){const e=vO(this._path);return null===e?null:new Ca(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Yp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),r=Qp(this.ref,e);return new Yp(this._node.getChild(t),r,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Yp(i,Qp(this.ref,r),zn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function M1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Qp(n._root,e):n._root}function N1(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=cM(e,n._repo.repoInfo_.nodeAdmin);m1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ml("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),M1(n,t.path.toString())}function Qp(n,e){return null===Gt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EE("child","path",t,!1)):EE("child","path",e,!1),new Ca(n._repo,_r(n._path,e));var t}function dM(n,e){n=(0,k.m9)(n),wa("set",n._path),kl("set",e,n._path,!1);const t=new k.BH;return sM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function gH(n,e){g1("update",e,n._path,!1);const t=new k.BH;return function Jj(n,e,t,r){V_(n,"update",{path:e.toString(),value:t});let i=!0;const a=CE(n),l={};if(Oi(t,(h,m)=>{i=!1,l[h]=d1(_r(e,h),Tr(m),n.serverSyncTree_,a)}),i)ki("update() called with empty data.  Don't do anything."),Vh(0,r,"ok",void 0);else{const h=oT(n),m=function Ij(n,e,t,r){!function B2(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=kR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Kn.fromObject(t);return U_(n,new F_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);sT(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,T)=>{const S="ok"===v;S||Bs("update at "+e+" failed: "+v);const N=Uh(n.serverSyncTree_,h,!S),U=N.length>0?B_(n,e):e;Ea(n.eventQueue_,U,N),Vh(0,r,v,T)}),Oi(t,v=>{const T=uM(n,_r(e,v));B_(n,T)}),Ea(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function mH(n){return function Qj(n,e){const t=function xj(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const S=js(v,t);r=r||Fh(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Fh(i,vn()):(i=new e1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new kh(r,!0,!1):null;return function dj(n){return qb(n.viewCache_)}(t1(i,e,Wb(n.pendingWriteTree_,e._path),a?l.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Tr(r).withIndex(e._queryParams.getIndex()),a=gE(n.serverSyncTree_,e._path,i);return rM(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(V_(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Yp(e,new Ca(n._repo,n._path),n._queryParams.getIndex()))}class dT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new S1("value",this,new Yp(e.snapshotNode,new Ca(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A1(this,e,t):null}matches(e){return e instanceof dT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new A1(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Qp(new Ca(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new S1(e.type,this,new Yp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function IE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(T,S)=>{oM(n._repo,n,h),m(T,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new x1(t,a||void 0),h="value"===e?new dT(l):new hT(e,l);return function rH(n,e,t){let r;r=".info"===Gt(e._path)?o1(n.infoSyncTree_,e,t):o1(n.serverSyncTree_,e,t),rM(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>oM(n._repo,n,h)}function hM(n,e,t,r){return IE(n,"value",e,t,r)}function P1(n,e,t,r){return IE(n,"child_added",e,t,r)}function k1(n,e,t,r){return IE(n,"child_changed",e,t,r)}function O1(n,e,t,r){return IE(n,"child_moved",e,t,r)}function F1(n,e,t,r){return IE(n,"child_removed",e,t,r)}function L1(n,e,t){let r=null;const i=t?new x1(t):null;"value"===e?r=new dT(i):e&&(r=new hT(e,i)),oM(n._repo,n,r)}class bu{}class U1 extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("endAt",this._value,e._path,!0);const t=SR(e._queryParams,this._value,this._key);if(cT(t),Bh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class yH extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("endBefore",this._value,e._path,!1);const t=function S2(n,e,t){let r,i;return n.index_===Pl?("string"==typeof e&&(e=NO(e)),i=SR(n,e,t)):(r=null==t?nd:NO(t),i=SR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(cT(t),Bh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class V1 extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("startAt",this._value,e._path,!0);const t=DR(e._queryParams,this._value,this._key);if(cT(t),Bh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class EH extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("startAfter",this._value,e._path,!1);const t=function D2(n,e,t){let r;if(n.index_===Pl)"string"==typeof e&&(e=MO(e)),r=DR(n,e,t);else{let i;i=null==t?Nl:MO(t),r=DR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(cT(t),Bh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class IH extends bu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function b2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class TH extends bu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function T2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class SH extends bu{constructor(e){super(),this._path=e}_apply(e){lT(e,"orderByChild");const t=new bn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new CR(t),i=Bb(e._queryParams,r);return Bh(i),new _o(e._repo,e._path,i,!0)}}class xH extends bu{_apply(e){lT(e,"orderByKey");const t=Bb(e._queryParams,Pl);return Bh(t),new _o(e._repo,e._path,t,!0)}}class MH extends bu{_apply(e){lT(e,"orderByPriority");const t=Bb(e._queryParams,zn);return Bh(t),new _o(e._repo,e._path,t,!0)}}class PH extends bu{_apply(e){lT(e,"orderByValue");const t=Bb(e._queryParams,IR);return Bh(t),new _o(e._repo,e._path,t,!0)}}class OH extends bu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(kl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new U1(this._value,this._key)._apply(new V1(this._value,this._key)._apply(e))}}function Tu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function gj(n){(0,k.hu)(!Yb,"__referenceConstructor has already been defined"),Yb=n})(Ca),function wj(n){(0,k.hu)(!Jb,"__referenceConstructor has already been defined"),Jb=n}(Ca);const fM={};function j1(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ml("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ki("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=cM(a,i),h=l.repoInfo;"undefined"!=typeof process&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=cM(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const T=i&&m?new tE(tE.OWNER):new SB(n.name,n.options,e);m1("Invalid Firebase Database URL",l),qt(l.path)||Ml("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function BH(n,e,t,r){let i=fM[e.name];i||(i={},fM[e.name]=i);let a=i[n.toURLString()];return a&&Ml("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Kj(n,false,t,r),i[n.toURLString()]=a,a}(h,n,T,new DB(n.name,t));return new HH(S,n)}class HH{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Zj(n,e,t){if(n.stats_=hR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jb(n.repoInfo_,(r,i,a,l)=>{w1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>E1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qp(n.repoInfo_,e,(r,i,a,l)=>{w1(n,r,i,a,l)},r=>{E1(n,r)},r=>{!function Yj(n,e){Oi(e,(t,r)=>{iM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function MB(n,e){const t=n.toString();return dR[t]||(dR[t]=e()),dR[t]}(n.repoInfo_,()=>new P2(n.stats_,n.server_)),n.infoData_=new A2,n.infoSyncTree_=new s1({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=gE(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),iM(n,"connected",!1),n.serverSyncTree_=new s1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);Ea(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ca(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function VH(n,e){const t=fM[e];(!t||t[n.key]!==n)&&Ml(`Database ${e}(${n.repoInfo_}) has already been deleted.`),I1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ml("Cannot call "+e+" on a deleted database.")}}function WH(n,e){$k(n,e)}const KH={".sv":"timestamp"};class QH{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function zH(n){Uk(On.SDK_VERSION),(0,On._registerComponent)(new ro.wA("database",(e,{instanceIdentifier:t})=>j1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(Fk,"0.12.5",n),(0,On.registerVersion)(Fk,"0.12.5","esm2017")}();const t$=new ks.Yd("@firebase/database-compat"),H1=function(n){t$.warn("FIREBASE WARNING: "+n)};class i${constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class s${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class jh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),EE("DataSnapshot.child","path",e,!1),new jh(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),EE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new jh(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ho(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Yi.getCancelAndContextArgs_("Query.on",r,i),h=(v,T)=>{t.call(l.context,new jh(this.database,v),T)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return hM(this._delegate,h,m),t;case"child_added":return P1(this._delegate,h,m),t;case"child_removed":return F1(this._delegate,h,m),t;case"child_changed":return k1(this._delegate,h,m),t;case"child_moved":return O1(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,L1(this._delegate,e,i)}else L1(this._delegate,e)}get(){return mH(this._delegate).then(e=>new jh(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Yi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,T)=>{const S=new jh(this.database,v);t&&t.call(a.context,S,T),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":hM(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":P1(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":F1(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":k1(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":O1(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Yi(this.database,Tu(this._delegate,function bH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IH(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Yi(this.database,Tu(this._delegate,function DH(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new TH(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Yi(this.database,Tu(this._delegate,function AH(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return EE("orderByChild","path",n,!1),new SH(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Yi(this.database,Tu(this._delegate,function RH(){return new xH}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Yi(this.database,Tu(this._delegate,function NH(){return new MH}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Yi(this.database,Tu(this._delegate,function kH(){return new PH}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Yi(this.database,Tu(this._delegate,function wH(n=null,e){return wE("startAt","key",e,!0),new V1(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Yi(this.database,Tu(this._delegate,function CH(n,e){return wE("startAfter","key",e,!0),new EH(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Yi(this.database,Tu(this._delegate,function _H(n,e){return wE("endAt","key",e,!0),new U1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Yi(this.database,Tu(this._delegate,function vH(n,e){return wE("endBefore","key",e,!0),new yH(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Yi(this.database,Tu(this._delegate,function FH(n,e){return wE("equalTo","key",e,!0),new OH(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Yi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ho(this.database,new Ca(this._delegate._repo,this._delegate._path))}}class Ho extends Yi{constructor(e,t){super(e,new _o(t._repo,t._path,new Vb,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ho(this.database,Qp(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ho(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Ho(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=dM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,H1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=gH(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function pH(n,e,t){if(wa("setWithPriority",n._path),kl("setWithPriority",e,n._path,!1),nM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return sM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function hH(n){return wa("remove",n._path),dM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function JH(n,e,t){var r;if(n=(0,k.m9)(n),wa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=hM(n,()=>{});return function sH(n,e,t,r,i,a){V_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Bk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=aM(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{vE("transaction failed: Data returned ",m,l.path),l.status=0;const v=nT(n.transactionQueueTree_,e),T=Zp(v)||[];let S;T.push(l),XR(v,T),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(S=(0,k.DV)(m,".priority"),(0,k.hu)(yE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Xb(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const N=CE(n),U=Tr(m,S),q=YR(U,h,N);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=q,l.currentWriteId=oT(n);const we=$R(n.serverSyncTree_,e,q,l.currentWriteId,l.applyLocally);Ea(n.eventQueue_,e,we),aT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,T)=>{let S=null;m?a.reject(m):(S=new Yp(T,new Ca(n._repo,n._path),zn),a.resolve(new QH(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new s$(a.committed,new jh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function fH(n,e){n=(0,k.m9)(n),wa("setPriority",n._path),nM("setPriority",e,!1);const t=new k.BH;return sM(n._repo,_r(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function dH(n,e){n=(0,k.m9)(n),wa("push",n._path),kl("push",e,n._path,!0);const t=v1(n._repo),r=w2(t),i=Qp(n,r),a=Qp(n,r);let l;return l=null!=e?dM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ho(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Ho(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return wa("Reference.onDisconnect",this._delegate._path),new i$(new R1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function $H(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ml("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ml('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new tE(tE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new tE(l)}!function UH(n,e,t,r){n.repoInfo_=new lR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Ho){const t=N1(this._delegate,e.toString());return new Ho(this,t)}{const t=M1(this._delegate,e);return new Ho(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=N1(this._delegate,e);return new Ho(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function GH(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),I1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function qH(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function iH(n){n.persistentConnection_&&n.persistentConnection_.resume(y1)}(n._repo)}(this._delegate)}}bE.ServerValue={TIMESTAMP:function ZH(){return KH}(),increment:n=>function YH(n){return{".sv":{increment:n}}}(n)};var a$=Object.freeze({__proto__:null,initStandalone:function o$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Uk(t);const l=new ro.zt("auth-internal",new ro.H0("database-standalone"));return l.setComponent(new ro.wA("auth-internal",()=>r,"PRIVATE")),{instance:new bE(j1(n,l,void 0,e,a),n),namespace:i}}});const u$=bE.ServerValue;function $1(n){return null==n}function G1(n){return"function"==typeof n.set}function q1(n,e){return G1(e)?e:n.ref(e)}function W1(n,e){if(function c$(n){return"string"==typeof n}(n))return e.stringCase();if(G1(n))return e.firebaseCase();if(function d$(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function TE(n,e,t="on",r=Qg.z){return new xn.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,_t.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,kg.B)())}function z1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function p$(n,e){const{payload:t,prevKey:r,key:i}=e,a=z1(n,i),l=function f$(n,e){if($1(e))return 0;{const t=z1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function K1(n){return($1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Z1(n,e,t){return function h$(n,e,t){return TE(n,"value","once",t).pipe(Dn(r=>{const i=[et(r)];return e.forEach(a=>i.push(TE(n,a,"on",t))),(0,Ng.T)(...i).pipe(Ei(p$,[]))}),iS())}(n,e=K1(e),t)}function Y1(n,e,t){const r=(e=K1(e)).map(i=>TE(n,i,"on",t));return(0,Ng.T)(...r)}function Q1(n,e){return function(r,i){return W1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function y$(n){return function(t){return t?W1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function J1(n,e){return function(){return TE(n,"value","on",e)}}!function l$(n){n.INTERNAL.registerComponent(new ro.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new bE(i,r)},"PUBLIC").setServiceProps({Reference:Ho,Query:Yi,Database:bE,DataSnapshot:jh,enableLogging:WH,INTERNAL:a$,ServerValue:u$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(jd.Z);const E$=new p.OlP("angularfire2.realtimeDatabaseURL"),C$=new p.OlP("angularfire2.database.use-emulator");let I$=(()=>{class n{constructor(t,r,i,a,l,h,m,v,T,S,N,U,q,we,Pe){this.schedulers=h;const tt=m,vt=(0,Vr.on)(t,l,r);v&&Yg(vt,l,T,N,U,q,S,we),this.database=(0,Vr.cc)(`${vt.name}.database.${i}`,"AngularFireDatabase",vt.name,()=>{const Ct=l.runOutsideAngular(()=>vt.database(i||void 0));return tt&&Ct.useEmulator(...tt),Ct},[tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>q1(this.database,t));let a=i;return r&&(a=r(i)),function v$(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Q1(r,"update"),set:Q1(r,"set"),push:i=>r.push(i),remove:y$(r),snapshotChanges:i=>Z1(n,i,t).pipe(ln.iC),stateChanges:i=>Y1(n,i,t).pipe(ln.iC),auditTrail:i=>function g$(n,e,t){return function _$(n,e,t){return function m$(n,e){return TE(n,"value","on",e).pipe((0,_t.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function pB(...n){const e=(0,Wa.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Ds.Xf)(n[m]).subscribe((0,un.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(as.y))&&(l=null))},fB.Z));t.subscribe((0,un.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,_t.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function gB(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,un.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,_t.U)(i=>i.actions))}(n,Y1(n,e).pipe(Ei((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,a)=>Z1(n,i,t).pipe((0,_t.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),ln.iC)}}(a,this)}object(t){return function w$(n,e){return{query:n,snapshotChanges:()=>J1(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>J1(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>q1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(E$,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ln.HU),p.LFG(C$,8),p.LFG(Bd,8),p.LFG(Ly,8),p.LFG(Uy,8),p.LFG(Af,8),p.LFG(R0,8),p.LFG(Vy,8),p.LFG(Zg,8),p.LFG(hs,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),b$=(()=>{class n{constructor(){Vd.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[I$]}),n})();const X1_firebase={apiKey:"AIzaSyCZ_vOFV8BpZcGnNlJZtEREPVx-_gjofQ0",authDomain:"agrodata-ai-dev.firebaseapp.com",databaseURL:"https://agrodata-ai-dev.firebaseio.com",projectId:"agrodata-ai-dev",storageBucket:"agrodata-ai-dev.appspot.com",messagingSenderId:"258004772057",appId:"1:258004772057:web:3a4cd2258fd27c0c0b8ac8"};var Fi=O(4929);let Jp=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){const t=new Fi.N,r=(0,Fi.n)();t.addScope("https://www.googleapis.com/auth/user.phonenumbers.read"),t.addScope("https://www.googleapis.com/auth/user.birthday.read"),t.addScope("https://www.googleapis.com/auth/user.gender.read"),t.addScope("https://www.googleapis.com/auth/userinfo.profile"),(0,Fi.c)(r,t).then(i=>{var a;Fi.N.credentialFromResult(i),this.router.navigate(["dashboard"]),console.log("You have been successfully logged in GOOGLE!"),this.getPhoneNumber(),console.log("result:"+(null===(a=i.user)||void 0===a?void 0:a.toJSON()))}).catch(i=>{Fi.N.credentialFromError(i)})}FacebookAuth(){const t=new Fi.M;return t.addScope("user_birthday"),t.addScope("user_age_range"),t.addScope("user_gender"),t.addScope("user_location"),t.addScope("user_hometown"),t.addScope("user_likes"),t.addScope("email"),t.addScope("public_profile"),this.AuthLogin(t).then(r=>{this.router.navigate(["dashboard"]),console.log("Te has logueado en FACEBOOK!")}).catch(function(r){})}AppleAuth(){const t=new Fi.T("apple.com");t.addScope("email"),t.addScope("name");const r=(0,Fi.n)();(0,Fi.c)(r,t).then(i=>{Fi.T.credentialFromResult(i),this.router.navigate(["dashboard"]),console.log("Te has logueado en APPLE!"),console.log(i)}).catch(i=>{Fi.T.credentialFromError(i)})}getPhoneNumber(){this.afAuth.authState.subscribe(t=>{t?t.getIdTokenResult().then(r=>{const i=r.claims.scopes;i&&i.includes("https://www.googleapis.com/auth/user.phonenumbers.read")?console.log("N\xfamero de tel\xe9fono:",t.phoneNumber):console.error("El usuario no ha autorizado el acceso al n\xfamero de tel\xe9fono")}):console.error("Usuario no autenticado")})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{var i,a,l,h,m,v;this.router.navigate(["dashboard"]),this.SetUserData(r.user),this.SetUserData(r.user),console.log("email: "+(null===(i=r.user)||void 0===i?void 0:i.email)),console.log("telefono: "+(null===(a=r.user)||void 0===a?void 0:a.phoneNumber)),console.log("foto: "+(null===(l=r.user)||void 0===l?void 0:l.photoURL)),console.log("name:"+(null===(h=r.user)||void 0===h?void 0:h.displayName)),console.log("time sing in"+(null===(m=r.user)||void 0===m?void 0:m.metadata.creationTime)),console.log(this.userData.user_birthday),console.log(this.userData.user_age_range),console.log("result:"+(null===(v=r.user)||void 0===v?void 0:v.toJSON())),this.getPhoneNumber()}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,scope:t.addScope,address:t.address,genero:t.genero,gender:t.gender,Password:t.Password,user_birthday:t.user_birthday,user_age_range:t.user_age_range,user_gender:t.user_gender,user_location:t.user_location,user_likes:t.user_likes},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}signInWithApple(){var t=this;return(0,ve.Z)(function*(){const r=new Fi.T("apple.com");return r.addScope("name"),r.addScope("email"),r.addScope("openid"),r.addScope("profile"),r.setCustomParameters({}),t.router.navigate(["dashboard"]),t.afAuth.signInWithPopup(r)})()}appleapple(){const t=new Fi.T("apple.com");t.addScope("name"),t.addScope("email"),t.addScope("openid"),t.addScope("profile");const r=(0,Fi.n)();(0,Fi.c)(r,t).then(i=>{var a;Fi.N.credentialFromResult(i),this.router.navigate(["dashboard"]),console.log("You have been successfully logged in GOOGLE!"),this.getPhoneNumber(),console.log("result:"+(null===(a=i.user)||void 0===a?void 0:a.toJSON()))}).catch(i=>{Fi.N.credentialFromError(i)})}appleapple1(){var t=this;return(0,ve.Z)(function*(){const r=new Fi.T("apple.com");r.addScope("name"),r.addScope("email"),r.addScope("openid"),r.addScope("profile");try{yield t.afAuth.signInWithPopup(r),t.router.navigate(["dashboard"]),console.log("exito")}catch(i){console.log("error")}})()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ok),p.LFG(Bd),p.LFG(pi),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-in"]],decls:37,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],["type","button",1,"btn","facebookBtn",3,"click"],[1,"fa-brands","fa-facebook-f"],["type","button",1,"btn","appleBtn",3,"click"],[1,"fa-light","fa-apple-whole"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Iniciar sesi\xf3n"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"input",4,5),p.qZA(),p.TgZ(8,"div",3),p._UZ(9,"input",6,7),p.qZA(),p.TgZ(11,"div",3)(12,"input",8),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(7),h=p.MAs(10);return r.authService.SignIn(l.value,h.value)}),p.qZA()(),p.TgZ(13,"div",3)(14,"span",9)(15,"span",10),p._uU(16,"O"),p.qZA()()(),p.TgZ(17,"div",3)(18,"button",11),p.NdJ("click",function(){return r.authService.GoogleAuth()}),p._UZ(19,"i",12),p._uU(20," Iniciar sesi\xf3n con google "),p.qZA()(),p.TgZ(21,"div",3)(22,"button",13),p.NdJ("click",function(){return r.authService.FacebookAuth()}),p._UZ(23,"i",14),p._uU(24," Iniciar sesi\xf3n con facebook "),p.qZA()(),p.TgZ(25,"div")(26,"button",15),p.NdJ("click",function(){return r.authService.appleapple1()}),p._UZ(27,"i",16),p._uU(28,"\nIniciar sesi\xf3n con apple\n"),p.qZA()(),p.TgZ(29,"div",17)(30,"span",18),p._uU(31,"\xbfNo recuerdas tu contrase\xf1a?"),p.qZA()()(),p.TgZ(32,"div",19)(33,"span"),p._uU(34,"\xbfNo tienes una cuenta?"),p.TgZ(35,"span",20),p._uU(36," Registrarse"),p.qZA()()()()()}},directives:[yc],styles:[""]}),n})(),D$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-up"]],decls:30,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],["type","button",1,"btn","appleBtn",3,"click"],[1,"fa-light","fa-apple-whole"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Registrarse"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"input",4,5),p.qZA(),p.TgZ(8,"div",3),p._UZ(9,"input",6,7),p.qZA(),p.TgZ(11,"div",3)(12,"input",8),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(7),h=p.MAs(10);return r.authService.SignUp(l.value,h.value)}),p.qZA()(),p.TgZ(13,"div",3)(14,"span",9)(15,"span",10),p._uU(16,"O"),p.qZA()()(),p.TgZ(17,"div",3)(18,"button",11),p.NdJ("click",function(){return r.authService.GoogleAuth()}),p._UZ(19,"i",12),p._uU(20," Registrarse con Google "),p.qZA()()(),p.TgZ(21,"div",3)(22,"button",13),p.NdJ("click",function(){return r.authService.appleapple1()}),p._UZ(23,"i",14),p._uU(24," Registrarse con apple "),p.qZA()(),p.TgZ(25,"div",15)(26,"span"),p._uU(27,"Ya tienes una cuenta? "),p.TgZ(28,"span",16),p._uU(29,"Registrarse"),p.qZA()()()()()}},directives:[yc],styles:[""]}),n})();function S$(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"div",18)(2,"div",19),p._UZ(3,"img",20),p.TgZ(4,"div",21)(5,"strong")(6,"h1"),p._uU(7),p.qZA()(),p.TgZ(8,"p"),p._uU(9,"User ID: "),p.TgZ(10,"strong"),p._uU(11),p.qZA()(),p.TgZ(12,"p"),p._uU(13,"Email: "),p.TgZ(14,"strong"),p._uU(15),p.qZA()(),p.TgZ(16,"p"),p._uU(17,"Email Verified: "),p.TgZ(18,"strong"),p._uU(19),p.qZA()(),p.TgZ(20,"p"),p._uU(21,"phoneNumber: "),p.TgZ(22,"strong"),p._uU(23),p.qZA()()()()()()),2&n){const t=e.ngIf;p.xp6(3),p.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",p.LSH),p.s9C("alt",t.displayName),p.xp6(4),p.hij("Hola ",t.displayName?t.displayName:"User",""),p.xp6(4),p.Oqu(t.uid),p.xp6(4),p.Oqu(t.email),p.xp6(4),p.Oqu(t.emailVerified),p.xp6(4),p.Oqu(t.phoneNumber)}}let A$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","https://storage.googleapis.com/front-agrodatai-dev/agrodatai/img/credito/Logo%20AgrodatAi%20fondo%20transparente.png","alt","","loading","lazy",1,"icon-modal"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"a",1),p._UZ(2,"img",2),p.qZA()(),p.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),p._UZ(10,"i",10),p._uU(11,"Perfil del ususario "),p.qZA()(),p.TgZ(12,"li",8)(13,"a",11),p.NdJ("click",function(){return r.authService.SignOut()}),p._UZ(14,"i",12),p._uU(15,"Salir "),p.qZA()()()()(),p.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),p._uU(20,"Perfil"),p.qZA()(),p.YNc(21,S$,24,7,"div",17),p.qZA()()()()),2&t&&(p.xp6(21),p.Q6J("ngIf",r.authService.userData))},directives:[wr],styles:[""]}),n})(),x$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Reset Password"),p.qZA(),p.TgZ(5,"p",3),p._uU(6," Please enter your email address to request a password reset. "),p.qZA(),p.TgZ(7,"div",4),p._UZ(8,"input",5,6),p.qZA(),p.TgZ(10,"div",4)(11,"input",7),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(9);return r.authService.ForgotPassword(l.value)}),p.qZA()()(),p.TgZ(12,"div",8)(13,"span"),p._uU(14,"Go back to ? "),p.TgZ(15,"span",9),p._uU(16,"Log In"),p.qZA()()()()()}},directives:[yc],styles:[""]}),n})();function R$(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"p",9),p._uU(2," We have sent a confirmation email to "),p.TgZ(3,"strong"),p._uU(4),p.qZA(),p._uU(5,". "),p.qZA(),p.TgZ(6,"p",9),p._uU(7," Please check your email and click on the link to verfiy your email address. "),p.qZA()()),2&n){const t=e.ngIf;p.xp6(4),p.Oqu(t.email)}}const M$=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:T$},{path:"register-user",component:D$},{path:"dashboard",component:A$,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Jp),p.LFG(pi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:x$},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Thank You for Registering"),p.qZA(),p.YNc(5,R$,8,1,"div",3),p.TgZ(6,"div",4)(7,"button",5),p.NdJ("click",function(){return r.authService.SendVerificationMail()}),p._UZ(8,"i",6),p._uU(9," Resend Verification Email "),p.qZA()()(),p.TgZ(10,"div",7)(11,"span"),p._uU(12,"Go back to?"),p.TgZ(13,"span",8),p._uU(14," Sign in"),p.qZA()()()()()),2&t&&(p.xp6(5),p.Q6J("ngIf",r.authService.userData))},directives:[wr,yc],styles:[""]}),n})()}];let N$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[n0.forRoot(M$)],n0]}),n})();class eF{}class tF{}class id{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof id?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new id;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof id?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class P${encodeKey(e){return nF(e)}encodeValue(e){return nF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const O$=/%(\d[a-f0-9])/gi,F$={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function nF(n){return encodeURIComponent(n).replace(O$,(e,t)=>{var r;return null!==(r=F$[t])&&void 0!==r?r:e})}function rF(n){return`${n}`}class Hh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new P$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function k$(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Hh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rF(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(rF(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class L${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function iF(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function sF(n){return"undefined"!=typeof Blob&&n instanceof Blob}function oF(n){return"undefined"!=typeof FormData&&n instanceof FormData}class DE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function U$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new id),this.context||(this.context=new L$),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Hh,this.urlWithParams=t}serializeBody(){return null===this.body?null:iF(this.body)||sF(this.body)||oF(this.body)||function V$(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Hh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oF(this.body)?null:sF(this.body)?this.body.type||null:iF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,T=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((N,U)=>N.set(U,e.setHeaders[U]),v)),e.setParams&&(T=Object.keys(e.setParams).reduce((N,U)=>N.set(U,e.setParams[U]),T)),new DE(r,i,l,{params:T,headers:v,context:S,reportProgress:m,responseType:a,withCredentials:h})}}var ri=(()=>((ri=ri||{})[ri.Sent=0]="Sent",ri[ri.UploadProgress=1]="UploadProgress",ri[ri.ResponseHeader=2]="ResponseHeader",ri[ri.DownloadProgress=3]="DownloadProgress",ri[ri.Response=4]="Response",ri[ri.User=5]="User",ri))();class pM{constructor(e,t=200,r="OK"){this.headers=e.headers||new id,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class gM extends pM{constructor(e={}){super(e),this.type=ri.ResponseHeader}clone(e={}){return new gM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class fT extends pM{constructor(e={}){super(e),this.type=ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new fT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class aF extends pM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function mM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let B$=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof DE)a=t;else{let m,v;m=i.headers instanceof id?i.headers:new id(i.headers),i.params&&(v=i.params instanceof Hh?i.params:new Hh({fromObject:i.params})),a=new DE(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=et(a).pipe(ci(m=>this.handler.handle(m)));if(t instanceof DE||"events"===i.observe)return l;const h=l.pipe(Gn(m=>m instanceof fT));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,_t.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,_t.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,_t.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,_t.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Hh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,mM(i,r))}post(t,r,i={}){return this.request("POST",t,mM(i,r))}put(t,r,i={}){return this.request("PUT",t,mM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(eF))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class uF{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const lF=new p.OlP("HTTP_INTERCEPTORS");let j$=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const H$=/^\)\]\}',?\n/;let cF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,q)=>i.setRequestHeader(U,q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const U=i.statusText||"OK",q=new id(i.getAllResponseHeaders()),we=function $$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new gM({headers:q,status:i.status,statusText:U,url:we}),l},m=()=>{let{headers:U,status:q,statusText:we,url:Pe}=h(),tt=null;204!==q&&(tt=void 0===i.response?i.responseText:i.response),0===q&&(q=tt?200:0);let vt=q>=200&&q<300;if("json"===t.responseType&&"string"==typeof tt){const Ct=tt;tt=tt.replace(H$,"");try{tt=""!==tt?JSON.parse(tt):null}catch(dt){tt=Ct,vt&&(vt=!1,tt={error:dt,text:tt})}}vt?(r.next(new fT({body:tt,headers:U,status:q,statusText:we,url:Pe||void 0})),r.complete()):r.error(new aF({error:tt,headers:U,status:q,statusText:we,url:Pe||void 0}))},v=U=>{const{url:q}=h(),we=new aF({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(we)};let T=!1;const S=U=>{T||(r.next(h()),T=!0);let q={type:ri.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),"text"===t.responseType&&!!i.responseText&&(q.partialText=i.responseText),r.next(q)},N=U=>{let q={type:ri.UploadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),r.next(q)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",N)),i.send(a),r.next({type:ri.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hn))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const _M=new p.OlP("XSRF_COOKIE_NAME"),yM=new p.OlP("XSRF_HEADER_NAME");class dF{}let G$=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ba(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(p.Lbi),p.LFG(_M))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),vM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dF),p.LFG(yM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),q$=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(lF,[]);this.chain=r.reduceRight((i,a)=>new uF(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(tF),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),W$=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:vM,useClass:j$}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:_M,useValue:t.cookieName}:[],t.headerName?{provide:yM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[vM,{provide:lF,useExisting:vM,multi:!0},{provide:dF,useClass:G$},{provide:_M,useValue:"XSRF-TOKEN"},{provide:yM,useValue:"X-XSRF-TOKEN"}]}),n})(),z$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[B$,{provide:eF,useClass:q$},cF,{provide:tF,useExisting:cF}],imports:[[W$.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),XF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),zG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[XF]]}),n})(),KG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[zG]}),n})(),ZG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[If]}),n.\u0275inj=p.cJS({providers:[Jp],imports:[[ja,Vr.hO.initializeApp(X1_firebase),M0,hB,bC,b$,N$,z$,KG]]}),n})();(0,p.G48)(),Lu().bootstrapModule(ZG).catch(n=>console.error(n))},5867:(at,De,O)=>{"use strict";O.d(De,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=O(9681);(0,p.registerVersion)("firebase","9.6.7","app")},127:(at,De,O)=>{"use strict";O.d(De,{Z:()=>p.Z});var p=O(3942);p.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(at,De,O)=>{"use strict";O.r(De);var p=O(5861),B=O(3942),P=O(4929),ae=O(2090),le=(O(9681),O(1877),O(4859));function ue(){return window}function H(){return(H=(0,p.Z)(function*(oe,Z,z){var Te;const{BuildInfo:qe}=ue();(0,P.ap)(Z.sessionId,"AuthEvent did not contain a session ID");const ot=yield ce(Z.sessionId),At={};return(0,P.aq)()?At.ibi=qe.packageName:(0,P.ar)()?At.apn=qe.packageName:(0,P.as)(oe,"operation-not-supported-in-this-environment"),qe.displayName&&(At.appDisplayName=qe.displayName),At.sessionId=ot,(0,P.at)(oe,z,Z.type,void 0,null!==(Te=Z.eventId)&&void 0!==Te?Te:void 0,At)})).apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(oe){const{BuildInfo:Z}=ue(),z={};(0,P.aq)()?z.iosBundleId=Z.packageName:(0,P.ar)()?z.androidPackageName=Z.packageName:(0,P.as)(oe,"operation-not-supported-in-this-environment"),yield(0,P.au)(oe,z)})).apply(this,arguments)}function je(){return(je=(0,p.Z)(function*(oe,Z,z){const{cordova:Te}=ue();let qe=()=>{};try{yield new Promise((ot,At)=>{let Bt=null;function Ot(){var Ft;ot();const Fr=null===(Ft=Te.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Fr&&Fr(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function Vn(){Bt||(Bt=window.setTimeout(()=>{At((0,P.av)(oe,"redirect-cancelled-by-user"))},2e3))}function ii(){"visible"===(null==document?void 0:document.visibilityState)&&Vn()}Z.addPassiveListener(Ot),document.addEventListener("resume",Vn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",ii,!1),qe=()=>{Z.removePassiveListener(Ot),document.removeEventListener("resume",Vn,!1),document.removeEventListener("visibilitychange",ii,!1),Bt&&window.clearTimeout(Bt)}})}finally{qe()}})).apply(this,arguments)}function ce(oe){return Re.apply(this,arguments)}function Re(){return(Re=(0,p.Z)(function*(oe){const Z=Me(oe),z=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(z)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Me(oe){if((0,P.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(oe);const Z=new ArrayBuffer(oe.length),z=new Uint8Array(Z);for(let Te=0;Te<oe.length;Te++)z[Te]=oe.charCodeAt(Te);return z}class be extends P.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,p.Z)(function*(){yield Z.initPromise})()}}function re(oe){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(oe){const Z=yield fe()._get(ye(oe));return Z&&(yield fe()._remove(ye(oe))),Z})).apply(this,arguments)}function pe(){const oe=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Te=Math.floor(Math.random()*Z.length);oe.push(Z.charAt(Te))}return oe.join("")}function fe(){return(0,P.ax)(P.b)}function ye(oe){return(0,P.ay)("authEvent",oe.config.apiKey,oe.name)}function wt(oe){if(!(null==oe?void 0:oe.includes("?")))return{};const[Z,...z]=oe.split("?");return(0,ae.zd)(z.join("?"))}function it(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.av)("no-auth-event")}}function $t(){var oe;return(null===(oe=null==self?void 0:self.location)||void 0===oe?void 0:oe.protocol)||null}function Cn(oe=(0,ae.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){try{const oe=self.localStorage,Z=P.aG();if(oe)return oe.setItem(Z,"1"),oe.removeItem(Z),!function Qi(oe=(0,ae.z$)()){return function Zn(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dr(oe=(0,ae.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ae.hl)()}catch(oe){return Vi()&&(0,ae.hl)()}return!1}function Vi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function en(){return"http:"===$t()||"https:"===$t()}()||(0,ae.ru)()||Cn())&&!function Ui(){return(0,ae.b$)()||(0,ae.UG)()}()&&yi()&&!Vi()}function Ji(){return Cn()&&"undefined"!=typeof document}function Or(){return(Or=(0,p.Z)(function*(){return!!Ji()&&new Promise(oe=>{const Z=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),oe(!0)})})})).apply(this,arguments)}const Wt={LOCAL:"local",NONE:"none",SESSION:"session"},Sr=P.aw,ht="persistence";function bt(oe){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(oe){yield oe._initializationPromise;const Z=St(),z=P.ay(ht,oe.config.apiKey,oe.name);Z&&Z.setItem(z,oe._getPersistence())})).apply(this,arguments)}function St(){var oe;try{return(null===(oe=function An(){return"undefined"!=typeof window?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch(Z){return null}}const st=P.aw;class Je{constructor(){this.browserResolver=P.ax(P.k),this.cordovaResolver=P.ax(class Rn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aA}_initialize(Z){var z=this;return(0,p.Z)(function*(){const Te=Z._key();let qe=z.eventManagers.get(Te);return qe||(qe=new be(Z),z.eventManagers.set(Te,qe),z.attachCallbackListeners(Z,qe)),qe})()}_openPopup(Z){(0,P.as)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){!function Q(oe){var Z,z,Te,qe,ot,At,Bt,Ot,Vn,ii;const Ft=ue();(0,P.aw)("function"==typeof(null===(Z=null==Ft?void 0:Ft.universalLinks)||void 0===Z?void 0:Z.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aw)(void 0!==(null===(z=null==Ft?void 0:Ft.BuildInfo)||void 0===z?void 0:z.packageName),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aw)("function"==typeof(null===(ot=null===(qe=null===(Te=null==Ft?void 0:Ft.cordova)||void 0===Te?void 0:Te.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===ot?void 0:ot.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Ot=null===(Bt=null===(At=null==Ft?void 0:Ft.cordova)||void 0===At?void 0:At.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===Ot?void 0:Ot.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(ii=null===(Vn=null==Ft?void 0:Ft.cordova)||void 0===Vn?void 0:Vn.InAppBrowser)||void 0===ii?void 0:ii.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const At=yield ot._initialize(Z);yield At.initialized(),At.resetRedirect(),(0,P.aB)(),yield ot._originValidation(Z);const Bt=function Ee(oe,Z,z=null){return{type:Z,eventId:z,urlResponse:null,sessionId:pe(),postBody:null,tenantId:oe.tenantId,error:(0,P.av)(oe,"no-auth-event")}}(Z,Te,qe);yield function ze(oe,Z){return fe()._set(ye(oe),Z)}(Z,Bt);const Ot=yield function G(oe,Z,z){return H.apply(this,arguments)}(Z,Bt,z),Vn=yield function xe(oe){const{cordova:Z}=ue();return new Promise(z=>{Z.plugins.browsertab.isAvailable(Te=>{let qe=null;Te?Z.plugins.browsertab.openUrl(oe):qe=Z.InAppBrowser.open(oe,(0,P.ao)()?"_blank":"_system","location=yes"),z(qe)})})}(Ot);return function Fe(oe,Z,z){return je.apply(this,arguments)}(Z,At,Vn)})()}_isIframeWebStorageSupported(Z,z){throw new Error("Method not implemented.")}_originValidation(Z){const z=Z._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function ne(oe){return He.apply(this,arguments)}(Z)),this.originValidationPromises[z]}attachCallbackListeners(Z,z){const{universalLinks:Te,handleOpenURL:qe,BuildInfo:ot}=ue(),At=setTimeout((0,p.Z)(function*(){yield re(Z),z.onEvent(it())}),500),Bt=function(){var ii=(0,p.Z)(function*(Ft){clearTimeout(At);const Fr=yield re(Z);let Xi=null;Fr&&(null==Ft?void 0:Ft.url)&&(Xi=function X(oe,Z){var z,Te;const qe=function de(oe){const Z=wt(oe),z=Z.link?decodeURIComponent(Z.link):void 0,Te=wt(z).link,qe=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return wt(qe).link||qe||Te||z||oe}(Z);if(qe.includes("/__/auth/callback")){const ot=wt(qe),At=ot.firebaseError?function Le(oe){try{return JSON.parse(oe)}catch(Z){return null}}(decodeURIComponent(ot.firebaseError)):null,Bt=null===(Te=null===(z=null==At?void 0:At.code)||void 0===z?void 0:z.split("auth/"))||void 0===Te?void 0:Te[1],Ot=Bt?(0,P.av)(Bt):null;return Ot?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:Ot,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:qe,postBody:null}}return null}(Fr,Ft.url)),z.onEvent(Xi||it())});return function(Fr){return ii.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,Bt);const Ot=qe,Vn=`${ot.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var ii=(0,p.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(Vn)&&Bt({url:Ft}),"function"==typeof Ot)try{Ot(Ft)}catch(Fr){console.error(Fr)}});return function(Ft){return ii.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aA}_initialize(Z){var z=this;return(0,p.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(Z,z,Te,qe)})()}_openRedirect(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(Z,z,Te,qe)})()}_isIframeWebStorageSupported(Z,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,z)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Ji()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return st(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,p.Z)(function*(){if(Z.underlyingResolver)return;const z=yield function pt(){return Or.apply(this,arguments)}();Z.underlyingResolver=z?Z.cordovaResolver:Z.browserResolver})()}}function $s(oe){return oe.unwrap()}function jt(oe){return Yn(oe)}function Yn(oe){const{_tokenResponse:Z}=oe instanceof ae.ZR?oe.customData:oe;if(!Z)return null;if(!(oe instanceof ae.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return P.P.credentialFromResult(oe);const z=Z.providerId;if(!z||z===P.o.PASSWORD)return null;let Te;switch(z){case P.o.GOOGLE:Te=P.N;break;case P.o.FACEBOOK:Te=P.M;break;case P.o.GITHUB:Te=P.Q;break;case P.o.TWITTER:Te=P.V;break;default:const{oauthIdToken:qe,oauthAccessToken:ot,oauthTokenSecret:At,pendingToken:Bt,nonce:Ot}=Z;return ot||At||qe||Bt?Bt?z.startsWith("saml.")?P.aJ._create(z,Bt):P.I._fromParams({providerId:z,signInMethod:z,pendingToken:Bt,idToken:qe,accessToken:ot}):new P.T(z).credential({idToken:qe,accessToken:ot,rawNonce:Ot}):null}return oe instanceof ae.ZR?Te.credentialFromError(oe):Te.credentialFromResult(oe)}function En(oe,Z){return Z.catch(z=>{throw z instanceof ae.ZR&&function Gs(oe,Z){var z;const Te=null===(z=Z.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new K(oe,P.am(oe,Z));else if(Te){const qe=Yn(Z),ot=Z;qe&&(ot.credential=qe,ot.tenantId=Te.tenantId||void 0,ot.email=Te.email||void 0,ot.phoneNumber=Te.phoneNumber||void 0)}}(oe,z),z}).then(z=>{const qe=z.user;return{operationType:z.operationType,credential:jt(z),additionalUserInfo:P.ak(z),user:Ie.getOrCreate(qe)}})}function j(oe,Z){return W.apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(oe,Z){const z=yield Z;return{verificationId:z.verificationId,confirm:Te=>En(oe,z.confirm(Te))}})).apply(this,arguments)}class K{constructor(Z,z){this.resolver=z,this.auth=function vs(oe){return oe.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return En($s(this.auth),this.resolver.resolveSignIn(Z))}}class Ie{constructor(Z){this._delegate=Z,this.multiFactor=P.an(Z)}static getOrCreate(Z){return Ie.USER_MAP.has(Z)||Ie.USER_MAP.set(Z,new Ie(Z)),Ie.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var z=this;return(0,p.Z)(function*(){return En(z.auth,P.Y(z._delegate,Z))})()}linkWithPhoneNumber(Z,z){var Te=this;return(0,p.Z)(function*(){return j(Te.auth,P.l(Te._delegate,Z,z))})()}linkWithPopup(Z){var z=this;return(0,p.Z)(function*(){return En(z.auth,P.d(z._delegate,Z,Je))})()}linkWithRedirect(Z){var z=this;return(0,p.Z)(function*(){return yield bt(P.aC(z.auth)),P.g(z._delegate,Z,Je)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var z=this;return(0,p.Z)(function*(){return En(z.auth,P.Z(z._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,z){return j(this.auth,P.r(this._delegate,Z,z))}reauthenticateWithPopup(Z){return En(this.auth,P.e(this._delegate,Z,Je))}reauthenticateWithRedirect(Z){var z=this;return(0,p.Z)(function*(){return yield bt(P.aC(z.auth)),P.h(z._delegate,Z,Je)})()}sendEmailVerification(Z){return P.aa(this._delegate,Z)}unlink(Z){var z=this;return(0,p.Z)(function*(){return yield P.aj(z._delegate,Z),z})()}updateEmail(Z){return P.af(this._delegate,Z)}updatePassword(Z){return P.ag(this._delegate,Z)}updatePhoneNumber(Z){return P.u(this._delegate,Z)}updateProfile(Z){return P.ae(this._delegate,Z)}verifyBeforeUpdateEmail(Z,z){return P.ab(this._delegate,Z,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const ie=P.aw;let Ke=(()=>{class oe{constructor(z,Te){if(this.app=z,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=z.options;ie(qe,"invalid-api-key",{appName:z.name}),ie(qe,"invalid-api-key",{appName:z.name});const ot="undefined"!=typeof window?Je:void 0;this._delegate=Te.initialize({options:{persistence:zt(qe,z.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(P.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Te){P.E(this._delegate,z,Te)}applyActionCode(z){return P.a1(this._delegate,z)}checkActionCode(z){return P.a2(this._delegate,z)}confirmPasswordReset(z,Te){return P.a0(this._delegate,z,Te)}createUserWithEmailAndPassword(z,Te){var qe=this;return(0,p.Z)(function*(){return En(qe._delegate,P.a4(qe._delegate,z,Te))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return P.a9(this._delegate,z)}isSignInWithEmailLink(z){return P.a7(this._delegate,z)}getRedirectResult(){var z=this;return(0,p.Z)(function*(){ie(Un(),z._delegate,"operation-not-supported-in-this-environment");const Te=yield P.j(z._delegate,Je);return Te?En(z._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function ur(oe,Z){(0,P.aC)(oe)._logFramework(Z)}(this._delegate,z)}onAuthStateChanged(z,Te,qe){const{next:ot,error:At,complete:Bt}=ft(z,Te,qe);return this._delegate.onAuthStateChanged(ot,At,Bt)}onIdTokenChanged(z,Te,qe){const{next:ot,error:At,complete:Bt}=ft(z,Te,qe);return this._delegate.onIdTokenChanged(ot,At,Bt)}sendSignInLinkToEmail(z,Te){return P.a6(this._delegate,z,Te)}sendPasswordResetEmail(z,Te){return P.$(this._delegate,z,Te||void 0)}setPersistence(z){var Te=this;return(0,p.Z)(function*(){let qe;switch(function lt(oe,Z){Sr(Object.values(Wt).includes(Z),oe,"invalid-persistence-type"),(0,ae.b$)()?Sr(Z!==Wt.SESSION,oe,"unsupported-persistence-type"):(0,ae.UG)()?Sr(Z===Wt.NONE,oe,"unsupported-persistence-type"):Vi()?Sr(Z===Wt.NONE||Z===Wt.LOCAL&&(0,ae.hl)(),oe,"unsupported-persistence-type"):Sr(Z===Wt.NONE||yi(),oe,"unsupported-persistence-type")}(Te._delegate,z),z){case Wt.SESSION:qe=P.a;break;case Wt.LOCAL:qe=(yield P.ax(P.i)._isAvailable())?P.i:P.b;break;case Wt.NONE:qe=P.K;break;default:return P.as("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return En(this._delegate,P.W(this._delegate))}signInWithCredential(z){return En(this._delegate,P.X(this._delegate,z))}signInWithCustomToken(z){return En(this._delegate,P._(this._delegate,z))}signInWithEmailAndPassword(z,Te){return En(this._delegate,P.a5(this._delegate,z,Te))}signInWithEmailLink(z,Te){return En(this._delegate,P.a8(this._delegate,z,Te))}signInWithPhoneNumber(z,Te){return j(this._delegate,P.s(this._delegate,z,Te))}signInWithPopup(z){var Te=this;return(0,p.Z)(function*(){return ie(Un(),Te._delegate,"operation-not-supported-in-this-environment"),En(Te._delegate,P.c(Te._delegate,z,Je))})()}signInWithRedirect(z){var Te=this;return(0,p.Z)(function*(){return ie(Un(),Te._delegate,"operation-not-supported-in-this-environment"),yield bt(Te._delegate),P.f(Te._delegate,z,Je)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return P.a3(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=Wt,oe})();function ft(oe,Z,z){let Te=oe;"function"!=typeof oe&&({next:Te,error:Z,complete:z}=oe);const qe=Te;return{next:At=>qe(At&&Ie.getOrCreate(At)),error:Z,complete:z}}function zt(oe,Z){const z=function lr(oe,Z){const z=St();if(!z)return[];const Te=P.ay(ht,oe,Z);switch(z.getItem(Te)){case Wt.NONE:return[P.K];case Wt.LOCAL:return[P.i,P.a];case Wt.SESSION:return[P.a];default:return[]}}(oe,Z);if("undefined"!=typeof self&&!z.includes(P.i)&&z.push(P.i),"undefined"!=typeof window)for(const Te of[P.b,P.a])z.includes(Te)||z.push(Te);return z.includes(P.K)||z.push(P.K),z}class on{constructor(){this.providerId="phone",this._delegate=new P.P($s(B.Z.auth()))}static credential(Z,z){return P.P.credential(Z,z)}verifyPhoneNumber(Z,z){return this._delegate.verifyPhoneNumber(Z,z)}unwrap(){return this._delegate}}on.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,on.PROVIDER_ID=P.P.PROVIDER_ID;const Qn=P.aw;class cr{constructor(Z,z,Te=B.Z.app()){var qe;Qn(null===(qe=Te.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new P.R(Z,z,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jn(oe){oe.INTERNAL.registerComponent(new le.wA("auth-compat",Z=>{const z=Z.getProvider("app-compat").getImmediate(),Te=Z.getProvider("auth");return new Ke(z,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.L,FacebookAuthProvider:P.M,GithubAuthProvider:P.Q,GoogleAuthProvider:P.N,OAuthProvider:P.T,SAMLAuthProvider:P.U,PhoneAuthProvider:on,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:cr,TwitterAuthProvider:P.V,Auth:Ke,AuthCredential:P.G,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.2.9")}(B.Z)},2940:function(at,De){!function(O){"use strict";function p(Q){return Array.prototype.slice.call(Q)}function B(Q){return new Promise(function(ce,Re){Q.onsuccess=function(){ce(Q.result)},Q.onerror=function(){Re(Q.error)}})}function P(Q,ce,Re){var Me,he=new Promise(function(be,Ee){B(Me=Q[ce].apply(Q,Re)).then(be,Ee)});return he.request=Me,he}function ae(Q,ce,Re){var Me=P(Q,ce,Re);return Me.then(function(he){if(he)return new G(he,Me.request)})}function se(Q,ce,Re){Re.forEach(function(Me){Object.defineProperty(Q.prototype,Me,{get:function(){return this[ce][Me]},set:function(he){this[ce][Me]=he}})})}function me(Q,ce,Re,Me){Me.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return P(this[ce],he,arguments)})})}function le(Q,ce,Re,Me){Me.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return this[ce][he].apply(this[ce],arguments)})})}function ue(Q,ce,Re,Me){Me.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return ae(this[ce],he,arguments)})})}function _e(Q){this._index=Q}function G(Q,ce){this._cursor=Q,this._request=ce}function H(Q){this._store=Q}function ne(Q){this._tx=Q,this.complete=new Promise(function(ce,Re){Q.oncomplete=function(){ce()},Q.onerror=function(){Re(Q.error)},Q.onabort=function(){Re(Q.error)}})}function He(Q,ce,Re){this._db=Q,this.oldVersion=ce,this.transaction=new ne(Re)}function xe(Q){this._db=Q}se(_e,"_index",["name","keyPath","multiEntry","unique"]),me(_e,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(_e,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(G,"_cursor",["direction","key","primaryKey","value"]),me(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Q){Q in IDBCursor.prototype&&(G.prototype[Q]=function(){var ce=this,Re=arguments;return Promise.resolve().then(function(){return ce._cursor[Q].apply(ce._cursor,Re),B(ce._request).then(function(Me){if(Me)return new G(Me,ce._request)})})})}),H.prototype.createIndex=function(){return new _e(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new _e(this._store.index.apply(this._store,arguments))},se(H,"_store",["name","keyPath","indexNames","autoIncrement"]),me(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),le(H,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},se(ne,"_tx",["objectStoreNames","mode"]),le(ne,"_tx",IDBTransaction,["abort"]),He.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},se(He,"_db",["name","version","objectStoreNames"]),le(He,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},se(xe,"_db",["name","version","objectStoreNames"]),le(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Q){[H,_e].forEach(function(ce){Q in ce.prototype&&(ce.prototype[Q.replace("open","iterate")]=function(){var Re=p(arguments),Me=Re[Re.length-1],he=this._store||this._index,be=he[Q].apply(he,Re.slice(0,-1));be.onsuccess=function(){Me(be.result)}})})}),[_e,H].forEach(function(Q){Q.prototype.getAll||(Q.prototype.getAll=function(ce,Re){var Me=this,he=[];return new Promise(function(be){Me.iterateCursor(ce,function(Ee){Ee?(he.push(Ee.value),void 0===Re||he.length!=Re?Ee.continue():be(he)):be(he)})})})}),O.openDb=function Fe(Q,ce,Re){var Me=P(indexedDB,"open",[Q,ce]),he=Me.request;return he&&(he.onupgradeneeded=function(be){Re&&Re(new He(he.result,be.oldVersion,he.transaction))}),Me.then(function(be){return new xe(be)})},O.deleteDb=function je(Q){return P(indexedDB,"deleteDatabase",[Q])},Object.defineProperty(O,"__esModule",{value:!0})}(De)},8306:(at,De,O)=>{"use strict";O.d(De,{y:()=>G});var p=O(930),B=O(727),P=O(8822),ae=O(4671);var le=O(2416),ue=O(576),_e=O(2806);let G=(()=>{class xe{constructor(je){je&&(this._subscribe=je)}lift(je){const Q=new xe;return Q.source=this,Q.operator=je,Q}subscribe(je,Q,ce){const Re=function He(xe){return xe&&xe instanceof p.Lv||function ne(xe){return xe&&(0,ue.m)(xe.next)&&(0,ue.m)(xe.error)&&(0,ue.m)(xe.complete)}(xe)&&(0,B.Nn)(xe)}(je)?je:new p.Hp(je,Q,ce);return(0,_e.x)(()=>{const{operator:Me,source:he}=this;Re.add(Me?Me.call(Re,he):he?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(je){try{return this._subscribe(je)}catch(Q){je.error(Q)}}forEach(je,Q){return new(Q=H(Q))((ce,Re)=>{const Me=new p.Hp({next:he=>{try{je(he)}catch(be){Re(be),Me.unsubscribe()}},error:Re,complete:ce});this.subscribe(Me)})}_subscribe(je){var Q;return null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(je)}[P.L](){return this}pipe(...je){return function me(xe){return 0===xe.length?ae.y:1===xe.length?xe[0]:function(je){return xe.reduce((Q,ce)=>ce(Q),je)}}(je)(this)}toPromise(je){return new(je=H(je))((Q,ce)=>{let Re;this.subscribe(Me=>Re=Me,Me=>ce(Me),()=>Q(Re))})}}return xe.create=Fe=>new xe(Fe),xe})();function H(xe){var Fe;return null!==(Fe=null!=xe?xe:le.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(at,De,O)=>{"use strict";O.d(De,{x:()=>le});var p=O(8306),B=O(727);const ae=(0,O(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(8737),me=O(2806);let le=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ne=new ue(this,this);return ne.operator=H,ne}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const He of ne)He.next(H)}})}error(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ne}=this;for(;ne.length;)ne.shift().error(H)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ne,isStopped:He,observers:xe}=this;return ne||He?B.Lc:(xe.push(H),new B.w0(()=>(0,se.P)(xe,H)))}_checkFinalizedStatuses(H){const{hasError:ne,thrownError:He,isStopped:xe}=this;ne?H.error(He):xe&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return _e.create=(G,H)=>new ue(G,H),_e})();class ue extends le{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ne||ne.call(H,G)}error(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ne||ne.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,ne;return null!==(ne=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==ne?ne:B.Lc}}},930:(at,De,O)=>{"use strict";O.d(De,{Hp:()=>je,Lv:()=>ne});var p=O(576),B=O(727),P=O(2416),ae=O(7849),se=O(5032);const me=_e("C",void 0,void 0);function _e(he,be,Ee){return{kind:he,value:be,error:Ee}}var G=O(3410),H=O(2806);class ne extends B.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,B.Nn)(be)&&be.add(this)):this.destination=Me}static create(be,Ee,ze){return new je(be,Ee,ze)}next(be){this.isStopped?Re(function ue(he){return _e("N",he,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Re(function le(he){return _e("E",void 0,he)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Re(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function xe(he,be){return He.call(he,be)}class Fe{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(be)}catch(ze){Q(ze)}}error(be){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(be)}catch(ze){Q(ze)}else Q(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ee){Q(Ee)}}}class je extends ne{constructor(be,Ee,ze){let re;if(super(),(0,p.m)(be)||!be)re={next:null!=be?be:void 0,error:null!=Ee?Ee:void 0,complete:null!=ze?ze:void 0};else{let Qe;this&&P.v.useDeprecatedNextContext?(Qe=Object.create(be),Qe.unsubscribe=()=>this.unsubscribe(),re={next:be.next&&xe(be.next,Qe),error:be.error&&xe(be.error,Qe),complete:be.complete&&xe(be.complete,Qe)}):re=be}this.destination=new Fe(re)}}function Q(he){P.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(he):(0,ae.h)(he)}function Re(he,be){const{onStoppedNotification:Ee}=P.v;Ee&&G.z.setTimeout(()=>Ee(he,be))}const Me={closed:!0,next:se.Z,error:function ce(he){throw he},complete:se.Z}},727:(at,De,O)=>{"use strict";O.d(De,{Lc:()=>me,w0:()=>se,Nn:()=>le});var p=O(576);const P=(0,O(3888).d)(_e=>function(H){_e(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,He)=>`${He+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=O(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,p.m)(ne))try{ne()}catch(xe){G=xe instanceof P?xe.errors:[xe]}const{_teardowns:He}=this;if(He){this._teardowns=null;for(const xe of He)try{ue(xe)}catch(Fe){G=null!=G?G:[],Fe instanceof P?G=[...G,...Fe.errors]:G.push(Fe)}}if(G)throw new P(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,G)}remove(G){const{_teardowns:H}=this;H&&(0,ae.P)(H,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const _e=new se;return _e.closed=!0,_e})();const me=se.EMPTY;function le(_e){return _e instanceof se||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function ue(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(at,De,O)=>{"use strict";O.d(De,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,O)=>{"use strict";O.d(De,{E:()=>B});const B=new(O(8306).y)(se=>se.complete())},8996:(at,De,O)=>{"use strict";O.d(De,{D:()=>be});var p=O(8421),B=O(5363),P=O(9468),me=O(8306),ue=O(2202),_e=O(576),G=O(9672);function ne(Ee,ze){if(!Ee)throw new Error("Iterable cannot be null");return new me.y(re=>{(0,G.f)(re,ze,()=>{const Qe=Ee[Symbol.asyncIterator]();(0,G.f)(re,ze,()=>{Qe.next().then(X=>{X.done?re.complete():re.next(X.value)})},0,!0)})})}var He=O(3670),xe=O(8239),Fe=O(1144),je=O(6495),Q=O(2206),ce=O(4532),Re=O(3260);function be(Ee,ze){return ze?function he(Ee,ze){if(null!=Ee){if((0,He.c)(Ee))return function ae(Ee,ze){return(0,p.Xf)(Ee).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ee,ze);if((0,Fe.z)(Ee))return function le(Ee,ze){return new me.y(re=>{let Qe=0;return ze.schedule(function(){Qe===Ee.length?re.complete():(re.next(Ee[Qe++]),re.closed||this.schedule())})})}(Ee,ze);if((0,xe.t)(Ee))return function se(Ee,ze){return(0,p.Xf)(Ee).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ee,ze);if((0,Q.D)(Ee))return ne(Ee,ze);if((0,je.T)(Ee))return function H(Ee,ze){return new me.y(re=>{let Qe;return(0,G.f)(re,ze,()=>{Qe=Ee[ue.h](),(0,G.f)(re,ze,()=>{let X,pe;try{({value:X,done:pe}=Qe.next())}catch(fe){return void re.error(fe)}pe?re.complete():re.next(X)},0,!0)}),()=>(0,_e.m)(null==Qe?void 0:Qe.return)&&Qe.return()})}(Ee,ze);if((0,Re.L)(Ee))return function Me(Ee,ze){return ne((0,Re.Q)(Ee),ze)}(Ee,ze)}throw(0,ce.z)(Ee)}(Ee,ze):(0,p.Xf)(Ee)}},8421:(at,De,O)=>{"use strict";O.d(De,{Xf:()=>He});var p=O(655),B=O(1144),P=O(8239),ae=O(8306),se=O(3670),me=O(2206),le=O(4532),ue=O(6495),_e=O(3260),G=O(576),H=O(7849),ne=O(8822);function He(he){if(he instanceof ae.y)return he;if(null!=he){if((0,se.c)(he))return function xe(he){return new ae.y(be=>{const Ee=he[ne.L]();if((0,G.m)(Ee.subscribe))return Ee.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,B.z)(he))return function Fe(he){return new ae.y(be=>{for(let Ee=0;Ee<he.length&&!be.closed;Ee++)be.next(he[Ee]);be.complete()})}(he);if((0,P.t)(he))return function je(he){return new ae.y(be=>{he.then(Ee=>{be.closed||(be.next(Ee),be.complete())},Ee=>be.error(Ee)).then(null,H.h)})}(he);if((0,me.D)(he))return ce(he);if((0,ue.T)(he))return function Q(he){return new ae.y(be=>{for(const Ee of he)if(be.next(Ee),be.closed)return;be.complete()})}(he);if((0,_e.L)(he))return function Re(he){return ce((0,_e.Q)(he))}(he)}throw(0,le.z)(he)}function ce(he){return new ae.y(be=>{(function Me(he,be){var Ee,ze,re,Qe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,p.KL)(he);!(ze=yield Ee.next()).done;)if(be.next(ze.value),be.closed)return}catch(X){re={error:X}}finally{try{ze&&!ze.done&&(Qe=Ee.return)&&(yield Qe.call(Ee))}finally{if(re)throw re.error}}be.complete()})})(he,be).catch(Ee=>be.error(Ee))})}},6451:(at,De,O)=>{"use strict";O.d(De,{T:()=>me});var p=O(8189),B=O(8421),P=O(515),ae=O(7669),se=O(8996);function me(...le){const ue=(0,ae.yG)(le),_e=(0,ae._6)(le,1/0),G=le;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,p.J)(_e)((0,se.D)(G,ue)):P.E}},5403:(at,De,O)=>{"use strict";O.d(De,{x:()=>B});var p=O(930);function B(ae,se,me,le,ue){return new P(ae,se,me,le,ue)}class P extends p.Lv{constructor(se,me,le,ue,_e,G){super(se),this.onFinalize=_e,this.shouldUnsubscribe=G,this._next=me?function(H){try{me(H)}catch(ne){se.error(ne)}}:super._next,this._error=ue?function(H){try{ue(H)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(at,De,O)=>{"use strict";O.d(De,{U:()=>P});var p=O(4482),B=O(5403);function P(ae,se){return(0,p.e)((me,le)=>{let ue=0;me.subscribe((0,B.x)(le,_e=>{le.next(ae.call(se,_e,ue++))}))})}},8189:(at,De,O)=>{"use strict";O.d(De,{J:()=>P});var p=O(5577),B=O(4671);function P(ae=1/0){return(0,p.z)(B.y,ae)}},5577:(at,De,O)=>{"use strict";O.d(De,{z:()=>ue});var p=O(4004),B=O(8421),P=O(4482),ae=O(9672),se=O(5403),le=O(576);function ue(_e,G,H=1/0){return(0,le.m)(G)?ue((ne,He)=>(0,p.U)((xe,Fe)=>G(ne,xe,He,Fe))((0,B.Xf)(_e(ne,He))),H):("number"==typeof G&&(H=G),(0,P.e)((ne,He)=>function me(_e,G,H,ne,He,xe,Fe,je){const Q=[];let ce=0,Re=0,Me=!1;const he=()=>{Me&&!Q.length&&!ce&&G.complete()},be=ze=>ce<ne?Ee(ze):Q.push(ze),Ee=ze=>{xe&&G.next(ze),ce++;let re=!1;(0,B.Xf)(H(ze,Re++)).subscribe((0,se.x)(G,Qe=>{null==He||He(Qe),xe?be(Qe):G.next(Qe)},()=>{re=!0},void 0,()=>{if(re)try{for(ce--;Q.length&&ce<ne;){const Qe=Q.shift();Fe?(0,ae.f)(G,Fe,()=>Ee(Qe)):Ee(Qe)}he()}catch(Qe){G.error(Qe)}}))};return _e.subscribe((0,se.x)(G,be,()=>{Me=!0,he()})),()=>{null==je||je()}}(ne,He,_e,H)))}},5363:(at,De,O)=>{"use strict";O.d(De,{Q:()=>ae});var p=O(9672),B=O(4482),P=O(5403);function ae(se,me=0){return(0,B.e)((le,ue)=>{le.subscribe((0,P.x)(ue,_e=>(0,p.f)(ue,se,()=>ue.next(_e),me),()=>(0,p.f)(ue,se,()=>ue.complete(),me),_e=>(0,p.f)(ue,se,()=>ue.error(_e),me)))})}},3099:(at,De,O)=>{"use strict";O.d(De,{B:()=>me});var p=O(8996),B=O(5698),P=O(7579),ae=O(930),se=O(4482);function me(ue={}){const{connector:_e=(()=>new P.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:ne=!0}=ue;return He=>{let xe=null,Fe=null,je=null,Q=0,ce=!1,Re=!1;const Me=()=>{null==Fe||Fe.unsubscribe(),Fe=null},he=()=>{Me(),xe=je=null,ce=Re=!1},be=()=>{const Ee=xe;he(),null==Ee||Ee.unsubscribe()};return(0,se.e)((Ee,ze)=>{Q++,!Re&&!ce&&Me();const re=je=null!=je?je:_e();ze.add(()=>{Q--,0===Q&&!Re&&!ce&&(Fe=le(be,ne))}),re.subscribe(ze),xe||(xe=new ae.Hp({next:Qe=>re.next(Qe),error:Qe=>{Re=!0,Me(),Fe=le(he,G,Qe),re.error(Qe)},complete:()=>{ce=!0,Me(),Fe=le(he,H),re.complete()}}),(0,p.D)(Ee).subscribe(xe))})(He)}}function le(ue,_e,...G){return!0===_e?(ue(),null):!1===_e?null:_e(...G).pipe((0,B.q)(1)).subscribe(()=>ue())}},9468:(at,De,O)=>{"use strict";O.d(De,{R:()=>B});var p=O(4482);function B(P,ae=0){return(0,p.e)((se,me)=>{me.add(P.schedule(()=>se.subscribe(me),ae))})}},5698:(at,De,O)=>{"use strict";O.d(De,{q:()=>ae});var p=O(515),B=O(4482),P=O(5403);function ae(se){return se<=0?()=>p.E:(0,B.e)((me,le)=>{let ue=0;me.subscribe((0,P.x)(le,_e=>{++ue<=se&&(le.next(_e),se<=ue&&le.complete())}))})}},8505:(at,De,O)=>{"use strict";O.d(De,{b:()=>se});var p=O(576),B=O(4482),P=O(5403),ae=O(4671);function se(me,le,ue){const _e=(0,p.m)(me)||le||ue?{next:me,error:le,complete:ue}:me;return _e?(0,B.e)((G,H)=>{var ne;null===(ne=_e.subscribe)||void 0===ne||ne.call(_e);let He=!0;G.subscribe((0,P.x)(H,xe=>{var Fe;null===(Fe=_e.next)||void 0===Fe||Fe.call(_e,xe),H.next(xe)},()=>{var xe;He=!1,null===(xe=_e.complete)||void 0===xe||xe.call(_e),H.complete()},xe=>{var Fe;He=!1,null===(Fe=_e.error)||void 0===Fe||Fe.call(_e,xe),H.error(xe)},()=>{var xe,Fe;He&&(null===(xe=_e.unsubscribe)||void 0===xe||xe.call(_e)),null===(Fe=_e.finalize)||void 0===Fe||Fe.call(_e)}))}):ae.y}},4408:(at,De,O)=>{"use strict";O.d(De,{o:()=>se});var p=O(727);class B extends p.w0{constructor(le,ue){super()}schedule(le,ue=0){return this}}const P={setInterval(...me){const{delegate:le}=P;return((null==le?void 0:le.setInterval)||setInterval)(...me)},clearInterval(me){const{delegate:le}=P;return((null==le?void 0:le.clearInterval)||clearInterval)(me)},delegate:void 0};var ae=O(8737);class se extends B{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue,this.pending=!1}schedule(le,ue=0){if(this.closed)return this;this.state=le;const _e=this.id,G=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(G,_e,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(G,this.id,ue),this}requestAsyncId(le,ue,_e=0){return P.setInterval(le.flush.bind(le,this),_e)}recycleAsyncId(le,ue,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ue;P.clearInterval(ue)}execute(le,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(le,ue);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ue){let G,_e=!1;try{this.work(le)}catch(H){_e=!0,G=H||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:ue}=this,{actions:_e}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(_e,this),null!=le&&(this.id=this.recycleAsyncId(ue,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,O)=>{"use strict";O.d(De,{v:()=>P});var p=O(6063);class B{constructor(se,me=B.now){this.schedulerActionCtor=se,this.now=me}schedule(se,me=0,le){return new this.schedulerActionCtor(this,se).schedule(le,me)}}B.now=p.l.now;class P extends B{constructor(se,me=B.now){super(se,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:me}=this;if(this._active)return void me.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=me.shift());if(this._active=!1,le){for(;se=me.shift();)se.unsubscribe();throw le}}}},4986:(at,De,O)=>{"use strict";O.d(De,{z:()=>P});var p=O(4408);const P=new(O(7565).v)(p.o)},6063:(at,De,O)=>{"use strict";O.d(De,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(at,De,O)=>{"use strict";O.d(De,{z:()=>p});const p={setTimeout(...B){const{delegate:P}=p;return((null==P?void 0:P.setTimeout)||setTimeout)(...B)},clearTimeout(B){const{delegate:P}=p;return((null==P?void 0:P.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(at,De,O)=>{"use strict";O.d(De,{h:()=>B});const B=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,O)=>{"use strict";O.d(De,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,De,O)=>{"use strict";O.d(De,{_6:()=>me,jO:()=>ae,yG:()=>se});var p=O(576);function P(le){return le[le.length-1]}function ae(le){return(0,p.m)(P(le))?le.pop():void 0}function se(le){return function B(le){return le&&(0,p.m)(le.schedule)}(P(le))?le.pop():void 0}function me(le,ue){return"number"==typeof P(le)?le.pop():ue}},8737:(at,De,O)=>{"use strict";function p(B,P){if(B){const ae=B.indexOf(P);0<=ae&&B.splice(ae,1)}}O.d(De,{P:()=>p})},3888:(at,De,O)=>{"use strict";function p(B){const ae=B(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(De,{d:()=>p})},2806:(at,De,O)=>{"use strict";O.d(De,{x:()=>P,O:()=>ae});var p=O(2416);let B=null;function P(se){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!B;if(me&&(B={errorThrown:!1,error:null}),se(),me){const{errorThrown:le,error:ue}=B;if(B=null,le)throw ue}}else se()}function ae(se){p.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=se)}},9672:(at,De,O)=>{"use strict";function p(B,P,ae,se=0,me=!1){const le=P.schedule(function(){ae(),me?B.add(this.schedule(null,se)):this.unsubscribe()},se);if(B.add(le),!me)return le}O.d(De,{f:()=>p})},4671:(at,De,O)=>{"use strict";function p(B){return B}O.d(De,{y:()=>p})},1144:(at,De,O)=>{"use strict";O.d(De,{z:()=>p});const p=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(at,De,O)=>{"use strict";O.d(De,{D:()=>B});var p=O(576);function B(P){return Symbol.asyncIterator&&(0,p.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(at,De,O)=>{"use strict";function p(B){return"function"==typeof B}O.d(De,{m:()=>p})},3670:(at,De,O)=>{"use strict";O.d(De,{c:()=>P});var p=O(8822),B=O(576);function P(ae){return(0,B.m)(ae[p.L])}},6495:(at,De,O)=>{"use strict";O.d(De,{T:()=>P});var p=O(2202),B=O(576);function P(ae){return(0,B.m)(null==ae?void 0:ae[p.h])}},8239:(at,De,O)=>{"use strict";O.d(De,{t:()=>B});var p=O(576);function B(P){return(0,p.m)(null==P?void 0:P.then)}},3260:(at,De,O)=>{"use strict";O.d(De,{Q:()=>P,L:()=>ae});var p=O(655),B=O(576);function P(se){return(0,p.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:ue,done:_e}=yield(0,p.qq)(le.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ue)}}finally{le.releaseLock()}})}function ae(se){return(0,B.m)(null==se?void 0:se.getReader)}},4482:(at,De,O)=>{"use strict";O.d(De,{A:()=>B,e:()=>P});var p=O(576);function B(ae){return(0,p.m)(null==ae?void 0:ae.lift)}function P(ae){return se=>{if(B(se))return se.lift(function(me){try{return ae(me,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,De,O)=>{"use strict";function p(){}O.d(De,{Z:()=>p})},7849:(at,De,O)=>{"use strict";O.d(De,{h:()=>P});var p=O(2416),B=O(3410);function P(ae){B.z.setTimeout(()=>{const{onUnhandledError:se}=p.v;if(!se)throw ae;se(ae)})}},4532:(at,De,O)=>{"use strict";function p(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>p})},655:(at,De,O)=>{"use strict";function ae(X,pe){var fe={};for(var ye in X)Object.prototype.hasOwnProperty.call(X,ye)&&pe.indexOf(ye)<0&&(fe[ye]=X[ye]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(ye=Object.getOwnPropertySymbols(X);Le<ye.length;Le++)pe.indexOf(ye[Le])<0&&Object.prototype.propertyIsEnumerable.call(X,ye[Le])&&(fe[ye[Le]]=X[ye[Le]])}return fe}function ue(X,pe,fe,ye){return new(fe||(fe=Promise))(function(de,wt){function Zt(it){try{ut(ye.next(it))}catch(ur){wt(ur)}}function Rn(it){try{ut(ye.throw(it))}catch(ur){wt(ur)}}function ut(it){it.done?de(it.value):function Le(de){return de instanceof fe?de:new fe(function(wt){wt(de)})}(it.value).then(Zt,Rn)}ut((ye=ye.apply(X,pe||[])).next())})}function Q(X){return this instanceof Q?(this.v=X,this):new Q(X)}function ce(X,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,ye=fe.apply(X,pe||[]),de=[];return Le={},wt("next"),wt("throw"),wt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function wt(sn){ye[sn]&&(Le[sn]=function(yr){return new Promise(function(Yt,$t){de.push([sn,yr,Yt,$t])>1||Zt(sn,yr)})})}function Zt(sn,yr){try{!function Rn(sn){sn.value instanceof Q?Promise.resolve(sn.value.v).then(ut,it):ur(de[0][2],sn)}(ye[sn](yr))}catch(Yt){ur(de[0][3],Yt)}}function ut(sn){Zt("next",sn)}function it(sn){Zt("throw",sn)}function ur(sn,yr){sn(yr),de.shift(),de.length&&Zt(de[0][0],de[0][1])}}function Me(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=X[Symbol.asyncIterator];return pe?pe.call(X):(X=function ne(X){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&X[pe],ye=0;if(fe)return fe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ye>=X.length&&(X=void 0),{value:X&&X[ye++],done:!X}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),fe={},ye("next"),ye("throw"),ye("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ye(de){fe[de]=X[de]&&function(wt){return new Promise(function(Zt,Rn){!function Le(de,wt,Zt,Rn){Promise.resolve(Rn).then(function(ut){de({value:ut,done:Zt})},wt)}(Zt,Rn,(wt=X[de](wt)).done,wt.value)})}}}O.d(De,{_T:()=>ae,mG:()=>ue,qq:()=>Q,FC:()=>ce,KL:()=>Me})},5e3:(at,De,O)=>{"use strict";O.d(De,{deG:()=>tf,tb:()=>gp,AFp:()=>n_,ip1:()=>t_,CZH:()=>Cl,hGG:()=>gs,z2F:()=>Qc,sBO:()=>WI,Sil:()=>Il,_Vd:()=>np,EJc:()=>Kc,SBq:()=>ah,qLn:()=>Ef,vpe:()=>Sn,tBr:()=>eo,XFs:()=>pt,OlP:()=>Nn,zs3:()=>io,ZZ4:()=>d_,aQg:()=>br,soG:()=>mp,YKP:()=>rw,h0i:()=>Lc,PXZ:()=>HI,R0b:()=>cn,FiY:()=>Ur,Lbi:()=>Ew,g9A:()=>ww,Qsj:()=>gu,FYo:()=>Jv,JOm:()=>sa,tp0:()=>Wr,Rgc:()=>up,dDg:()=>bl,q4F:()=>ew,GfV:()=>uh,s_b:()=>$m,ifc:()=>St,eFA:()=>vp,G48:()=>Cp,Gpc:()=>H,X6Q:()=>Ep,_c5:()=>Tl,VLi:()=>jI,c2e:()=>LI,zSh:()=>xf,wAp:()=>Et,vHH:()=>Fe,cg1:()=>Hf,kL8:()=>$C,dqk:()=>jt,sIi:()=>lu,CqO:()=>fv,QGY:()=>zd,F4k:()=>hv,RDi:()=>fd,AaK:()=>ue,qOj:()=>Ky,TTD:()=>xa,_Bn:()=>oh,xp6:()=>tD,uIk:()=>ao,ekj:()=>_v,Suo:()=>vl,Xpm:()=>on,lG2:()=>Te,Yz7:()=>Yt,cJS:()=>en,oAB:()=>oe,Yjl:()=>qe,Y36:()=>Pf,_UZ:()=>dv,qZA:()=>kf,TgZ:()=>um,EpF:()=>pC,n5z:()=>Do,LFG:()=>$e,$8M:()=>Qa,$Z:()=>cC,NdJ:()=>ko,CRH:()=>qm,Q6J:()=>lv,s9C:()=>Kd,iGM:()=>yu,MAs:()=>X0,CHM:()=>Gl,LSH:()=>Md,YNc:()=>Xy,_uU:()=>Cv,Oqu:()=>Iv,hij:()=>Lf});var p=O(7579),B=O(727),P=O(8306),ae=O(6451),se=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=me({__forward_ref__:me});function H(s){return s.__forward_ref__=H,s.toString=function(){return ue(this())},s}function ne(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class Fe extends Error{constructor(o,u){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function Q(s){return"string"==typeof s?s:null==s?"":String(s)}function ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Q(s)}function be(s,o){const u=o?` in ${o}`:"";throw new Fe(-201,`No provider for ${ce(s)} found${u}`)}function ut(s,o){null==s&&function it(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return Ui(s,yi)||Ui(s,Un)}function Ui(s,o){return s.hasOwnProperty(o)?s[o]:null}function Qi(s){return s&&(s.hasOwnProperty(Vi)||s.hasOwnProperty(Ji))?s[Vi]:null}const yi=me({\u0275prov:me}),Vi=me({\u0275inj:me}),Un=me({ngInjectableDef:me}),Ji=me({ngInjectorDef:me});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Or;function Wt(s){const o=Or;return Or=s,o}function Sr(s,o,u){const c=Cn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&pt.Optional?null:void 0!==o?o:void be(ue(s),"Injector")}function lt(s){return{toString:s}.toString()}var bt=(()=>((bt=bt||{})[bt.OnPush=0]="OnPush",bt[bt.Default=1]="Default",bt))(),St=(()=>{return(s=St||(St={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",St;var s})();const st="undefined"!=typeof globalThis&&globalThis,Je="undefined"!=typeof window&&window,$s="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=st||"undefined"!=typeof global&&global||Je||$s,En={},j=[],W=me({\u0275cmp:me}),K=me({\u0275dir:me}),Ie=me({\u0275pipe:me}),ie=me({\u0275mod:me}),Ke=me({\u0275fac:me}),ft=me({__NG_ELEMENT_ID__:me});let zt=0;function on(s){return lt(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||St.Emulated,id:"c",styles:s.styles||j,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return c.id+=zt++,c.inputs=z(s.inputs,u),c.outputs=z(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(cr):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Nt):null,c})}function cr(s){return ot(s)||function At(s){return s[K]||null}(s)}function Nt(s){return function Bt(s){return s[Ie]||null}(s)}const Jn={};function oe(s){return lt(()=>{const o={type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Jn[s.id]=s.type),o})}function z(s,o){if(null==s)return En;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const Te=on;function qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ot(s){return s[W]||null}function Ot(s,o){const u=s[ie]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function oi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ts(s){return Array.isArray(s)&&!0===s[1]}function Au(s){return 0!=(8&s.flags)}function sd(s){return 2==(2&s.flags)}function ns(s){return 1==(1&s.flags)}function rs(s){return null!==s.template}function Fl(s){return 0!=(512&s[2])}function ji(s,o){return s.hasOwnProperty(Ke)?s[Ke]:null}class cd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function xa(){return Ra}function Ra(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ma),zh}function zh(){const s=Na(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===En)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ma(s,o,u,c){const d=Na(s)||function Go(s,o){return s[dd]=o}(s,{previous:En,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],I=y[E];f[E]=new cd(I&&I.currentValue,o,y===En),s[c]=o}xa.ngInherit=!0;const dd="__ngSimpleChanges__";function Na(s){return s[dd]||null}let Nu;function fd(s){Nu=s}function hn(s){return!!s.listen}const qo={createRenderer:(s,o)=>function Hi(){return void 0!==Nu?Nu:"undefined"!=typeof document?document:void 0}()};function fn(s){for(;Array.isArray(s);)s=s[0];return s}function Ys(s,o){return fn(o[s])}function dr(s,o){return fn(o[s.index])}function jn(s,o){return s.data[o]}function Ar(s,o){const u=o[s];return oi(u)?u:u[0]}function wo(s){return 4==(4&s[2])}function Qs(s){return 128==(128&s[2])}function $i(s,o){return null==o?null:s[o]}function ss(s){s[18]=0}function Es(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const mt={lFrame:Yl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function La(){return mt.bindingsEnabled}function Se(){return mt.lFrame.lView}function Ut(){return mt.lFrame.tView}function Gl(s){return mt.lFrame.contextLView=s,s[8]}function Tn(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return mt.lFrame.currentTNode}function wi(s,o){const u=mt.lFrame;u.currentTNode=s,u.isParent=o}function ql(){return mt.lFrame.isParent}function Co(){return mt.isInCheckNoChangesMode}function Ou(s){mt.isInCheckNoChangesMode=s}function Js(){return mt.lFrame.bindingIndex++}function zl(s,o){const u=mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ba(o)}function Ba(s){mt.lFrame.currentDirectiveIndex=s}function Kl(){return mt.lFrame.currentQueryIndex}function Zl(s){mt.lFrame.currentQueryIndex=s}function Zh(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ha(s,o,u){if(u&pt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=Zh(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=mt.lFrame=Xs();return c.currentTNode=o,c.lView=s,!0}function $a(s){const o=Xs(),u=s[1];mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Xs(){const s=mt.lFrame,o=null===s?null:s.child;return null===o?Yl(s):o}function Yl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Yh(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Qh=Yh;function Ko(){const s=Yh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function xr(){return mt.lFrame.selectedIndex}function Is(s){mt.lFrame.selectedIndex=s}function Mn(){const s=mt.lFrame;return jn(s.tView,s.selectedIndex)}function qa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:x}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(u,x)}}function Ql(s,o,u){Er(s,o,3,u)}function Jl(s,o,u,c){(3&s[2])===u&&Er(s,o,u,c)}function Uu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Er(s,o,u,c){const f=null!=c?c:-1,y=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<f||-1==f)&&(Xl(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Xl(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Vu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function et(s,o,u){const c=hn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],E=u[d++],I=u[d++];c?s.setAttribute(o,E,I,y):o.setAttributeNS(y,E,I)}else{const y=f,E=u[++d];ui(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Ts(s){return 3===s||4===s||6===s}function ui(s){return 64===s.charCodeAt(0)}function xn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||nc(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function nc(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function $n(s){return-1!==s}function Zo(s){return 32767&s}function bo(s,o){let u=function za(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let To=!0;function as(s){const o=To;return To=s,o}let Ka=0;function un(s,o){const u=Za(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Yo(c.data,s),Yo(o,null),Yo(c.blueprint,null));const d=Qo(s,o),f=s.injectorIndex;if($n(d)){const y=Zo(d),E=bo(d,o),I=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|I[y+A]}return o[f+8]=d,f}function Yo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Za(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(c=2===y?f.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function $r(s,o,u){!function ic(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ft)&&(c=u[ft]),null==c&&(c=u[ft]=Ka++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Jo(s,o,u){if(u&pt.Optional)return s;be(o,"NodeInjector")}function us(s,o,u,c){if(u&pt.Optional&&void 0===c&&(c=null),0==(u&(pt.Self|pt.Host))){const d=s[9],f=Wt(void 0);try{return d?d.get(o,c,u&pt.Optional):Sr(o,c,u&pt.Optional)}finally{Wt(f)}}return Jo(c,o,u)}function $u(s,o,u,c=pt.Default,d){if(null!==s){const f=function Rr(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Ds:o}(u);if("function"==typeof f){if(!Ha(o,s,c))return c&pt.Host?Jo(d,u,c):us(o,u,c,d);try{const y=f(c);if(null!=y||c&pt.Optional)return y;be(u)}finally{Qh()}}else if("number"==typeof f){let y=null,E=Za(s,o),I=-1,A=c&pt.Host?o[16][6]:null;for((-1===E||c&pt.SkipSelf)&&(I=-1===E?Qo(s,o):o[E+8],-1!==I&&ea(c,!1)?(y=o[1],E=Zo(I),o=bo(I,o)):E=-1);-1!==E;){const x=o[1];if(oc(f,E,x.data)){const L=sc(E,o,u,y,c,A);if(L!==Ya)return L}I=o[E+8],-1!==I&&ea(c,o[1].data[E+8]===A)&&oc(f,E,o)?(y=x,E=Zo(I),o=bo(I,o)):E=-1}}}return us(o,u,c,d)}const Ya={};function Ds(){return new Dn(Tn(),Se())}function sc(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],x=Ss(E,y,u,null==c?sd(E)&&To:c!=y&&0!=(3&E.type),d&pt.Host&&f===E);return null!==x?Xo(o,y,x,E):Ya}function Ss(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,I=s.directiveStart,x=f>>20,$=d?E+x:s.directiveEnd;for(let ee=c?E:E+x;ee<$;ee++){const Ce=y[ee];if(ee<I&&u===Ce||ee>=I&&Ce.type===u)return ee}if(d){const ee=y[I];if(ee&&rs(ee)&&ee.type===u)return I}return null}function Xo(s,o,u,c){let d=s[u];const f=o.data;if(function ec(s){return s instanceof Vu}(d)){const y=d;y.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(ce(f[u]));const E=as(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Wt(y.injectImpl):null;Ha(s,c,pt.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Io(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=Ra(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==I&&Wt(I),as(E),y.resolving=!1,Qh()}}return d}function oc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ea(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Dn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return $u(this._tNode,this._lView,o,c,u)}}function Do(s){return lt(()=>{const o=s.prototype.constructor,u=o[Ke]||So(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const f=d[Ke]||So(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function So(s){return He(s)?()=>{const o=So(ne(s));return o&&o()}:ji(s)}function Qa(s){return function Hu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(Ts(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Tn(),s)}const Gn="__parameters__";function ci(s,o,u){return lt(()=>{const c=function ac(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(I,A,x){const L=I.hasOwnProperty(Gn)?I[Gn]:Object.defineProperty(I,Gn,{value:[]})[Gn];for(;L.length<=x;)L.push(null);return(L[x]=L[x]||[]).push(y),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Nn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Yt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tf=new Nn("AnalyzeForEntryComponents");function Gr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Gr(c,o)):o!==s&&o.push(c)}return o}function Ii(s,o){s.forEach(u=>Array.isArray(u)?Ii(u,o):o(u))}function eu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function zu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function hi(s,o,u){let c=Ao(s,o);return c>=0?s[1|c]=u:(c=~c,function Ku(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Yu(s,o){const u=Ao(s,o);if(u>=0)return s[1|u]}function Ao(s,o){return function Qu(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const f=c+(d-c>>1),y=s[f<<u];if(o===y)return f<<u;y>o?d=f:c=f+1}return~(d<<u)}(s,o,1)}const Ms={},Xu="__NG_DI_FLAG__",nu="ngTempTokenPath",b=/\n/gm,M="__source",V=me({provide:String,useValue:me});let Y;function J(s){const o=Y;return Y=s,o}function Oe(s,o=pt.Default){if(void 0===Y)throw new Fe(203,"");return null===Y?Sr(s,void 0,o):Y.get(s,o&pt.Optional?null:void 0,o)}function $e(s,o=pt.Default){return(function An(){return Or}()||Oe)(ne(s),o)}function Xt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Fe(900,"");let d,f=pt.Default;for(let y=0;y<c.length;y++){const E=c[y],I=qr(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}o.push($e(d,f))}else o.push($e(c))}return o}function qn(s,o){return s[Xu]=o,s.prototype[Xu]=o,s}function qr(s){return s[Xu]}const eo=qn(ci("Inject",s=>({token:s})),-1),Ur=qn(ci("Optional"),8),Wr=qn(ci("SkipSelf"),4);class Sd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ps(s){return s instanceof Sd?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,C=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function Md(s){const o=function Nd(){const s=Se();return s&&s[12]}();return o?o.sanitize(Cr.URL,s)||"":function to(s,o){const u=function cf(s){return s instanceof Sd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Ps(s):function R(s){return(s=String(s)).match(g)||s.match(C)?s:"unsafe:"+s}(Q(s))}const jE="__ngContext__";function bi(s,o){s[jE]=o}function J_(s){const o=function _f(s){return s[jE]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ny(s){return s.ngOriginalError}function NT(s,...o){s.error(...o)}class Ef{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function MT(s){return s&&s.ngErrorLogger||NT}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ny(o);for(;u&&ny(u);)u=ny(u);return u||null}}const $E=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function Ro(s){return s instanceof Function?s():s}var sa=(()=>((sa=sa||{})[sa.Important=1]="Important",sa[sa.DashCase=2]="DashCase",sa))();function iy(s,o){return undefined(s,o)}function Cf(s){const o=s[3];return ts(o)?o[3]:o}function bg(s){return ZE(s[13])}function oy(s){return ZE(s[4])}function ZE(s){for(;null!==s&&!ts(s);)s=s[4];return s}function Pd(s,o,u,c,d){if(null!=c){let f,y=!1;ts(c)?f=c:oi(c)&&(y=!0,c=c[0]);const E=fn(c);0===s&&null!==u?null==d?e0(o,u,E):ll(o,u,E,d||null,!0):1===s&&null!==u?ll(o,u,E,d||null,!0):2===s?function u0(s,o,u){const c=xg(s,o);c&&function n0(s,o,u,c){hn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function Pg(s,o,u,c,d){const f=u[7];f!==fn(u)&&Pd(o,s,c,f,d);for(let E=10;E<u.length;E++){const I=u[E];If(I[1],I,s,o,c,f)}}(o,s,f,u,d)}}function pi(s,o,u){if(hn(s))return s.createElement(o,u);{const c=null!==u?function hd(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function QE(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Es(d,-1)),u.splice(c,1)}function Sg(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&QE(d,c),o>0&&(s[u-1][4]=c[4]);const f=zu(s,10+o);!function GT(s,o){If(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function JE(s,o){if(!(256&o[2])){const u=o[11];hn(u)&&u.destroyNode&&If(s,o,u,3,null,null),function ay(s){let o=s[13];if(!o)return Ag(s[1],s);for(;o;){let u=null;if(oi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)oi(o)&&Ag(o[1],o),o=o[3];null===o&&(o=s),oi(o)&&Ag(o[1],o),u=o&&o[4]}o=u}}(o)}}function Ag(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function uy(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Vu)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],I=f[y+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function XE(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):fn(o[y]),I=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],I,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&hn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&ts(o[3])){u!==o[3]&&QE(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function WT(s,o,u){return function ul(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===St.None||d===St.Emulated)return null}return dr(c,u)}(s,o.parent,u)}function ll(s,o,u,c,d){hn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function e0(s,o,u){hn(s)?s.appendChild(o,u):o.appendChild(u)}function t0(s,o,u,c,d){null!==c?ll(s,o,u,c,d):e0(s,o,u)}function xg(s,o){return hn(s)?s.parentNode(o):o.parentNode}let s0=function ly(s,o,u){return 40&s.type?dr(s,u):null};function Od(s,o,u,c){const d=WT(s,c,o),f=o[11],E=function r0(s,o,u){return s0(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)t0(f,d,u[I],E,!1);else t0(f,d,u,E,!1)}function Rg(s,o){if(null!==o){const u=o.type;if(3&u)return dr(o,s);if(4&u)return Mg(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Rg(s,c);{const d=s[o.index];return ts(d)?Mg(-1,d):fn(d)}}if(32&u)return iy(o,s)()||fn(s[o.index]);{const c=a0(s,o);return null!==c?Array.isArray(c)?c[0]:Rg(Cf(s[16]),c):Rg(s,o.next)}}return null}function a0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Mg(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Rg(c,d)}return o[7]}function l0(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],I=u.type;if(y&&0===o&&(E&&bi(fn(E),c),u.flags|=4),64!=(64&u.flags))if(8&I)l0(s,o,u.child,c,d,f,!1),Pd(o,s,d,E,f);else if(32&I){const A=iy(u,c);let x;for(;x=A();)Pd(o,s,d,x,f);Pd(o,s,d,E,f)}else 16&I?Ng(s,o,c,u,d,f):Pd(o,s,d,E,f);u=y?u.projectionNext:u.next}}function If(s,o,u,c,d,f){l0(u,c,s.firstChild,o,d,f,!1)}function Ng(s,o,u,c,d,f){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Pd(o,s,d,I[A],f);else l0(s,o,I,y[3],d,f,!0)}function c0(s,o,u){hn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function kg(s,o,u){hn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function dy(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Og="ng-template";function ln(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==dy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function hy(s){return 4===s.type&&s.value!==Og}function Fg(s,o,u){return o===(4!==s.type||u?s.value:Og)}function YT(s,o,u){let c=4;const d=s.attrs||[],f=function ZM(s){for(let o=0;o<s.length;o++)if(Ts(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Fg(s,I,u)||""===I&&1===o.length){if(oa(c))return!1;y=!0}}else{const A=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!ln(s.attrs,A,u)){if(oa(c))return!1;y=!0}continue}const L=QT(8&c?"class":I,d,hy(s),u);if(-1===L){if(oa(c))return!1;y=!0;continue}if(""!==A){let $;$=L>f?"":d[L+1].toLowerCase();const ee=8&c?$:null;if(ee&&-1!==dy(ee,A,0)||2&c&&A!==$){if(oa(c))return!1;y=!0}}}}else{if(!y&&!oa(c)&&!oa(I))return!1;if(y&&oa(I))continue;y=!1,c=I|1&c}}return oa(c)||y}function oa(s){return 0==(1&s)}function QT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function JT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Lg(s,o,u=!1){for(let c=0;c<o.length;c++)if(YT(s,o[c],u))return!0;return!1}function eD(s,o){return s?":not("+o.trim()+")":o}function YM(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!oa(y)&&(o+=eD(f,d),d=""),c=y,f=f||!oa(c);u++}return""!==d&&(o+=eD(f,d)),o}const kt={};function tD(s){nD(Ut(),Se(),xr()+s,Co())}function nD(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Ql(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Jl(o,f,0,u)}Is(u)}function ve(s,o){return s<<17|o<<2}function On(s){return s>>17&32767}function ks(s){return 2|s}function aa(s){return(131068&s)>>2}function fy(s,o){return-131069&s|o<<2}function Mr(s){return 1|s}function Ty(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];Zl(d),y.contentQueries(2,o[f],f)}}}function Sf(s,o,u,c,d,f,y,E,I,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|c,ss(x),x[3]=x[15]=s,x[8]=u,x[10]=y||s&&s[10],x[11]=E||s&&s[11],x[12]=I||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=f,x[16]=2==o.type?s[16]:x,x}function Fd(s,o,u,c,d){let f=s.data[o];if(null===f)f=function Ld(s,o,u,c,d){const f=zo(),y=ql(),I=s.data[o]=function fD(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(s,o,u,c,d),function Wl(){return mt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function Eo(){const s=mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return wi(f,!0),f}function dl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function wc(s,o,u){$a(o);try{const c=s.viewQuery;null!==c&&Af(1,c,u);const d=s.template;null!==d&&g0(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ty(s,o),s.staticViewQueries&&Af(2,s.viewQuery,u);const f=s.components;null!==f&&function dD(s,o){for(let u=0;u<o.length;u++)ID(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ko()}}function hl(s,o,u,c){const d=o[2];if(256==(256&d))return;$a(o);const f=Co();try{ss(o),function Va(s){return mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&g0(s,o,u,2,c);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&Ql(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Jl(o,A,0,null),Uu(o,0)}if(function CD(s){for(let o=bg(s);null!==o;o=oy(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&Es(f,1),d[2]|=1024}}}(o),function ED(s){for(let o=bg(s);null!==o;o=oy(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Qs(c)&&hl(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Ty(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&Ql(o,A)}else{const A=s.contentHooks;null!==A&&Jl(o,A,1),Uu(o,1)}!function f0(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Is(~d);else{const f=d,y=u[++c],E=u[++c];zl(y,f),E(2,o[f])}}}finally{Is(-1)}}(s,o);const E=s.components;null!==E&&function Dy(s,o){for(let u=0;u<o.length;u++)pN(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&Af(2,I,c),!f)if(y){const A=s.viewCheckHooks;null!==A&&Ql(o,A)}else{const A=s.viewHooks;null!==A&&Jl(o,A,2),Uu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Es(o[3],-1))}finally{Ko()}}function p0(s,o,u,c){const d=o[10],f=!Co(),y=wo(o);try{f&&!y&&d.begin&&d.begin(),y&&wc(s,o,c),hl(s,o,u,c)}finally{f&&!y&&d.end&&d.end()}}function g0(s,o,u,c,d){const f=xr(),y=2&c;try{Is(-1),y&&o.length>20&&nD(s,o,20,Co()),u(c,d)}finally{Is(f)}}function Ud(s,o,u){!La()||(function mD(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||un(u,o),bi(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const I=s.data[E],A=rs(I);A&&ky(o,u,I);const x=Xo(o,s,E,u);bi(x,o),null!==y&&Oy(0,E-d,x,I,0,y),A&&(Ar(u.index,o)[8]=x)}}(s,o,u,dr(u,o)),128==(128&u.flags)&&function dN(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Lu(){return mt.lFrame.currentDirectiveIndex}();try{Is(y);for(let I=c;I<d;I++){const A=s.data[I],x=o[I];Ba(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&_D(A,x)}}finally{Is(-1),Ba(E)}}(s,o,u))}function Ay(s,o,u=dr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function m0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Wg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Wg(s,o,u,c,d,f,y,E,I,A){const x=20+c,L=x+d,$=function hD(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:kt);return u}(x,L),ee="function"==typeof A?A():A;return $[1]={type:s,blueprint:$,template:u,queries:null,viewQuery:E,declTNode:o,data:$.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function v0(s,o,u,c){const d=Zg(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Yg(s).push(c,d.length-1))}function w0(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function ds(s,o,u,c,d,f,y,E){const I=dr(o,u);let x,A=o.inputs;!E&&null!=A&&(x=A[c])?(Qg(s,u,x,c,d),sd(o)&&function xy(s,o){const u=Ar(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function E0(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,hn(f)?f.setProperty(I,c,d):ui(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}function Kg(s,o,u,c){let d=!1;if(La()){const f=function Ny(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];Lg(u,y.selectors,!1)&&(d||(d=[]),$r(un(u,o),s,y.type),rs(y)?(yD(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,b0(u,s.data.length,f.length);for(let x=0;x<f.length;x++){const L=f[x];L.providersResolver&&L.providersResolver(L)}let E=!1,I=!1,A=dl(s,o,f.length,null);for(let x=0;x<f.length;x++){const L=f[x];u.mergedAttrs=xn(u.mergedAttrs,L.hostAttrs),Py(s,u,o,A,L),I0(A,L,y),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const $=L.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function zg(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,I=null;for(let A=o.directiveStart;A<c;A++){const x=d[A],L=x.inputs,$=null===f||hy(o)?null:hN(L,f);y.push($),E=w0(L,A,E),I=w0(x.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=I}(s,u)}y&&function vD(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Fe(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=xn(u.mergedAttrs,u.attrs),d}function My(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function cN(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(c,d,y)}}function _D(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function yD(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function I0(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;rs(o)&&(u[""]=s)}}function b0(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Py(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=ji(d.type)),y=new Vu(f,rs(d),null);s.blueprint[c]=y,u[c]=y,My(s,o,0,c,dl(s,u,d.hostVars,kt),d)}function ky(s,o,u){const c=dr(o,s),d=m0(u),f=s[10],y=Fy(s,Sf(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=y}function hs(s,o,u,c,d,f){const y=dr(s,o);!function T0(s,o,u,c,d,f,y){if(null==f)hn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?Q(f):y(f,c||"",d);hn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,u,c,d)}function Oy(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let I=0;I<y.length;){const A=y[I++],x=y[I++],L=y[I++];null!==E?c.setInput(u,L,A,x):u[x]=L}}}function hN(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function wD(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function pN(s,o){const u=Ar(o,s);if(Qs(u)){const c=u[1];80&u[2]?hl(c,u,c.template,u[8]):u[5]>0&&D0(u)}}function D0(s){for(let c=bg(s);null!==c;c=oy(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const y=f[1];hl(y,f,y.template,f[8])}else f[5]>0&&D0(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ar(u[c],s);Qs(d)&&d[5]>0&&D0(d)}}function ID(s,o){const u=Ar(o,s),c=u[1];(function gN(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),wc(c,u,u[8])}function Fy(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function S0(s){for(;s;){s[2]|=64;const o=Cf(s);if(Fl(s)&&!o)return s;s=o}return null}function Vd(s,o,u){const c=o[10];c.begin&&c.begin();try{hl(s,o,s.template,u)}catch(d){throw M0(o,d),d}finally{c.end&&c.end()}}function x0(s){!function A0(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=J_(u),d=c[1];p0(d,c,d.template,u)}}(s[8])}function Af(s,o,u){Zl(0),o(s,u)}const Vy=(()=>Promise.resolve(null))();function Zg(s){return s[7]||(s[7]=[])}function Yg(s){return s.cleanup||(s.cleanup=[])}function M0(s,o){const u=s[9],c=u?u.get(Ef,null):null;c&&c.handleError(o)}function Qg(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],I=o[y],A=s.data[y];null!==A.setInput?A.setInput(I,d,c,E):I[E]=d}}function ou(s,o,u){const c=Ys(o,s);!function YE(s,o,u){hn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function jd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=_e(d,E):2==f&&(c=_e(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const By=new Nn("INJECTOR",-1);class rr{get(o,u=Ms){if(u===Ms){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const xf=new Nn("Set Injector scope."),Ec={},bD={};let jy;function k0(){return void 0===jy&&(jy=new rr),jy}function O0(s,o=null,u=null,c){const d=F0(s,o,u,c);return d._resolveInjectorDefTypes(),d}function F0(s,o=null,u=null,c){return new TD(s,u,o||k0(),c)}class TD{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&Ii(u,E=>this.processProvider(E,o,u)),Ii([o],E=>this.processInjectorType(E,[],f)),this.records.set(By,Cc(void 0,this));const y=this.records.get(xf);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Ms,c=pt.Default){this.assertNotDestroyed();const d=J(this),f=Wt(void 0);try{if(!(c&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function Ti(s){return"function"==typeof s||"object"==typeof s&&s instanceof Nn}(o)&&Cn(o);E=I&&this.injectableDefInScope(I)?Cc(Jg(o),Ec):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&pt.Self?k0():this.parent).get(o,u=c&pt.Optional&&u===Ms?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[nu]=y[nu]||[]).unshift(ue(o)),d)throw y;return function Pn(s,o,u,c){const d=s[nu];throw o[M]&&d.unshift(o[M]),s.message=function cs(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(b,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[nu]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Wt(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Qi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==c.indexOf(y);if(void 0!==f&&(d=Qi(f)),null==d)return!1;if(null!=d.imports&&!E){let x;c.push(y);try{Ii(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===x&&(x=[]),x.push(L))})}finally{}if(void 0!==x)for(let L=0;L<x.length;L++){const{ngModule:$,providers:ee}=x[L];Ii(ee,Ce=>this.processProvider(Ce,$,ee||j))}}this.injectorDefTypes.add(y);const I=ji(y)||(()=>new y);this.records.set(y,Cc(I,Ec));const A=d.providers;if(null!=A&&!E){const x=o;Ii(A,L=>this.processProvider(L,x,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=Ic(o=ne(o))?o:ne(o&&o.provide);const f=function SD(s,o,u){return U0(s)?Cc(void 0,s.useValue):Cc(L0(s),Ec)}(o);if(Ic(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Cc(void 0,Ec,!0),y.factory=()=>Xt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===Ec&&(u.value=bD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Mf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Jg(s){const o=Cn(s),u=null!==o?o.factory:ji(s);if(null!==u)return u;if(s instanceof Nn)throw new Fe(204,!1);if(s instanceof Function)return function DD(s){const o=s.length;if(o>0)throw function di(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Fe(204,!1);const u=function Zn(s){const o=s&&(s[yi]||s[Un]);if(o){const u=function Dr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Fe(204,!1)}function L0(s,o,u){let c;if(Ic(s)){const d=ne(s);return ji(d)||Jg(d)}if(U0(s))c=()=>ne(s.useValue);else if(function Hd(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Xt(s.deps||[]));else if(function AD(s){return!(!s||!s.useExisting)}(s))c=()=>$e(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function Rf(s){return!!s.deps}(s))return ji(d)||Jg(d);c=()=>new d(...Xt(s.deps))}return c}function Cc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function U0(s){return null!==s&&"object"==typeof s&&V in s}function Ic(s){return"function"==typeof s}let io=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return O0({name:""},c,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return O0({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Ms,s.NULL=new rr,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>$e(By)}),s.__NG_ELEMENT_ID__=-1,s})();function ND(s,o){qa(J_(s)[1],Tn())}function Ky(s){let o=function zy(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(rs(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Fe(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=Zy(s.inputs),y.declaredInputs=Zy(s.declaredInputs),y.outputs=Zy(s.outputs);const E=d.hostBindings;E&&OD(s,E);const I=d.viewQuery,A=d.contentQueries;if(I&&da(s,I),A&&Yy(s,A),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),rs(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(s),E===Ky&&(u=!1)}}o=Object.getPrototypeOf(o)}!function kD(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=xn(d.hostAttrs,u=xn(u,d.hostAttrs))}}(c)}function Zy(s){return s===En?{}:s===j?[]:s}function da(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Yy(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,f)=>{o(c,d,f),u(c,d,f)}:o}function OD(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Kr=null;function uu(){if(!Kr){const s=jt.Symbol;if(s&&s.iterator)Kr=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kr=c)}}}return Kr}function lu(s){return!!rm(s)&&(Array.isArray(s)||!(s instanceof Map)&&uu()in s)}function rm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ao(s,o,u,c){const d=Se();return gi(d,Js(),o)&&(Ut(),hs(Mn(),d,s,o,u,c)),ao}function cu(s,o,u,c){return gi(s,Js(),u)?o+Q(u)+c:kt}function Xy(s,o,u,c,d,f,y,E){const I=Se(),A=Ut(),x=s+20,L=A.firstCreatePass?function jD(s,o,u,c,d,f,y,E,I){const A=o.consts,x=Fd(o,s,4,y||null,$i(A,E));Kg(o,u,x,$i(A,I)),qa(o,x);const L=x.tViews=Wg(2,x,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),L.queries=o.queries.embeddedTView(x)),x}(x,A,I,o,u,c,d,f,y):A.data[x];wi(L,!1);const $=I[11].createComment("");Od(A,I,$,L),bi($,I),Fy(I,I[x]=wD($,I,$,L)),ns(L)&&Ud(A,I,L),null!=y&&Ay(I,L,E)}function X0(s){return function is(s,o){return s[o]}(function gd(){return mt.lFrame.contextLView}(),20+s)}function Pf(s,o=pt.Default){const u=Se();return null===u?$e(s,o):$u(Tn(),u,ne(s),o)}function cC(){throw new Error("invalid")}function lv(s,o,u){const c=Se();return gi(c,Js(),o)&&ds(Ut(),Mn(),c,s,o,c[11],u,!1),lv}function cv(s,o,u,c,d){const y=d?"class":"style";Qg(s,u,o.inputs[y],y,c)}function um(s,o,u,c){const d=Se(),f=Ut(),y=20+s,E=d[11],I=d[y]=pi(E,o,function Ga(){return mt.lFrame.currentNamespace}()),A=f.firstCreatePass?function JD(s,o,u,c,d,f,y){const E=o.consts,A=Fd(o,s,2,d,$i(E,f));return Kg(o,u,A,$i(E,y)),null!==A.attrs&&jd(A,A.attrs,!1),null!==A.mergedAttrs&&jd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];wi(A,!0);const x=A.mergedAttrs;null!==x&&et(E,I,x);const L=A.classes;null!==L&&kg(E,I,L);const $=A.styles;return null!==$&&c0(E,I,$),64!=(64&A.flags)&&Od(f,d,I,A),0===function pd(){return mt.lFrame.elementDepthCount}()&&bi(I,d),function ku(){mt.lFrame.elementDepthCount++}(),ns(A)&&(Ud(f,d,A),function Sy(s,o,u){if(Au(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&Ay(d,A),um}function kf(){let s=Tn();ql()?function Ua(){mt.lFrame.isParent=!1}():(s=s.parent,wi(s,!1));const o=s;!function jl(){mt.lFrame.elementDepthCount--}();const u=Ut();return u.firstCreatePass&&(qa(u,s),Au(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ef(s){return 0!=(16&s.flags)}(o)&&cv(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function $_(s){return 0!=(32&s.flags)}(o)&&cv(u,o,Se(),o.stylesWithoutHost,!1),kf}function dv(s,o,u,c){return um(s,o,u,c),kf(),dv}function pC(){return Se()}function zd(s){return!!s&&"function"==typeof s.then}function hv(s){return!!s&&"function"==typeof s.subscribe}const fv=hv;function ko(s,o,u,c){const d=Se(),f=Ut(),y=Tn();return function mC(s,o,u,c,d,f,y,E){const I=ns(c),x=s.firstCreatePass&&Yg(s),L=o[8],$=Zg(o);let ee=!0;if(3&c.type||E){const Ue=dr(c,o),nt=E?E(Ue):Ue,Ae=$.length,gt=E?Mt=>E(fn(Mt[c.index])):c.index;if(hn(u)){let Mt=null;if(!E&&I&&(Mt=function gC(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=f,Mt.__ngLastListenerFn__=f,ee=!1;else{f=gv(c,o,L,f,!1);const pn=u.listen(nt,d,f);$.push(f,pn),x&&x.push(d,gt,Ae,Ae+1)}}else f=gv(c,o,L,f,!0),nt.addEventListener(d,f,y),$.push(f),x&&x.push(d,gt,Ae,y)}else f=gv(c,o,L,f,!1);const Ce=c.outputs;let Ve;if(ee&&null!==Ce&&(Ve=Ce[d])){const Ue=Ve.length;if(Ue)for(let nt=0;nt<Ue;nt+=2){const ms=o[Ve[nt]][Ve[nt+1]].subscribe(f),Sl=$.length;$.push(f,ms),x&&x.push(d,c.index,Sl,-(Sl+1))}}}(f,d,d[11],y,s,o,!!u,c),ko}function _C(s,o,u,c){try{return!1!==u(c)}catch(d){return M0(s,d),!1}}function gv(s,o,u,c,d){return function f(y){if(y===Function)return c;const E=2&s.flags?Ar(s.index,o):o;0==(32&o[2])&&S0(E);let I=_C(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)I=_C(o,0,A,y)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Kd(s,o,u){return mv(s,"",o,"",u),Kd}function mv(s,o,u,c,d){const f=Se(),y=cu(f,o,u,c);return y!==kt&&ds(Ut(),Mn(),f,s,y,f[11],d,!1),mv}function TC(s,o,u,c,d){const f=s[u+1],y=null===o;let E=c?On(f):aa(f),I=!1;for(;0!==E&&(!1===I||y);){const x=s[E+1];du(s[E],o)&&(I=!0,s[E+1]=c?Mr(x):ks(x)),E=c?On(x):aa(x)}I&&(s[u+1]=c?ks(f):Mr(f))}function du(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ao(s,o)>=0}function _v(s,o){return function Os(s,o,u,c){const d=Se(),f=Ut(),y=function Gi(s){const o=mt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);f.firstUpdatePass&&function Si(s,o,u,c){const d=s.data;if(null===d[u+1]){const f=d[xr()],y=function yv(s,o){return o>=s.expandoStartIndex}(s,u);(function gm(s,o){return 0!=(s.flags&(o?16:32))})(f,c)&&null===o&&!y&&(o=!1),o=function vv(s,o,u,c){const d=function ja(s){const o=mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Yd(u=Ff(null,s,o,u,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=Ff(d,s,o,u,c),null===f){let I=function zi(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==aa(c))return s[On(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Ff(null,s,o,I[1],c),I=Yd(I,o.attrs,c),function xC(s,o,u,c){s[On(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else f=function RC(s,o,u){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=Yd(c,s[f].hostAttrs,u);return Yd(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,c),function sS(s,o,u,c,d,f){let y=f?o.classBindings:o.styleBindings,E=On(y),I=aa(y);s[c]=u;let x,A=!1;if(Array.isArray(u)){const L=u;x=L[1],(null===x||Ao(L,x)>0)&&(A=!0)}else x=u;if(d)if(0!==I){const $=On(s[E+1]);s[c+1]=ve($,E),0!==$&&(s[$+1]=fy(s[$+1],c)),s[E+1]=function k(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=ve(E,0),0!==E&&(s[E+1]=fy(s[E+1],c)),E=c;else s[c+1]=ve(I,0),0===E?E=c:s[I+1]=fy(s[I+1],c),I=c;A&&(s[c+1]=ks(s[c+1])),TC(s,x,c,!0),TC(s,x,c,!1),function AN(s,o,u,c,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Ao(f,o)>=0&&(u[c+1]=Mr(u[c+1]))}(o,x,s,c,f),y=ve(E,I),f?o.classBindings=y:o.styleBindings=y}(d,f,o,u,y,c)}}(f,s,y,c),o!==kt&&gi(d,y,o)&&function NC(s,o,u,c,d,f,y,E){if(!(3&o.type))return;const I=s.data,A=I[E+1];hu(function d0(s){return 1==(1&s)}(A)?PC(I,o,u,d,aa(A),y):void 0)||(hu(f)||function ro(s){return 2==(2&s)}(A)&&(f=PC(I,null,u,d,E,y)),function KT(s,o,u,c,d){const f=hn(s);if(o)d?f?s.addClass(u,c):u.classList.add(c):f?s.removeClass(u,c):u.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:sa.DashCase;if(null==d)f?s.removeStyle(u,c,y):u.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=sa.Important),f?s.setStyle(u,c,d,y):u.style.setProperty(c,d,E?"important":"")}}}(c,y,Ys(xr(),u),d,f))}(f,f.data[xr()],d,d[11],s,d[y+1]=function kC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ue(Ps(s)))),s}(o,u),c,y)}(s,o,null,!0),_v}function Ff(s,o,u,c,d){let f=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(f=o[E],c=Yd(c,f.hostAttrs,d),f!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Yd(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),hi(s,y,!!u||o[++f]))}return void 0===s?null:s}function PC(s,o,u,c,d,f){const y=null===o;let E;for(;d>0;){const I=s[d],A=Array.isArray(I),x=A?I[1]:I,L=null===x;let $=u[d+1];$===kt&&($=L?j:void 0);let ee=L?Yu($,c):x===c?$:void 0;if(A&&!hu(ee)&&(ee=Yu(I,c)),hu(ee)&&(E=ee,y))return E;const Ce=s[d+1];d=y?On(Ce):aa(Ce)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(E=Yu(I,c))}return E}function hu(s){return void 0!==s}function Cv(s,o=""){const u=Se(),c=Ut(),d=s+20,f=c.firstCreatePass?Fd(c,d,1,o,null):c.data[d],y=u[d]=function Tg(s,o){return hn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Od(c,u,y,f),wi(f,!1)}function Iv(s){return Lf("",s,""),Iv}function Lf(s,o,u){const c=Se(),d=cu(c,s,o,u);return d!==kt&&ou(c,xr(),d),Lf}const Rc=void 0;var jC=["en",[["a","p"],["AM","PM"],Rc],[["AM","PM"],Rc,Rc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rc,"{1} 'at' {0}",Rc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gS(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Qd={};function Hf(s){const o=function Am(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Sm(o);if(u)return u;const c=o.split("-")[0];if(u=Sm(c),u)return u;if("en"===c)return jC;throw new Error(`Missing locale data for the locale "${s}".`)}function $C(s){return Hf(s)[Et.PluralCase]}function Sm(s){return s in Qd||(Qd[s]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[s]),Qd[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const $f="en-US";let qf=$f;function Kv(s,o,u,c,d){if(s=ne(s),Array.isArray(s))for(let f=0;f<s.length;f++)Kv(s[f],o,u,c,d);else{const f=Ut(),y=Se();let E=Ic(s)?s:ne(s.provide),I=L0(s);const A=Tn(),x=1048575&A.providerIndexes,L=A.directiveStart,$=A.providerIndexes>>20;if(Ic(s)||!s.multi){const ee=new Vu(I,d,Pf),Ce=sh(E,o,d?x:x+$,L);-1===Ce?($r(un(A,y),f,E),Zv(f,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[Ce]=ee,y[Ce]=ee)}else{const ee=sh(E,o,x+$,L),Ce=sh(E,o,x,x+$),Ve=ee>=0&&u[ee],Ue=Ce>=0&&u[Ce];if(d&&!Ue||!d&&!Ve){$r(un(A,y),f,E);const nt=function uI(s,o,u,c,d){const f=new Vu(s,u,Pf);return f.multi=[],f.index=o,f.componentProviders=0,aI(f,d,c&&!u),f}(d?Lm:Xf,u.length,d,c,I);!d&&Ue&&(u[Ce].providerFactory=nt),Zv(f,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(nt),y.push(nt)}else Zv(f,s,ee>-1?ee:Ce,aI(u[d?Ce:ee],I,!d&&c));!d&&c&&Ue&&u[Ce].componentProviders++}}}function Zv(s,o,u,c){const d=Ic(o),f=function V0(s){return!!s.useClass}(o);if(d||f){const I=(f?ne(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(u);-1===x?A.push(u,[c,I]):A[x+1].push(c,I)}else A.push(u,I)}}}function aI(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function sh(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Xf(s,o,u,c){return ep(this.multi,[])}function Lm(s,o,u,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Xo(u,u[1],this.providerFactory.index,c);f=E.slice(0,y),ep(d,f);for(let I=y;I<E.length;I++)f.push(E[I])}else f=[],ep(d,f);return f}function ep(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function oh(s,o=[]){return u=>{u.providersResolver=(c,d)=>function zv(s,o,u){const c=Ut();if(c.firstCreatePass){const d=rs(s);Kv(u,c.data,c.blueprint,d,!0),Kv(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class lI{}class PS{resolveComponentFactory(o){throw function Nr(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let np=(()=>{class s{}return s.NULL=new PS,s})();function kS(){return Oc(Tn(),Se())}function Oc(s,o){return new ah(dr(s,o))}let ah=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=kS,s})();function cI(s){return s instanceof ah?s.nativeElement:s}class Jv{}let gu=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function OS(){const s=Se(),u=Ar(Tn().index,s);return function dI(s){return s[11]}(oi(u)?u:s)}(),s})(),Xv=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class uh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const ew=new uh("13.2.3"),rp={};function Fc(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(fn(f)),ts(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&Fc(I[1],I,A,c)}const y=u.type;if(8&y)Fc(s,o,u.child,c);else if(32&y){const E=iy(u,o);let I;for(;I=E();)c.push(I)}else if(16&y){const E=a0(o,u);if(Array.isArray(E))c.push(...E);else{const I=Cf(o[16]);Fc(I[1],I,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class lh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Fc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ts(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Sg(o,c),zu(u,c))}this._attachedToViewContainer=!1}JE(this._lView[1],this._lView)}onDestroy(o){v0(this._lView[1],this._lView,null,o)}markForCheck(){S0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ly(s,o,u){Ou(!0);try{Vd(s,o,u)}finally{Ou(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yc(s,o){If(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=o}}class tw extends lh{constructor(o){super(o),this._view=o}detectChanges(){x0(this._view)}checkNoChanges(){!function Uy(s){Ou(!0);try{x0(s)}finally{Ou(!1)}}(this._view)}get context(){return null}}class ip extends np{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=ot(o);return new Um(u,this.ngModule)}}function hI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const sp=new Nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>$E});class Um extends lI{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function QM(s){return s.map(YM).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return hI(this.componentDef.inputs)}get outputs(){return hI(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function pI(s,o){return{get:(u,c,d)=>{const f=s.get(u,rp,d);return f!==rp||c===rp?f:o.get(u,c,d)}}}(o,d.injector):o,y=f.get(Jv,qo),E=f.get(Xv,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=c?function y0(s,o,u){if(hn(s))return s.selectRootElement(o,u===St.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):pi(y.createRenderer(null,this.componentDef),A,function fI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),L=this.componentDef.onPush?576:528,$=function Wy(s,o){return{components:[],scheduler:s||$E,clean:Vy,playerHandler:o||null,flags:0}}(),ee=Wg(0,null,null,1,0,null,null,null,null,null),Ce=Sf(null,ee,$,L,null,null,y,I,E,f);let Ve,Ue;$a(Ce);try{const nt=function tm(s,o,u,c,d,f){const y=u[1];u[20]=s;const I=Fd(y,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(jd(I,A,!0),null!==s&&(et(d,s,A),null!==I.classes&&kg(d,s,I.classes),null!==I.styles&&c0(d,s,I.styles)));const x=c.createRenderer(s,o),L=Sf(u,m0(o),null,o.onPush?64:16,u[20],I,c,x,f||null,null);return y.firstCreatePass&&($r(un(I,u),y,o.type),yD(y,I),b0(I,u.length,1)),Fy(u,L),u[20]=L}(x,this.componentDef,Ce,y,I);if(x)if(c)et(I,x,["ng-version",ew.full]);else{const{attrs:Ae,classes:gt}=function JM(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!oa(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&et(I,x,Ae),gt&&gt.length>0&&kg(I,x,gt.join(" "))}if(Ue=jn(ee,20),void 0!==u){const Ae=Ue.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Mt=u[gt];Ae.push(null!=Mt?Array.from(Mt):null)}}Ve=function nm(s,o,u,c,d){const f=u[1],y=function C0(s,o,u){const c=Tn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Py(s,c,o,dl(s,o,1,null),u));const d=Xo(o,s,c.directiveStart,c);bi(d,o);const f=dr(c,o);return f&&bi(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(I=>I(y,o)),o.contentQueries){const I=Tn();o.contentQueries(1,y,I.directiveStart)}const E=Tn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Is(E.index),My(u[1],E,0,E.directiveStart,E.directiveEnd,o),_D(o,y)),y}(nt,this.componentDef,Ce,$,[ND]),wc(ee,Ce,null)}finally{Ko()}return new mI(this.componentType,Ve,Oc(Ue,Ce),Ce,Ue)}}class mI extends class tp{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new tw(d),this.componentType=o}get injector(){return new Dn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Lc{}class rw{}const uo=new Map;class sw extends Lc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ip(this);const c=Ot(o);this._bootstrapComponents=Ro(c.bootstrap),this._r3Injector=F0(o,u,[{provide:Lc,useValue:this},{provide:np,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=io.THROW_IF_NOT_FOUND,c=pt.Default){return o===io||o===Lc||o===By?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Bm extends rw{constructor(o){super(),this.moduleType=o,null!==Ot(o)&&function _I(s){const o=new Set;!function u(c){const d=Ot(c,!0),f=d.id;null!==f&&(function iw(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(f,uo.get(f),c),uo.set(f,c));const y=Ro(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new sw(this.moduleType,o)}}function ke(s){return o=>{setTimeout(s,void 0,o)}}const Sn=class ge extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,y;let E=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(f=L.error)||void 0===f?void 0:f.bind(L),A=null===(y=L.complete)||void 0===y?void 0:y.bind(L)}this.__isAsync&&(I=ke(I),E&&(E=ke(E)),A&&(A=ke(A)));const x=super.subscribe({next:E,error:I,complete:A});return o instanceof B.w0&&o.add(x),x}};function wI(){return this._results[uu()]()}class uw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=uu(),c=uw.prototype;c[u]||(c[u]=wI)}get changes(){return this._changes||(this._changes=new Sn)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Gr(o);(this._changesDetected=!function Wu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let up=(()=>{class s{}return s.__NG_ELEMENT_ID__=zS,s})();const qS=up,WS=class extends qS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Sf(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),wc(u,c,o),new lh(c)}};function zS(){return lp(Tn(),Se())}function lp(s,o){return 4&s.type?new WS(o,s,Oc(s,o)):null}let $m=(()=>{class s{}return s.__NG_ELEMENT_ID__=NN,s})();function NN(){return Vc(Tn(),Se())}const Fs=$m,EI=class extends Fs{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Oc(this._hostTNode,this._hostLView)}get injector(){return new Dn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qo(this._hostTNode,this._hostLView);if($n(o)){const u=bo(o,this._hostLView),c=Zo(o);return new Dn(u[1].data[c+8],u)}return new Dn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=lw(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const y=o&&!function Xa(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const L=u||{};E=L.index,c=L.injector,d=L.projectableNodes,f=L.ngModuleRef}const I=y?o:new Um(ot(o)),A=c||this.parentInjector;if(!f&&null==I.ngModule){const $=(y?A:this.parentInjector).get(Lc,null);$&&(f=$)}const x=I.create(A,d,void 0,f);return this.insert(x.hostView,E),x}insert(o,u){const c=o._lView,d=c[1];if(function Fa(s){return ts(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const L=c[3],$=new EI(L,L[6],L[3]);$.detach($.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function kd(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],eu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function qT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,f);const E=Mg(f,y),I=c[11],A=xg(I,y[7]);return null!==A&&function Dg(s,o,u,c,d,f){c[0]=d,c[6]=o,If(s,c,u,1,d,f)}(d,y[6],I,c,A,E),o.attachToViewContainerRef(),eu(Ht(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=lw(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Sg(this._lContainer,u);c&&(zu(Ht(this._lContainer),u),JE(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Sg(this._lContainer,u);return c&&null!=zu(Ht(this._lContainer),u)?new lh(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function lw(s){return s[8]}function Ht(s){return s[8]||(s[8]=[])}function Vc(s,o){let u;const c=o[s.index];if(ts(c))u=c;else{let d;if(8&s.type)d=fn(c);else{const f=o[11];d=f.createComment("");const y=dr(s,o);ll(f,xg(f,y),d,function zT(s,o){return hn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=wD(c,o,d,s),Fy(o,u)}return new EI(u,s,o)}class Gm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class _u{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new _u(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==wl(o,u).matches&&this.queries[u].setDirty()}}class cw{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Bc{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Bc(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class tn{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new tn(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,KS(u,f)),this.matchTNodeWithReadOption(o,u,Ss(u,o,f,!1,!1))}else c===up?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ss(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ah||d===$m||d===up&&4&u.type)this.addMatch(u.index,-2);else{const f=Ss(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function KS(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function hh(s,o,u,c){return-1===u?function ei(s,o){return 11&s.type?Oc(s,o):4&s.type?lp(s,o):null}(o,s):-2===u?function ZS(s,o,u){return u===ah?Oc(o,s):u===up?lp(o,s):u===$m?Vc(o,s):void 0}(s,o,c):Xo(s,s[1],u,o)}function kr(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let I=0;I<y.length;I+=2){const A=y[I];E.push(A<0?null:hh(o,f[A],y[I+1],u.metadata.read))}d.matches=E}return d.matches}function dw(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=kr(s,o,d,u);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)c.push(y[E/2]);else{const A=f[E+1],x=o[-I];for(let L=10;L<x.length;L++){const $=x[L];$[17]===$[3]&&dw($[1],$,A,c)}if(null!==x[9]){const L=x[9];for(let $=0;$<L.length;$++){const ee=L[$];dw(ee[1],ee,A,c)}}}}}return c}function yu(s){const o=Se(),u=Ut(),c=Kl();Zl(c+1);const d=wl(u,c);if(s.dirty&&wo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?dw(u,o,c,[]):kr(u,o,d,c);s.reset(f,cI),s.notifyOnChanges()}return!0}return!1}function vl(s,o,u,c){const d=Ut();if(d.firstCreatePass){const f=Tn();(function bI(s,o,u){null===s.queries&&(s.queries=new Bc),s.queries.track(new tn(o,u))})(d,new cw(o,u,c),f.index),function jc(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function fh(s,o,u){const c=new uw(4==(4&u));v0(s,o,c,c.destroy),null===o[19]&&(o[19]=new _u),o[19].queries.push(new Gm(c))}(d,Se(),u)}function qm(){return function II(s,o){return s[19].queries[o].queryList}(Se(),Kl())}function wl(s,o){return s.queries.getByIndex(o)}function pp(...s){}const t_=new Nn("Application Initializer");let Cl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=pp,this.reject=pp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(zd(f))u.push(f);else if(fv(f)){const y=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($e(t_,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const n_=new Nn("AppId"),tA={provide:n_,useFactory:function FI(){return`${r_()}${r_()}${r_()}`},deps:[]};function r_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ww=new Nn("Platform Initializer"),Ew=new Nn("Platform ID"),gp=new Nn("appBootstrapListener");let LI=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const mp=new Nn("LocaleId"),Kc=new Nn("DefaultCurrencyCode");class UI{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Il=(()=>{class s{compileModuleSync(u){return new Bm(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Ro(Ot(u).declarations).reduce((y,E)=>{const I=ot(E);return I&&y.push(new Um(I)),y},[]);return new UI(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const _p=(()=>Promise.resolve(0))();function Cw(s){"undefined"==typeof Zone?_p.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class cn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sn(!1),this.onMicrotaskEmpty=new Sn(!1),this.onStable=new Sn(!1),this.onError=new Sn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function iA(){let s=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Iw(s){const o=()=>{!function sA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,bw(s),s.isCheckStableRunning=!0,wh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),bw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return Tw(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Dw(s)}},onInvoke:(u,c,d,f,y,E,I)=>{try{return Tw(s),u.invoke(d,f,y,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Dw(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,bw(s),wh(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,i_,pp,pp);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const i_={};function wh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function bw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Tw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Dw(s){s._nesting--,wh(s)}class yp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sn,this.onMicrotaskEmpty=new Sn,this.onStable=new Sn,this.onError=new Sn}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let bl=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cn.assertNotInAngularZone(),Cw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)($e(cn))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),Sw=(()=>{class s{constructor(){this._applications=new Map,Zc.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Zc.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class BI{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function jI(s){Zc=s}let Ls,Zc=new BI;const Aw=new Nn("AllowMultipleToken");class HI{constructor(o,u){this.name=o,this.token=u}}function vp(s,o,u=[]){const c=`Platform: ${o}`,d=new Nn(c);return(f=[])=>{let y=xw();if(!y||y.injector.get(Aw,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:xf,useValue:"platform"});!function Ir(s){if(Ls&&!Ls.destroyed&&!Ls.injector.get(Aw,!1))throw new Fe(400,"");Ls=s.get(Yc);const o=s.get(ww,null);o&&o.forEach(u=>u())}(io.create({providers:E,name:c}))}return function mi(s){const o=xw();if(!o)throw new Fe(401,"");return o}()}}function xw(){return Ls&&!Ls.destroyed?Ls:null}let Yc=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function aA(s,o){let u;return u="noop"===s?new yp:("zone.js"===s?void 0:s)||new cn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:cn,useValue:E}];return E.run(()=>{const A=io.create({providers:I,parent:this.injector,name:u.moduleType.name}),x=u.create(A),L=x.injector.get(Ef,null);if(!L)throw new Fe(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:ee=>{L.handleError(ee)}});x.onDestroy(()=>{Rw(this._modules,x),$.unsubscribe()})}),function co(s,o,u){try{const c=u();return zd(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,E,()=>{const $=x.injector.get(Cl);return $.runInitializers(),$.donePromise.then(()=>(function vS(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(qf=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(mp,$f)||$f),this._moduleDoBootstrap(x),x))})})}bootstrapModule(u,c=[]){const d=$I({},c);return function oA(s,o,u){const c=new Bm(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(Qc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Fe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($e(io))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function $I(s,o){return Array.isArray(o)?o.reduce($I,s):Object.assign(Object.assign({},s),o)}let Qc=(()=>{class s{constructor(u,c,d,f,y){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new P.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{cn.assertNotInAngularZone(),Cw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{cn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ae.T)(E,I.pipe((0,se.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Fe(405,"");let d;d=u instanceof lI?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function nn(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Lc),E=d.create(io.NULL,[],c||d.selector,f),I=E.location.nativeElement,A=E.injector.get(bl,null),x=A&&E.injector.get(Sw);return A&&x&&x.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Rw(this.components,E),x&&x.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Rw(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(gp,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)($e(cn),$e(io),$e(Ef),$e(np),$e(Cl))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function Rw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let qI=!0,wp=!1;function Ep(){return wp=!0,qI}function Cp(){if(wp)throw new Error("Cannot enable prod mode after platform setup.");qI=!1}let WI=(()=>{class s{}return s.__NG_ELEMENT_ID__=lA,s})();function lA(s){return function zI(s,o,u){if(sd(s)&&!u){const c=Ar(s.index,o);return new lh(c,c)}return 47&s.type?new lh(o[16],o):null}(Tn(),Se(),16==(16&s))}class YI{constructor(){}supports(o){return lu(o)}create(o){return new JI(o)}}const QI=(s,o)=>o;class JI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||QI}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<eb(c,d,f)?u:c,E=eb(y,d,f),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,x=I-d;if(A!=x){for(let $=0;$<A;$++){const ee=$<f.length?f[$]:f[$]=0,Ce=ee+$;x<=Ce&&Ce<A&&(f[$]=ee+1)}f[y.previousIndex]=x-A}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!lu(o))throw new Fe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function BD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[uu()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new XI(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ow),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ow),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class XI{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ow{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new dA,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class tb{constructor(){}supports(o){return o instanceof Map||rm(o)}create(){return new Eh}}class Eh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||rm(o)))throw new Fe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new Ch(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Ch{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nb(){return new d_([new YI])}let d_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||nb()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Fe(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:nb}),s})();function Fw(){return new br([new tb])}let br=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Fw()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new Fe(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Fw}),s})();const hA=[new tb],ga=new d_([new YI]),fA=new br(hA),Tl=vp(null,"core",[{provide:Ew,useValue:"unknown"},{provide:Yc,deps:[io]},{provide:Sw,deps:[]},{provide:LI,deps:[]}]),gr=[{provide:Qc,useClass:Qc,deps:[cn,io,Ef,np,Cl]},{provide:sp,deps:[cn],useFactory:function ma(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Cl,useClass:Cl,deps:[[new Ur,t_]]},{provide:Il,useClass:Il,deps:[]},tA,{provide:d_,useFactory:function Fn(){return ga},deps:[]},{provide:br,useFactory:function Mi(){return fA},deps:[]},{provide:mp,useFactory:function pA(s){return s||function gA(){return"undefined"!=typeof $localize&&$localize.locale||$f}()},deps:[[new eo(mp),new Ur,new Wr]]},{provide:Kc,useValue:"USD"}];let gs=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($e(Qc))},s.\u0275mod=oe({type:s}),s.\u0275inj=en({providers:gr}),s})()},3942:(at,De,O)=>{"use strict";O.d(De,{Z:()=>Fe});var p=O(2090),B=O(4859),P=O(9681),ae=O(1877);class se{constructor(Q,ce){this._delegate=Q,this.firebase=ce,(0,P._addComponent)(Q,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this._delegate.automaticDataCollectionEnabled=Q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Q=>{this._delegate.checkDestroyed(),Q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Q,ce=P._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(Q);return!Me.isInitialized()&&"EXPLICIT"===(null===(Re=Me.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:ce})}_removeServiceInstance(Q,ce=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Q).clearInstance(ce)}_addComponent(Q){(0,P._addComponent)(this._delegate,Q)}_addOrOverwriteComponent(Q){(0,P._addOrOverwriteComponent)(this._delegate,Q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function _e(){const je=function ue(je){const Q={},ce={__esModule:!0,initializeApp:function he(re,Qe={}){const X=P.initializeApp(re,Qe);if((0,p.r3)(Q,X.name))return Q[X.name];const pe=new je(X,ce);return Q[X.name]=pe,pe},app:Me,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ee(re){const Qe=re.name,X=Qe.replace("-compat","");if(P._registerComponent(re)&&"PUBLIC"===re.type){const pe=(fe=Me())=>{if("function"!=typeof fe[X])throw le.create("invalid-app-argument",{appName:Qe});return fe[X]()};void 0!==re.serviceProps&&(0,p.ZB)(pe,re.serviceProps),ce[X]=pe,je.prototype[X]=function(...fe){return this._getService.bind(this,Qe).apply(this,re.multipleInstances?fe:[])}}return"PUBLIC"===re.type?ce[X]:null},removeApp:function Re(re){delete Q[re]},useAsService:function ze(re,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:P}};function Me(re){if(!(0,p.r3)(Q,re=re||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:re});return Q[re]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function be(){return Object.keys(Q).map(re=>Q[re])}}),Me.App=je,ce}(se);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Q(ce){(0,p.ZB)(je,ce)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),je}(),H=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=G;!function xe(je){(0,P.registerVersion)("@firebase/app-compat","0.1.18",je)}()},9681:(at,De,O)=>{"use strict";O.r(De),O.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Qi,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>sn,_addOrOverwriteComponent:()=>yr,_apps:()=>it,_clearComponents:()=>Cn,_components:()=>ur,_getProvider:()=>$t,_registerComponent:()=>Yt,_removeServiceInstance:()=>en,deleteApp:()=>Ji,getApp:()=>Vi,getApps:()=>Un,initializeApp:()=>yi,onLog:()=>An,registerVersion:()=>Or,setLogLevel:()=>Wt});var p=O(5861),B=O(4859),P=O(1877),ae=O(2090);class se{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function me(ht){const lt=ht.getComponent();return"VERSION"===(null==lt?void 0:lt.type)}(bt)){const Qt=bt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(bt=>bt).join(" ")}}const le="@firebase/app",_e=new P.Yd("@firebase/app"),Rn="[DEFAULT]",ut={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,ur=new Map;function sn(ht,lt){try{ht.container.addComponent(lt)}catch(bt){_e.debug(`Component ${lt.name} failed to register with FirebaseApp ${ht.name}`,bt)}}function yr(ht,lt){ht.container.addOrOverwriteComponent(lt)}function Yt(ht){const lt=ht.name;if(ur.has(lt))return _e.debug(`There were multiple attempts to register component ${lt}.`),!1;ur.set(lt,ht);for(const bt of it.values())sn(bt,ht);return!0}function $t(ht,lt){return ht.container.getProvider(lt)}function en(ht,lt,bt=Rn){$t(ht,lt).clearInstance(bt)}function Cn(){ur.clear()}const Zn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Dr{constructor(lt,bt,Qt){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const Qi="9.6.7";function yi(ht,lt={}){"object"!=typeof lt&&(lt={name:lt});const bt=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},lt),Qt=bt.name;if("string"!=typeof Qt||!Qt)throw Zn.create("bad-app-name",{appName:String(Qt)});const lr=it.get(Qt);if(lr){if((0,ae.vZ)(ht,lr.options)&&(0,ae.vZ)(bt,lr.config))return lr;throw Zn.create("duplicate-app",{appName:Qt})}const St=new B.H0(Qt);for(const Je of ur.values())St.addComponent(Je);const st=new Dr(ht,bt,St);return it.set(Qt,st),st}function Vi(ht=Rn){const lt=it.get(ht);if(!lt)throw Zn.create("no-app",{appName:ht});return lt}function Un(){return Array.from(it.values())}function Ji(ht){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(ht){const lt=ht.name;it.has(lt)&&(it.delete(lt),yield Promise.all(ht.container.getProviders().map(bt=>bt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function Or(ht,lt,bt){var Qt;let lr=null!==(Qt=ut[ht])&&void 0!==Qt?Qt:ht;bt&&(lr+=`-${bt}`);const St=lr.match(/\s|\//),st=lt.match(/\s|\//);if(St||st){const Je=[`Unable to register library "${lr}" with version "${lt}":`];return St&&Je.push(`library name "${lr}" contains illegal characters (whitespace or "/")`),St&&st&&Je.push("and"),st&&Je.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void _e.warn(Je.join(" "))}Yt(new B.wA(`${lr}-version`,()=>({library:lr,version:lt}),"VERSION"))}function An(ht,lt){if(null!==ht&&"function"!=typeof ht)throw Zn.create("invalid-log-argument");(0,P.Am)(ht,lt)}function Wt(ht){(0,P.Ub)(ht)}!function Sr(ht){Yt(new B.wA("platform-logger",lt=>new se(lt),"PRIVATE")),Or(le,"0.7.17",ht),Or(le,"0.7.17","esm2017"),Or("fire-js","")}("")},4859:(at,De,O)=>{"use strict";O.d(De,{wA:()=>P,H0:()=>ue,zt:()=>se});var p=O(5861),B=O(2090);class P{constructor(G,H,ne){this.name=G,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const ne=new B.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:H});He&&ne.resolve(He)}catch(He){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),He=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if(He)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(_e){return"EAGER"===_e.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,ne]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:He});ne.resolve(xe)}catch(xe){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,p.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...H.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ne,options:H});for(const[xe,Fe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&Fe.resolve(He);return He}onInit(G,H){var ne;const He=this.normalizeInstanceIdentifier(H),xe=null!==(ne=this.onInitCallbacks.get(He))&&void 0!==ne?ne:new Set;xe.add(G),this.onInitCallbacks.set(He,xe);const Fe=this.instances.get(He);return Fe&&G(Fe,He),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const ne=this.onInitCallbacks.get(H);if(ne)for(const He of ne)try{He(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=G,_e===ae?void 0:_e),options:H}),this.instances.set(G,ne),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(He){}var _e;return ne||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new se(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,O)=>{"use strict";O.d(De,{in:()=>B,Yd:()=>le,Ub:()=>ue,Am:()=>_e});const p=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const P={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ae=B.INFO,se={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},me=(G,H,...ne)=>{if(H<G.logLevel)return;const He=(new Date).toISOString(),xe=se[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${He}]  ${G.name}:`,...ne)};class le{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?P[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function ue(G){p.forEach(H=>{H.setLogLevel(G)})}function _e(G,H){for(const ne of p){let He=null;H&&H.level&&(He=P[H.level]),ne.userLogHandler=null===G?null:(xe,Fe,...je)=>{const Q=je.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(Re){return null}}).filter(ce=>ce).join(" ");Fe>=(null!=He?He:xe.logLevel)&&G({level:B[Fe].toLowerCase(),message:Q,args:je,type:xe.name})}}}},5861:(at,De,O)=>{"use strict";function p(P,ae,se,me,le,ue,_e){try{var G=P[ue](_e),H=G.value}catch(ne){return void se(ne)}G.done?ae(H):Promise.resolve(H).then(me,le)}function B(P){return function(){var ae=this,se=arguments;return new Promise(function(me,le){var ue=P.apply(ae,se);function _e(H){p(ue,me,le,_e,G,"next",H)}function G(H){p(ue,me,le,_e,G,"throw",H)}_e(void 0)})}}O.d(De,{Z:()=>B})}},at=>{at(at.s=3621)}]);